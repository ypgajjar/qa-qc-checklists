<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-82CDRETM_B3"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-82CDRETM_B3');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ConstructCheck Pro | QA-QC Inspection Checklists</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Sortable/1.15.0/Sortable.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf-autotable/3.5.23/jspdf.plugin.autotable.min.js"></script>

    <style>
        /* Base styles */
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* Slightly lighter gray */
        }

        /* Sidebar styles */
        #sidebar {
            width: 20rem; /* Default width */
            background: #ffffff;
            border-right: 1px solid #e2e8f0; /* Softer border */
            position: fixed;
            top: 0;
            left: 0;
            height: 100%;
            display: flex;
            flex-direction: column; /* Arrange header and content vertically */
            transition: transform 0.3s ease-in-out, width 0.3s ease-in-out;
            z-index: 40;
        }
        #sidebarHeader {
             flex-shrink: 0; /* Prevent header from shrinking */
        }
        #sidebarContentWrapper {
            flex-grow: 1; /* Allow content to take remaining space */
            overflow-y: auto; /* Enable scrolling for content */
        }
        #sidebar .item:hover { background: #f1f5f9; color: #2563eb; }
        #sidebar .item.active { background-color: #e0f2fe; color: #0c4a6e; font-weight: 500; border-left: 3px solid #0ea5e9; padding-left: calc(1rem - 3px);} /* Active item style */

        /* Main content area */
        #mainContentWrapper {
            transition: margin-left 0.3s ease-in-out;
            padding: 1.5rem;
            margin-left: 20rem; /* Default margin */
        }

        /* Card styling */
        .card {
             background-color: #ffffff;
             border-radius: 0.5rem;
             border: 1px solid #e2e8f0;
             padding: 1.5rem; /* 24px */
             margin-bottom: 1.5rem; /* 24px */
             box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
        }
        .card-header {
            font-size: 1.125rem; /* text-lg */
            font-weight: 600; /* font-semibold */
            color: #1f2937; /* text-gray-800 */
            margin-bottom: 1rem; /* 16px */
            padding-bottom: 0.75rem; /* 12px */
            border-bottom: 1px solid #e5e7eb;
        }

        /* Table styles */
        table {
            border-collapse: collapse;
            width: 100%;
            border-radius: 0.5rem;
            overflow: hidden; /* Clip content to rounded corners */
        }
        th, td {
            border: 1px solid #e5e7eb;
            padding: 0.75rem 1rem;
            text-align: left;
            vertical-align: middle;
        }
        th {
            background-color: #f9fafb;
            font-weight: 600;
            color: #374151;
            font-size: 0.875rem; /* text-sm */
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }
        tbody tr:nth-child(even) { background-color: #f9fafb; }
        tbody tr:hover { background-color: #f3f4f6; }
        .header-row td {
            background-color: #e5e7eb;
            font-weight: 600;
            font-style: italic;
            color: #1f2937;
        }
        .header-row:hover { background-color: #d1d5db; }

        /* Input field styling */
        .input-field {
            width: 100%;
            padding: 0.6rem 0.75rem;
            border: 1px solid #d1d5db;
            border-radius: 0.375rem;
            box-shadow: inset 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            transition: border-color 0.2s ease, box-shadow 0.2s ease;
            background-color: #fff;
        }
        .input-field:focus {
            outline: none;
            border-color: #2563eb;
            box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.4);
        }
        textarea.input-field { min-height: 60px; }

        /* Drag handle styling */
        .drag-handle { cursor: move; width: 2rem; text-align: center; color: #9ca3af; vertical-align: middle; }
        .drag-handle:hover { color: #374151; }

        /* Button styling */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: 0.6rem 1.2rem;
            border-radius: 0.375rem;
            font-weight: 500;
            transition: background-color 0.2s ease, box-shadow 0.2s ease, border-color 0.2s ease;
            box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05);
            cursor: pointer;
            border: 1px solid transparent;
            white-space: nowrap;
        }
        .btn:focus { outline: none; box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.4); }
        .btn-primary { background-color: #2563eb; color: white; border-color: #1d4ed8; }
        .btn-primary:hover { background-color: #1d4ed8; }
        .btn-secondary { background-color: #4b5563; color: white; border-color: #374151; }
        .btn-secondary:hover { background-color: #374151; }
        .btn-success { background-color: #16a34a; color: white; border-color: #15803d; }
        .btn-success:hover { background-color: #15803d; }
        .btn-warning { background-color: #d97706; color: white; border-color: #b45309; }
        .btn-warning:hover { background-color: #b45309; }
        .btn-danger { background-color: #dc2626; color: white; border-color: #b91c1c; }
        .btn-danger:hover { background-color: #b91c1c; }
        .btn-outline { background-color: #fff; color: #4b5563; border-color: #d1d5db; }
        .btn-outline:hover { background-color: #f9fafb; border-color: #9ca3af; }
        .btn-icon { padding: 0.5rem; }

        /* Checkbox styling */
        input[type="checkbox"] {
            width: 1.15rem; height: 1.15rem; border-radius: 0.25rem; border-color: #9ca3af;
            cursor: pointer; accent-color: #2563eb;
        }
        input[type="checkbox"]:focus { outline: none; box-shadow: 0 0 0 2px rgba(59, 130, 246, 0.4); }

        /* Notification styles */
        #notification {
            position: fixed; top: 1rem; right: 1rem; padding: 1rem 1.5rem; border-radius: 0.5rem;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1); z-index: 100; opacity: 0;
            transform: translateY(-20px); transition: opacity 0.3s ease, transform 0.3s ease;
            font-weight: 500;
        }
        #notification.show { opacity: 1; transform: translateY(0); }
        #notification.success { background-color: #dcfce7; color: #166534; border: 1px solid #86efac; }
        #notification.error { background-color: #fee2e2; color: #991b1b; border: 1px solid #fca5a5; }
        #notification.info { background-color: #dbeafe; color: #1e40af; border: 1px solid #93c5fd; }
        #notification.warning { background-color: #fef3c7; color: #92400e; border: 1px solid #fcd34d; }

        /* Photo Attachment Styles */
        .photo-item {
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            padding: 1rem;
            display: flex;
            flex-direction: column;
            gap: 0.75rem;
        }
        .photo-preview {
            max-width: 150px; /* Limit preview size */
            max-height: 150px;
            object-fit: cover; /* Crop image nicely */
            border-radius: 0.375rem;
            border: 1px solid #e5e7eb;
        }

        /* Mobile specific styles */
        @media (max-width: 768px) {
            #sidebar { transform: translateX(-100%); width: 80%; max-width: 20rem; box-shadow: 0 0 15px rgba(0,0,0,0.2); }
            #sidebar.open { transform: translateX(0); }
            #mainContentWrapper { margin-left: 0; padding: 1rem; }
            #overlay {
                position: fixed; top: 0; left: 0; width: 100%; height: 100%;
                background-color: rgba(0, 0, 0, 0.5); z-index: 30; opacity: 0;
                visibility: hidden; transition: opacity 0.3s ease, visibility 0.3s ease;
                pointer-events: none;
            }
            #overlay.active { opacity: 1; visibility: visible; pointer-events: auto;}
            .table-container { overflow-x: auto; -webkit-overflow-scrolling: touch; }
            table { min-width: 700px; } /* Increased min-width for better mobile table view */
            .signoff-grid { grid-template-columns: 1fr; } /* Stack signoff columns on mobile */
            .photo-grid { grid-template-columns: 1fr; } /* Stack photos on mobile */
        }

        /* Make table header sticky */
        .table-container thead th {
            position: sticky;
            top: 0;
            z-index: 10; /* Ensure it's above table content but below main headers if any */
            background-color: #f9fafb; /* Match header bg */
        }
        /* Style for the hidden file inputs */
        #fileInput, #photoInput { display: none; }

    </style>
</head>
<body class="bg-gray-100">

    <aside id="sidebar">
        <div id="sidebarHeader" class="p-4 border-b bg-white sticky top-0 z-10">
            <div class="flex justify-between items-center mb-3">
                <h2 class="text-xl font-bold text-gray-800">Divisions</h2>
                <button id="closeSidebarBtn" class="md:hidden text-gray-500 hover:text-gray-800">
                    <i class="fas fa-times fa-lg"></i>
                </button>
            </div>
            <div class="relative">
                <input type="text" id="sidebarSearch" placeholder="Search checklists..."
                       class="input-field w-full pl-8 text-sm"
                       oninput="filterSidebar()">
                <span class="absolute left-2 top-1/2 transform -translate-y-1/2 text-gray-400">
                    <i class="fas fa-search"></i>
                </span>
            </div>
        </div>
        <div id="sidebarContentWrapper" class="p-2">
            <div id="sidebarContent">
                <!-- Sidebar items will be populated here -->
            </div>
        </div>
    </aside>

    <div id="overlay"></div>

    <div id="mainContentWrapper">
        <div class="md:hidden flex justify-between items-center mb-4 p-2 bg-white rounded shadow-sm">
             <button id="openSidebarBtn" class="text-gray-600 hover:text-gray-900 p-2">
                <i class="fas fa-bars fa-lg"></i>
            </button>
            <h1 class="text-lg font-semibold text-center flex-grow text-gray-700">ConstructCheck Pro</h1>
            <div class="w-8"> <!-- Spacer for balance --></div>
        </div>

        <div id="placeholderContent" class="text-center py-16 px-6 bg-white rounded-lg shadow border border-gray-200">
             <i class="fas fa-clipboard-list fa-3x text-gray-400 mb-4"></i>
             <h2 class="text-xl font-semibold text-gray-700 mb-2">Select a Checklist</h2>
             <p class="text-gray-500">Choose a division and checklist from the sidebar to start.</p>
         </div>


        <div id="mainContent" class="hidden">
            <h1 id="selectedChecklistName" class="text-2xl md:text-3xl font-bold text-gray-800 mb-6"></h1>

            <div class="card">
                <h2 class="card-header">Project Details</h2>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-x-6 gap-y-4">
                    <div><label for="projectName" class="block text-sm font-medium text-gray-700 mb-1">Project Name</label><input type="text" id="projectName" class="input-field"></div>
                    <div><label for="projectNumber" class="block text-sm font-medium text-gray-700 mb-1">Project Number</label><input type="text" id="projectNumber" class="input-field"></div>
                    <div><label for="companyName" class="block text-sm font-medium text-gray-700 mb-1">Company Name</label><input type="text" id="companyName" class="input-field"></div>
                    <div><label for="inspectionDate" class="block text-sm font-medium text-gray-700 mb-1">Date of Inspection</label><input type="date" id="inspectionDate" class="input-field"></div>
                    <div class="md:col-span-2"><label for="inspectionScope" class="block text-sm font-medium text-gray-700 mb-1">Scope of Inspection</label><textarea id="inspectionScope" rows="3" class="input-field"></textarea></div>
                </div>
            </div>

            <div class="card">
                 <h2 class="card-header">Checklist Controls</h2>
                 <div class="flex flex-wrap gap-3 items-center"> <!-- Added items-center -->
                    <button onclick="addHeader()" class="btn btn-secondary"><i class="fas fa-heading mr-2"></i>Add Header</button>
                    <button onclick="addItem()" class="btn btn-primary"><i class="fas fa-plus mr-2"></i>Add Item</button>
                    <button onclick="saveChecklist()" class="btn btn-success"><i class="fas fa-save mr-2"></i>Save to Browser</button>
                    <span id="lastSavedTimestamp" class="text-xs text-gray-500"></span> <!-- NEW: Last Saved Timestamp -->
                    <button onclick="resetChecklist()" class="btn btn-danger"><i class="fas fa-sync-alt mr-2"></i>Reset</button>
                 </div>
                 <div id="checklistProgress" class="mt-4 text-sm text-gray-600"></div> <!-- NEW: Checklist Progress -->
            </div>

            <div class="card">
                 <h2 class="card-header">Checklist Items</h2>
                 <!-- NEW: Search input for checklist items -->
                 <div class="mb-4">
                    <input type="text" id="itemSearchInput" class="input-field w-full md:w-1/2 lg:w-1/3" placeholder="Search items in this checklist..." oninput="filterChecklistTable()">
                 </div>
                 <div class="table-container">
                     <table>
                        <thead>
                            <tr>
                                <th class="w-10"></th> <!-- Drag Handle -->
                                <th class="w-12">#</th>
                                <th>Description</th>
                                <th class="w-16 text-center">Yes</th>
                                <th class="w-16 text-center">No</th>
                                <th class="w-16 text-center">N/A</th>
                                <th class="w-1/3">Comment</th>
                                <th class="w-12"></th> <!-- Delete button -->
                            </tr>
                        </thead>
                        <tbody id="checklist">
                            <!-- Checklist items will be populated here -->
                        </tbody>
                    </table>
                 </div>
            </div>

             <div class="card">
                <h2 class="card-header">Photo Attachments</h2>
                <div class="mb-4">
                    <button onclick="triggerPhotoUpload()" class="btn btn-outline">
                        <i class="fas fa-camera mr-2"></i>Add Photo
                    </button>
                    <input type="file" id="photoInput" accept="image/*" capture="environment" onchange="handlePhotoUpload(event)">
                    <p class="text-xs text-gray-500 mt-1">Capture photo using device camera or upload an image file.</p>
                </div>
                <div id="photoGrid" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-4 photo-grid">
                    <!-- Photo items will be populated here -->
                </div>
            </div>


            <div class="card">
                <h2 class="card-header">Sign-off</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-x-8 gap-y-6 signoff-grid">
                    <div class="border-r md:border-r-gray-200 md:pr-6">
                        <h3 class="text-md font-semibold text-gray-600 mb-3">Internal Control / Quality Control</h3>
                        <div class="space-y-3">
                            <div><label for="sigIntName" class="block text-sm font-medium text-gray-700 mb-1">Name:</label><input type="text" id="sigIntName" class="input-field"></div>
                            <div><label for="sigIntPos" class="block text-sm font-medium text-gray-700 mb-1">Position:</label><input type="text" id="sigIntPos" class="input-field"></div>
                            <div><label for="sigIntDate" class="block text-sm font-medium text-gray-700 mb-1">Date:</label><input type="date" id="sigIntDate" class="input-field"></div>
                            <div><label for="sigIntSig" class="block text-sm font-medium text-gray-700 mb-1">Signature:</label><input type="text" id="sigIntSig" class="input-field"></div>
                        </div>
                    </div>
                    <div class="border-r md:border-r-gray-200 md:pr-6">
                        <h3 class="text-md font-semibold text-gray-600 mb-3">External Control / 3rd Party</h3>
                         <div class="space-y-3">
                            <div><label for="sigExtName" class="block text-sm font-medium text-gray-700 mb-1">Name:</label><input type="text" id="sigExtName" class="input-field"></div>
                            <div><label for="sigExtPos" class="block text-sm font-medium text-gray-700 mb-1">Position:</label><input type="text" id="sigExtPos" class="input-field"></div>
                            <div><label for="sigExtDate" class="block text-sm font-medium text-gray-700 mb-1">Date:</label><input type="date" id="sigExtDate" class="input-field"></div>
                            <div><label for="sigExtSig" class="block text-sm font-medium text-gray-700 mb-1">Signature:</label><input type="text" id="sigExtSig" class="input-field"></div>
                        </div>
                    </div>
                    <div>
                        <h3 class="text-md font-semibold text-gray-600 mb-3">Quality Assurance</h3>
                         <div class="space-y-3">
                            <div><label for="sigQaName" class="block text-sm font-medium text-gray-700 mb-1">Name:</label><input type="text" id="sigQaName" class="input-field"></div>
                            <div><label for="sigQaPos" class="block text-sm font-medium text-gray-700 mb-1">Position:</label><input type="text" id="sigQaPos" class="input-field"></div>
                            <div><label for="sigQaDate" class="block text-sm font-medium text-gray-700 mb-1">Date:</label><input type="date" id="sigQaDate" class="input-field"></div>
                            <div><label for="sigQaSig" class="block text-sm font-medium text-gray-700 mb-1">Signature:</label><input type="text" id="sigQaSig" class="input-field"></div>
                        </div>
                    </div>
                </div>
            </div>

             <div class="card">
                 <h2 class="card-header">Export / Import</h2>
                 <div class="flex flex-wrap gap-3 items-center"> <!-- Added items-center -->
                     <button onclick="downloadChecklist()" class="btn btn-outline"><i class="fas fa-download mr-2"></i>Download Checklist (JSON)</button>
                     <button onclick="triggerUpload()" class="btn btn-outline"><i class="fas fa-upload mr-2"></i>Upload Checklist (JSON)</button>
                     <button onclick="exportToPDF()" class="btn btn-primary"><i class="fas fa-file-pdf mr-2"></i>Export as PDF</button>
                     <div class="flex items-center gap-2"> <!-- Reduced gap -->
                      <label for="logoInput" class="btn btn-outline cursor-pointer">
                        <i class="fas fa-image mr-2"></i>Select Logo
                      </label>
                      <input type="file" id="logoInput" accept="image/*" class="hidden">
                      <span id="logoFilename" class="text-sm text-gray-600">No logo selected</span>
                    </div>
                 </div>
                 <input type="file" id="fileInput" accept=".json" onchange="handleFileUpload(event)">
            </div>

        </div> <!-- End of #mainContent -->
    </div> <!-- End of #mainContentWrapper -->

    <div id="notification"></div>

    <script>
        // --- DATA ---
        const checklistData = {
          "Division 03": ["Concrete Formwork","Concrete Reinforcement","Concrete Placement","Concrete Curing & Stripping","Precast Elements / Flatwork"],
          "Division 04": ["Stone Masonry & Anchored Veneers","Masonry Works (CMU & Brick)"],
          "Division 05": ["Structural Steel Framing","Steel Stairs & Handrails","Miscellaneous Metals","Metal Decking (Floor & Roof)"],
          "Division 06": ["Rough Carpentry (Framing)","Architectural Woodwork & Finish Carpentry"],
          "Division 07": ["Foundation Waterproofing","EIFS","Firestopping / Fire-Resistive Joint Systems","Metal Wall Panels / Cladding Systems","Roof Accessories / Penetrations","Vapor Retarders & Barriers","Exterior Sheathing","Thermal Break Systems","Insulation","Low Slope Roofing","Weather Air Barrier","Sealant"],
          "Division 08": ["Aluminum Windows & Glazing Systems","Hollow Metal / Wood Doors and Architectural Hardware","Glazed Aluminum Entrances (Manual & Automatic Doors)","Louvers, Vents & Architectural Grilles"],
          "Division 09": ["Gypsum Board Systems (Drywall)","Acoustic Suspended Ceilings","Interior Painting & Coatings","Ceramic & Porcelain Tiling","Resilient Flooring (LVT, VCT, Sheet Vinyl, Rubber)","Wall Coverings (Vinyl, Fabric, Wood Panels, FRP)","Polished Concrete","Epoxy & Resinous Flooring Systems"],
          "Division 10": ["Toilet Compartments and Accessories","Fire Extinguishers and Cabinets","Lockers","Interior Signage"],
          "Division 11": ["Residential and Commercial Appliances"],
          "Division 12": ["Window Treatments"],
          "Division 13": ["Pre-Engineered Metal Building (PEMB)"],
          "Division 14": ["Elevators"],
          "Division 21": ["Fire Sprinkler Systems"],
          "Division 22": ["Plumbing Rough-In & Final","Grease Interceptors and Oil Separators","Sump Pumps and Storm Water Pump-Out Systems","Storm Drainage Systems"],
          "Division 23": ["Air Handling Units (AHUs)","Exhaust and Ventilation Systems","Fan Coil Units (FCUs)","Air-Cooled and Water-Cooled Chillers","Boilers and Hot Water Heating Systems","Hydronic Piping Systems","Cooling Towers","Radiant Heating and Cooling Systems"],
          "Division 25": ["Building Automation System (BAS) Core Integration","Lighting Control System Integration"],
          "Division 26": ["Electrical Distribution Equipment","Emergency Power Systems","Interior and Exterior Lighting Systems","Fire Alarm Systems","Wiring Devices"],
          "Division 27": ["IDF/MDF & Server Room Infrastructure","Structured Cabling System"],
          "Division 28": ["CCTV System","Access Control System"],
          "Division 31": ["Excavation & Backfill","Grading & Site Prep","Shoring & Trench Safety","Soil Stabilization","Dewatering","Rock Excavation"],
          "Division 32": ["Asphalt Paving","Curbs & Sidewalks","Fencing & Gates","Site Furnishings","Landscaping & Planting"]
        };

        // Default checklist items data (replace with your full data)
        const defaultItems = {
            "Division 03::Concrete Formwork": [
        { "type": "header", "text": "A. General Formwork Requirements" },
        { "type": "item", "desc": "Approved shop drawings for formwork available on-site" },
        { "type": "item", "desc": "Form materials (plywood, steel, timber) clean and undamaged" },
        { "type": "item", "desc": "All formwork built to correct dimensions, levels, and alignment" },
        { "type": "item", "desc": "Forms erected per structural and architectural drawings" },
        { "type": "item", "desc": "Surface treatment applied as per specification (form release agent, if required)" },
        { "type": "header", "text": "B. Structural Support and Stability" },
        { "type": "item", "desc": "Bracing and supports installed to prevent movement or deflection during pour" },
        { "type": "item", "desc": "Shores, walers, and ties installed per formwork design" },
        { "type": "item", "desc": "Adequate support provided for horizontal formwork and suspended slabs" },
        { "type": "header", "text": "C. Openings and Embedded Items" },
        { "type": "item", "desc": "All block-outs, sleeves, and box-outs in correct location and secure" },
        { "type": "item", "desc": "Anchor bolts, dowels, and embeds installed as per approved layout" },
        { "type": "item", "desc": "Electrical/MEP embeds coordinated and placed prior to closing forms" },
        { "type": "header", "text": "D. Access and Pour Readiness" },
        { "type": "item", "desc": "Access for concrete placement (pumps, hoses, chutes) verified" },
        { "type": "item", "desc": "Openings for vibrator placement and form cleaning provided" },
        { "type": "item", "desc": "Surfaces moistened prior to placement (if required)" },
        { "type": "header", "text": "E. Tolerances and Safety" },
        { "type": "item", "desc": "Tolerances within CSA A23.1 / NBC standards" },
        { "type": "item", "desc": "Edge forms level and aligned (check top of slab)" },
        { "type": "item", "desc": "Safety measures in place (guardrails, signage, ladders, etc.)" },
        { "type": "header", "text": "F. Pre-Pour Review and Sign-off" },
        { "type": "item", "desc": "Pre-pour inspection performed and signed by responsible authority" },
        { "type": "item", "desc": "Photos taken for record prior to concrete placement" },
        { "type": "item", "desc": "All approvals obtained from QA/QC, structural, and client (if applicable)" }
    ],
      "Division 03::Concrete Reinforcement": [
        { "type": "header", "text": "A. Material Inspection" },
        { "type": "item", "desc": "Reinforcement type and size as per approved structural drawings" },
        { "type": "item", "desc": "Rebar is free from rust, oil, dirt, and deformation" },
        { "type": "item", "desc": "Rebar mill certificates and delivery records available on-site" },
        { "type": "header", "text": "B. Rebar Cutting, Bending, and Placement" },
        { "type": "item", "desc": "Cutting and bending conforms to approved bar bending schedules" },
        { "type": "item", "desc": "Rebar placed per layout and location indicated in structural drawings" },
        { "type": "item", "desc": "Bars are correctly lapped, spliced, and offset per code requirements" },
        { "type": "item", "desc": "Bar spacing and clearances maintained per drawings and CSA/ACI standards" },
        { "type": "item", "desc": "Reinforcement properly tied using tie wire; ties are secure and trimmed" },
        { "type": "item", "desc": "Mechanical couplers (if used) installed and torqued per manufacturer’s instructions" },
        { "type": "header", "text": "C. Cover and Support" },
        { "type": "item", "desc": "Bar supports (chairs, bolsters, spacers) used to maintain concrete cover" },
        { "type": "item", "desc": "Minimum concrete cover provided per drawings and code (slabs, beams, walls, columns)" },
        { "type": "item", "desc": "Rebar adequately secured to prevent displacement during pour" },
        { "type": "header", "text": "D. Openings and Embedded Coordination" },
        { "type": "item", "desc": "Rebar does not obstruct sleeves, openings, or embedded items" },
        { "type": "item", "desc": "Dowels and anchors placed as per layout and fixed prior to pour" },
        { "type": "item", "desc": "Coordination with electrical and mechanical embeds completed before closing" },
        { "type": "header", "text": "E. Safety and Pre-Pour Review" },
        { "type": "item", "desc": "Site safe and free from protruding bars or trip hazards" },
        { "type": "item", "desc": "Reinforcement inspected and approved by QA/QC / structural / client (if required)" },
        { "type": "item", "desc": "Photos taken for documentation and record" },
        { "type": "item", "desc": "Inspection sign-off completed prior to placement" },
    ],
      "Division 03::Concrete Placement": [
        { "type": "header", "text": "A. Pre-Placement Verification" },
        { "type": "item", "desc": "Pour sequence and method approved by structural/consultant team" },
        { "type": "item", "desc": "Pre-pour meeting held with relevant trades, foremen, and inspectors" },
        { "type": "item", "desc": "Formwork inspection completed and signed off" },
        { "type": "item", "desc": "Reinforcement and embeds verified prior to placement" },
        { "type": "item", "desc": "Weather conditions checked and recorded" },
        { "type": "item", "desc": "Mix design approved and verified (type, strength, slump, admixtures)" },
        { "type": "item", "desc": "Access routes, pump lines, chutes, and pour equipment inspected" },
        { "type": "item", "desc": "Required inspection team and third-party testing agency present" },
        { "type": "header", "text": "B. Concrete Delivery and Testing" },
        { "type": "item", "desc": "Delivery ticket checked (batch time, slump, mix type, air, temperature)" },
        { "type": "item", "desc": "Slump, temperature, and air content tests conducted at site" },
        { "type": "item", "desc": "Cylinders/cubes cast for compressive strength testing" },
        { "type": "item", "desc": "Concrete within allowable time limit from batching to placement" },
        { "type": "header", "text": "C. Placement Activities" },
        { "type": "item", "desc": "Concrete placed as per approved plan and sequence" },
        { "type": "item", "desc": "Concrete not dropped from height > 5 ft without chute/trunk" },
        { "type": "item", "desc": "No cold joints or segregation observed during placement" },
        { "type": "item", "desc": "Consolidation/vibration performed correctly and continuously" },
        { "type": "item", "desc": "Vibrator type, spacing, and technique verified" },
        { "type": "item", "desc": "Concrete uniformly distributed and leveled to required finish elevation" },
        { "type": "header", "text": "D. Post-Pour Activities" },
        { "type": "item", "desc": "Surface finish per contract requirements (trowel, broom, etc.)" },
        { "type": "item", "desc": "Formwork labeled and scheduled for removal as per curing requirement" },
        { "type": "item", "desc": "Initial curing started immediately using approved methods (covering, water, curing compound)" },
        { "type": "item", "desc": "Final curing arrangements in place (wet cure, membrane, insulation if cold)" },
        { "type": "item", "desc": "All data (temps, test results, pour log) recorded and signed by QA/QC" },
    ],
      "Division 03::Concrete Curing & Stripping": [
        { "type": "header", "text": "A. Curing Method and Initial Setup" },
        { "type": "item", "desc": "Curing method complies with specifications and CSA A23.1 (wet, membrane, insulated blankets, etc.)" },
        { "type": "item", "desc": "Curing started immediately after placement (within specified time window)" },
        { "type": "item", "desc": "Curing method appropriate for weather conditions (e.g., insulation in cold weather)" },
        { "type": "item", "desc": "Water curing systems (sprays, soaked burlap) applied uniformly" },
        { "type": "item", "desc": "Membrane curing compound applied per manufacturer specs (thickness, coverage)" },
        { "type": "header", "text": "B. Curing Duration and Protection" },
        { "type": "item", "desc": "Curing maintained for required duration (e.g., 3/7 days minimum or per mix spec)" },
        { "type": "item", "desc": "Concrete surfaces protected from wind, direct sun, freezing, or early drying" },
        { "type": "item", "desc": "Curing records maintained (start/end times, temperatures, type)" },
        { "type": "header", "text": "C. Formwork Stripping & Support Removal" },
        { "type": "item", "desc": "Minimum time for form stripping verified (slabs, beams, walls) per engineer or spec" },
        { "type": "item", "desc": "No damage to edges, surfaces, or corners during stripping" },
        { "type": "item", "desc": "Form removal done carefully without impact on structural members" },
        { "type": "item", "desc": "Soffit/form supports removed only after strength confirmation (test reports or site direction)" },
        { "type": "header", "text": "D. Surface Finish & Touch-Up" },
        { "type": "item", "desc": "Honeycombing, voids, and defects checked post-stripping" },
        { "type": "item", "desc": "All form tie holes, patching, and surface repair completed as per spec" },
        { "type": "item", "desc": "Surface treatment applied if required (e.g., sealers, hardeners)" },
        { "type": "item", "desc": "QA/QC approved stripped surfaces and authorized for subsequent works" },
    ],
      "Division 03::Precast Elements / Flatwork": [
        { "type": "header", "text": "A. Precast Concrete Elements" },
        { "type": "item", "desc": "Delivery of precast elements matches approved drawings and layout" },
        { "type": "item", "desc": "Lifting inserts/hooks secured; lifting per manufacturer instructions" },
        { "type": "item", "desc": "No damage during transport (chipping, cracking, surface blemishes)" },
        { "type": "item", "desc": "Elements stored on level surfaces with adequate supports" },
        { "type": "item", "desc": "Element type, orientation, and location verified prior to placement" },
        { "type": "item", "desc": "Alignment and leveling within tolerance (horizontal & vertical)" },
        { "type": "item", "desc": "Embedded items (anchors, sleeves, connections) properly aligned" },
        { "type": "item", "desc": "Temporary bracing/shoring provided as per design until grouting" },
        { "type": "item", "desc": "Joint gaps grouted using approved non-shrink grout or filler" },
        { "type": "item", "desc": "Grout cured as per spec and finishing matches adjacent concrete surface" },
        { "type": "item", "desc": "All connections and weld plates inspected and recorded" },
        { "type": "header", "text": "B. Flatwork & Slabs on Grade" },
        { "type": "item", "desc": "Subgrade compacted and proof-rolled, free from water, debris, or frost" },
        { "type": "item", "desc": "Base layer (gravel/sand) thickness and leveling verified" },
        { "type": "item", "desc": "Vapour barrier and insulation installed as per specification" },
        { "type": "item", "desc": "Welded wire mesh or rebar installed as per drawing and supported on chairs" },
        { "type": "item", "desc": "Control joint layout reviewed and marked prior to placement" },
        { "type": "item", "desc": "Concrete placed uniformly; no cold joints or segregation" },
        { "type": "item", "desc": "Vibrated/consolidated appropriately for slab type and thickness" },
        { "type": "item", "desc": "Surface finish meets project requirements (broom, trowel, polished, etc.)" },
        { "type": "item", "desc": "Joints saw-cut within time window to prevent cracking" },
        { "type": "item", "desc": "Curing method implemented immediately after finishing" },
        { "type": "item", "desc": "Final elevation and slope verified for drainage" },
    ],
      "Division 04::Masonry Works (CMU & Brick)": [
        { "type": "header", "text": "A. Material Verification" },
        { "type": "item", "desc": "Masonry units (CMU/brick) as per approved submittals and specification" },
        { "type": "item", "desc": "Units stored properly on level ground, protected from moisture" },
        { "type": "item", "desc": "Mortar type and mix confirmed per specification" },
        { "type": "item", "desc": "Reinforcement and ties (ladders, dowels, bars) per approved drawings" },
        { "type": "header", "text": "B. Wall Layout and Setup" },
        { "type": "item", "desc": "Layout verified per architectural and structural plans" },
        { "type": "item", "desc": "First course set true, plumb, and level" },
        { "type": "item", "desc": "Control and expansion joints located and detailed correctly" },
        { "type": "item", "desc": "Weep holes and flashing installed at appropriate intervals" },
        { "type": "header", "text": "C. Masonry Execution" },
        { "type": "item", "desc": "Bonding pattern consistent and as per drawings" },
        { "type": "item", "desc": "Joint thickness uniform and as per tolerance (typically 3/8”)" },
        { "type": "item", "desc": "Reinforcement placed correctly in cores, tied, and inspected prior to grouting" },
        { "type": "item", "desc": "Grout mix, placement, and consolidation as per standard" },
        { "type": "item", "desc": "Tooling of joints (concave, flush) per specification" },
        { "type": "header", "text": "D. Cleaning and Protection" },
        { "type": "item", "desc": "Wall cleaned using approved methods without staining or damage" },
        { "type": "item", "desc": "Work area protected from weather (cold/hot) during and after installation" },
        { "type": "item", "desc": "Masonry protected from construction damage (rebar, rework, patching)" },
        { "type": "item", "desc": "Final inspection completed and ready for following trade" },
    ],
      "Division 04::Stone Masonry & Anchored Veneers": [
        { "type": "header", "text": "A. Material Handling and Storage" },
        { "type": "item", "desc": "Stone type, color, and dimensions as per approved shop drawings/submittals" },
        { "type": "item", "desc": "Stones stored on pallets or racks and protected from staining or chipping" },
        { "type": "item", "desc": "Anchors, ties, and fasteners approved and corrosion-resistant" },
        { "type": "header", "text": "B. Substrate and Surface Preparation" },
        { "type": "item", "desc": "Backup wall/substrate inspected and approved (CMU, concrete, sheathing)" },
        { "type": "item", "desc": "Flashing and waterproofing membrane installed at base and openings" },
        { "type": "item", "desc": "Ventilation weeps or vents installed per spec" },
        { "type": "item", "desc": "Lath (if used) installed with proper spacing and fasteners" },
        { "type": "header", "text": "C. Stone Installation" },
        { "type": "item", "desc": "Mortar type and mix verified per specification" },
        { "type": "item", "desc": "Stones laid per pattern and coursing details" },
        { "type": "item", "desc": "Expansion/control joints provided per drawings" },
        { "type": "item", "desc": "Each stone securely anchored with specified anchors/ties" },
        { "type": "item", "desc": "Minimum joint spacing and bedding thickness maintained" },
        { "type": "item", "desc": "Cavity kept clean and unobstructed (no mortar droppings)" },
        { "type": "header", "text": "D. Finishing and Cleaning" },
        { "type": "item", "desc": "Joints tooled to match specified profile (raked, concave, etc.)" },
        { "type": "item", "desc": "Surface cleaned using approved method (no acid or abrasive if not allowed)" },
        { "type": "item", "desc": "All loose material and stains removed from face" },
        { "type": "item", "desc": "QA/QC and consultant final review completed" },
    ],
      "Division 05::Structural Steel Framing": [
        { "type": "header", "text": "A. Material Delivery and Handling" },
        { "type": "item", "desc": "Steel sections match approved shop drawings and specifications" },
        { "type": "item", "desc": "Mill certificates available and reviewed for compliance" },
        { "type": "item", "desc": "Steel stored off ground, with adequate supports and protection from corrosion" },
        { "type": "item", "desc": "Surface finish and coating condition verified (galvanized, primed, etc.)" },
        { "type": "header", "text": "B. Base Plate and Anchor Bolt Installation" },
        { "type": "item", "desc": "Anchor bolts placed as per layout and properly embedded" },
        { "type": "item", "desc": "Grouting under base plates complete and cured prior to steel erection" },
        { "type": "item", "desc": "Leveling and shim packing under plates checked" },
        { "type": "header", "text": "C. Erection and Connections" },
        { "type": "item", "desc": "Members erected as per erection drawings with correct orientation and alignment" },
        { "type": "item", "desc": "Bolt grade, type, and size verified per drawings/specs" },
        { "type": "item", "desc": "Bolted connections torqued or tensioned per spec" },
        { "type": "item", "desc": "Welded connections per approved WPS (Welding Procedure Specification)" },
        { "type": "item", "desc": "Weld inspection completed by certified personnel (CWB or equivalent)" },
        { "type": "item", "desc": "Fireproofing or intumescent paint installed if required" },
        { "type": "header", "text": "D. Alignment and Safety" },
        { "type": "item", "desc": "Vertical and horizontal alignment checked with total station or levels" },
        { "type": "item", "desc": "Temporary bracing installed during erection to ensure stability" },
        { "type": "item", "desc": "Final bolt tightening log submitted" },
        { "type": "item", "desc": "As-built marked up drawings prepared" },
    ],
      "Division 05::Steel Stairs & Handrails": [
        { "type": "header", "text": "A. Material Verification" },
        { "type": "item", "desc": "Stairs and handrails match approved shop drawings and specifications" },
        { "type": "item", "desc": "All components properly labeled for assembly (stringers, treads, landings, railings)" },
        { "type": "item", "desc": "Surface finish verified (galvanized, primed, powder-coated, stainless, etc.)" },
        { "type": "header", "text": "B. Fabrication and Fit-Up" },
        { "type": "item", "desc": "Stringers fabricated to correct rise/run and dimensions" },
        { "type": "item", "desc": "Tread and riser spacing consistent and within building code tolerance" },
        { "type": "item", "desc": "Welds continuous and smooth; cut edges deburred" },
        { "type": "item", "desc": "Platforms/landings square and level" },
        { "type": "header", "text": "C. Installation" },
        { "type": "item", "desc": "Units installed at correct elevation and orientation per drawings" },
        { "type": "item", "desc": "Anchors and supports correctly sized, torqued, and embedded" },
        { "type": "item", "desc": "Handrail height, spacing, and returns per code and shop drawings" },
        { "type": "item", "desc": "Guardrails and pickets installed securely and meet code spacing (e.g., < 4 inch)" },
        { "type": "header", "text": "D. Safety & Finishing" },
        { "type": "item", "desc": "Anti-slip nosing or coating applied to treads" },
        { "type": "item", "desc": "Exposed ends ground smooth; no sharp projections" },
        { "type": "item", "desc": "Site coating touch-ups completed after welds/handling" },
        { "type": "item", "desc": "Final inspection approved by QA/QC and safety officer" },
    ],
      "Division 05::Miscellaneous Metals": [
        { "type": "header", "text": "A. Material Delivery and Verification" },
        { "type": "item", "desc": "All miscellaneous metal items match submittals, shop drawings, and finish specs" },
        { "type": "item", "desc": "Material tags and marking consistent with drawing references" },
        { "type": "item", "desc": "Surface finish verified: galvanized, epoxy-coated, stainless, or primer-coated" },
        { "type": "item", "desc": "No damage (warping, corrosion, dents) noted during delivery" },
        { "type": "header", "text": "B. Fabrication and Fit-Up" },
        { "type": "item", "desc": "Field-measured and shop-drawn to suit actual conditions before fabrication" },
        { "type": "item", "desc": "Welds and cut edges ground smooth and free of sharp projections" },
        { "type": "item", "desc": "Bends, cuts, holes as per shop drawings and tolerances" },
        { "type": "header", "text": "C. Installation – Anchoring and Supports" },
        { "type": "item", "desc": "Installed in correct location and orientation per shop/erection drawings" },
        { "type": "item", "desc": "Anchors/bolts used match specification (mechanical, epoxy, expansion)" },
        { "type": "item", "desc": "Welds completed per approved WPS; CWB-certified where required" },
        { "type": "item", "desc": "Embedded components coordinated with other trades and installed with appropriate tolerance" },
        { "type": "header", "text": "D. Final Inspection & Finish Quality" },
        { "type": "item", "desc": "Coatings/touch-ups applied after installation where needed" },
        { "type": "item", "desc": "Anchoring hardware tightened and concealed (if applicable)" },
        { "type": "item", "desc": "Sharp edges, burrs, or obstructions removed before handover" },
        { "type": "item", "desc": "As-built dimensions confirmed and accepted by QA/QC" },
    ],
      "Division 05::Metal Decking (Floor & Roof)": [
        { "type": "header", "text": "A. Material Verification" },
        { "type": "item", "desc": "Decking type, gauge, and profile match approved shop drawings and submittals" },
        { "type": "item", "desc": "Deck panels free from damage (dents, corrosion, deformation)" },
        { "type": "item", "desc": "Deck panels stored on level supports and protected from weather" },
        { "type": "header", "text": "B. Installation – General" },
        { "type": "item", "desc": "Decking installed with ribs facing the correct direction and aligned per drawings" },
        { "type": "item", "desc": "Deck laps and end joints have minimum specified overlap (typically 2 inch)" },
        { "type": "item", "desc": "Sheets are tightly butted, without gaps or misalignments" },
        { "type": "header", "text": "C. Fastening and Anchorage" },
        { "type": "item", "desc": "Welded deck: Welds are full and continuous at supports and side laps" },
        { "type": "item", "desc": "Screwed deck: Screws driven as per manufacturer spacing/layout" },
        { "type": "item", "desc": "Anchorage to structural steel verified with approved fastener/weld detail" },
        { "type": "item", "desc": "Edge closures, pour stops, and angle supports properly installed and secured" },
        { "type": "header", "text": "D. Openings and Penetrations" },
        { "type": "item", "desc": "Openings cut only after layout verification and coordination with trades" },
        { "type": "item", "desc": "Reinforcement or edge framing installed around large openings" },
        { "type": "header", "text": "E. Safety and Final Review" },
        { "type": "item", "desc": "Temporary bracing and safety measures (fall protection) in place" },
        { "type": "item", "desc": "QA/QC inspection and consultant sign-off before concrete or roofing installation" },
    ],
      "Division 06::Rough Carpentry (Framing)": [
        { "type": "header", "text": "A. Material Verification" },
        { "type": "item", "desc": "Lumber size, grade, species, and treatment per approved submittals" },
        { "type": "item", "desc": "Moisture content checked for compliance (≤19% for dimensional lumber)" },
        { "type": "item", "desc": "No damaged, split, or bowed members used" },
        { "type": "item", "desc": "Fasteners and connectors (nails, screws, hangers) per spec and load tables" },
        { "type": "header", "text": "B. Floor Framing" },
        { "type": "item", "desc": "Floor sheeting nailed properly" },
        { "type": "item", "desc": "Holes in floor patched" },
        { "type": "item", "desc": "Joists do not obstruct plumbing/drainage" },
        { "type": "item", "desc": "Mid-span blocking installed at proper centers" },
        { "type": "item", "desc": "Bearing posts installed where needed" },
        { "type": "item", "desc": "Deck sheeting properly fastened" },
        { "type": "item", "desc": "Deck slope checked and correct" },
        { "type": "item", "desc": "Deck hangers nailed, lag bolts installed, soft backing installed" },
        { "type": "header", "text": "C. Wall Framing" },
        { "type": "item", "desc": "All walls properly nailed and shimmed" },
        { "type": "item", "desc": "All walls checked for plumb" },
        { "type": "item", "desc": "Wing walls are plumb and secure" },
        { "type": "item", "desc": "Shear walls patched and filled if required" },
        { "type": "item", "desc": "Drywall backing installed (≤2” variance)" },
        { "type": "item", "desc": "Wing walls are plumb and secure" },
        { "type": "item", "desc": "Blocking installed (fire, bearing, squash)" },
        { "type": "item", "desc": "ROs (Rough Openings) measured and plumb" },
        { "type": "item", "desc": "Door plates flush cut and nailed/pinned" },
        { "type": "item", "desc": "Braces, blocks, and loose nails removed" },
        { "type": "item", "desc": "Floor/wall connections patched and secure" },
        { "type": "item", "desc": "Drywall installed behind exterior studs" },
        { "type": "header", "text": "D. Structural / Hardware" },
        { "type": "item", "desc": "Beams nailed per plan" },
        { "type": "item", "desc": "Hangers filled with nails as specified" },
        { "type": "item", "desc": "Hurricane clips installed on all trusses" },
        { "type": "item", "desc": "Joist/plate gaps filled properly" },
        { "type": "item", "desc": "Columns square and plumb" },
        { "type": "header", "text": "E. Services / Envelope Coordination" },
        { "type": "item", "desc": "Poly installed at exterior/concrete joints" },
        { "type": "item", "desc": "Insulation installed in dead spaces" },
        { "type": "item", "desc": "Plumbing walls installed after LPD (drywall)" },
        { "type": "item", "desc": "Bathroom/tub framed per measurements" },
        { "type": "item", "desc": "Drywall backing installed at all angles and corners" },
        { "type": "header", "text": "F. Roof Framing / Trusses" },
        { "type": "item", "desc": "Trusses and rafters installed per truss layout and shop drawings" },
        { "type": "item", "desc": "Bracing and ties installed to resist uplift/lateral movement" },
        { "type": "item", "desc": "Roof sheathing fastened and aligned per structural specs" },
        { "type": "header", "text": "G. Final Review & Cleanup" },
        { "type": "item", "desc": "All connectors and fasteners inspected" },
        { "type": "item", "desc": "Rough framing verified against architectural and structural dimensions" },
        { "type": "item", "desc": "Debris and framing garbage neatly piled for removal" },
        { "type": "item", "desc": "QA/QC and consultant review completed prior to MEP rough-in, cladding, and insulation" },
    ],
      "Division 06::Architectural Woodwork & Finish Carpentry": [
        { "type": "header", "text": "A. Material Verification" },
        { "type": "item", "desc": "Wood species, veneers, and finishes as per approved shop drawings and submittals" },
        { "type": "item", "desc": "Hardware (hinges, pulls, glides) matches schedule and samples" },
        { "type": "item", "desc": "Moisture content of wood within acceptable range (6–10%)" },
        { "type": "item", "desc": "All materials stored in climate-controlled, dry environment" },
        { "type": "header", "text": "B. Millwork & Cabinetry Installation" },
        { "type": "item", "desc": "Cabinets leveled, shimmed, and secured to framing/substrate" },
        { "type": "item", "desc": "Cabinet joints tight and even; face frames flush" },
        { "type": "item", "desc": "Wall panels and trim align with control lines and are plumb and level" },
        { "type": "item", "desc": "Wood blocking in walls confirmed prior to installation of shelving/mirrors" },
        { "type": "item", "desc": "Coordination with appliance contractor completed and clearances verified prior to millwork start" },
        { "type": "item", "desc": "Gaps between millwork and adjacent surfaces caulked or finished per spec" },
        { "type": "item", "desc": "Exposed fasteners minimized and placed neatly or concealed" },
        { "type": "header", "text": "C. Doors, Trim & Baseboards" },
        { "type": "item", "desc": "Trim and casing cut cleanly, aligned properly at corners and joints" },
        { "type": "item", "desc": "Baseboards installed with tight joints and straight alignments" },
        { "type": "item", "desc": "Window stools, aprons, and sills installed square and flush" },
        { "type": "item", "desc": "Wood doors checked for swing, clearance, and consistent margins" },
        { "type": "header", "text": "D. Finish Review" },
        { "type": "item", "desc": "Sanding, staining, or sealing completed with uniform appearance" },
        { "type": "item", "desc": "No tool marks, dents, glue stains, or paint drips visible" },
        { "type": "item", "desc": "All surfaces clean, undamaged, and protected until turnover" },
        { "type": "item", "desc": "QA/QC sign-off and client walk-through complete" },
    ],
      "Division 07::Foundation Waterproofing": [
        { "type": "header", "text": "A. Material Verification" },
        { "type": "item", "desc": "Waterproofing membrane (sheet/applied/spray) type and thickness as per approved submittal" },
        { "type": "item", "desc": "Drainage board, protection board, primers, and termination bars match drawings/spec" },
        { "type": "item", "desc": "Materials stored upright, dry, and protected from damage/UV per manufacturer guidelines" },
        { "type": "header", "text": "B. Substrate Preparation" },
        { "type": "item", "desc": "Concrete cured min. 7 days (for sheet/spray membranes), clean, dry, and free of honeycombs, laitance" },
        { "type": "item", "desc": "Wall tie holes patched; transitions between wall/footing filleted or reinforced" },
        { "type": "item", "desc": "Termination areas marked and accessible" },
        { "type": "header", "text": "C. Waterproofing Installation" },
        { "type": "item", "desc": "Membrane installed continuous, with shingle overlap at seams (min. 75 mm / 3 inch)" },
        { "type": "item", "desc": "Inside/outside corners reinforced per detail" },
        { "type": "item", "desc": "All penetrations (pipes, rebar dowels, electrical) sealed with boots or compatible detail" },
        { "type": "item", "desc": "Horizontal-to-vertical transition wrapped continuously" },
        { "type": "header", "text": "D. Drainage & Protection Layers" },
        { "type": "item", "desc": "Drainage board installed without puncturing membrane, overlaps secured" },
        { "type": "item", "desc": "Filter fabric overlaps as per drawing (typically 100 mm)" },
        { "type": "item", "desc": "Termination bar and sealant applied where required" },
        { "type": "header", "text": "E. Final Inspection" },
        { "type": "item", "desc": "System visually inspected for blisters, tears, or fish mouths" },
        { "type": "item", "desc": "Damaged areas repaired with patches extending minimum 150 mm past defect" },
        { "type": "item", "desc": "QA/QC inspection completed and signed off prior to backfilling" },
    ],
      "Division 07::EIFS": [
        { "type": "header", "text": "A. Pre-Installation Checks" },
        { "type": "item", "desc": "Submittals for system components (insulation, mesh, base coat, finish coat, fasteners) approved" },
        { "type": "item", "desc": "EIFS installer certified by manufacturer" },
        { "type": "item", "desc": "Pre-construction meeting completed with trades, GC, consultant" },
        { "type": "item", "desc": "Mock-up panel approved (if required)" },
        { "type": "header", "text": "B. Substrate Preparation" },
        { "type": "item", "desc": "Wall substrate (e.g., sheathing) dry, clean, structurally sound" },
        { "type": "item", "desc": "Fasteners flush and no protruding nails, screws, or damage" },
        { "type": "item", "desc": "Control and expansion joint layout verified per drawingse" },
        { "type": "header", "text": "C. Moisture Barrier / WRB" },
        { "type": "item", "desc": "WRB installed continuously with minimum 100 mm laps" },
        { "type": "item", "desc": "All window/door openings wrapped and sealed with waterproof membrane" },
        { "type": "item", "desc": "Sill flashing and pan flashing at rough openings completed before EIFS" },
        { "type": "item", "desc": "Mesh or membrane embedded across sheathing joints (if required by system)" },
        { "type": "header", "text": "D. Insulation Board Installation" },
        { "type": "item", "desc": "Insulation boards of approved thickness and type" },
        { "type": "item", "desc": "Adhesive applied with full coverage or ribbons as per manufacturer" },
        { "type": "item", "desc": "Boards installed with staggered vertical joints, tight, and level" },
        { "type": "item", "desc": "No gaps >2 mm between boards; foam applied at gaps and tooled" },
        { "type": "item", "desc": "Mechanical fasteners used where required (especially over CMU)" },
        { "type": "item", "desc": "Termination at grade min. 200 mm above finished grade unless otherwise specified" },
        { "type": "header", "text": "E. Base Coat & Mesh Reinforcement" },
        { "type": "item", "desc": "Reinforcing mesh fully embedded in wet base coat" },
        { "type": "item", "desc": "Mesh overlaps a minimum of 65 mm (2.5”)" },
        { "type": "item", "desc": "Backwrap at terminations (top, bottom, openings) and edges completed" },
        { "type": "item", "desc": "Corner mesh installed at all external corners" },
        { "type": "item", "desc": "Additional high-impact mesh at vulnerable locations (ground level, doors, etc.)" },
        { "type": "item", "desc": "Base coat thickness checked as per spec (typically 1.5–3 mm)" },
        { "type": "header", "text": "F. Finish Coat Application" },
        { "type": "item", "desc": "Surface cleaned and dry before finish coat application" },
        { "type": "item", "desc": "Finish coat applied uniformly with no visible mesh or patch marks" },
        { "type": "item", "desc": "Finish color and texture matches approved mock-up or sample" },
        { "type": "item", "desc": "Finish coat protected from rain until fully cured" },
        { "type": "header", "text": "G. Final Review & Cleanup" },
        { "type": "item", "desc": "All terminations sealed and weeps installed at base of wall" },
        { "type": "item", "desc": "Sealant joints between EIFS and dissimilar materials completed" },
        { "type": "item", "desc": "Flashings visible and integrated with water-resistive barrier" },
        { "type": "item", "desc": "QA/QC inspection completed and photos taken prior to scaffolding removal" },
        { "type": "item", "desc": "Manufacturer warranty and install logbook submitted (if required)" },
    ],
      "Division 07::Firestopping / Fire-Resistive Joint Systems": [
        { "type": "header", "text": "A. Material Verification & Approval" },
        { "type": "item", "desc": "Firestopping system submittals include UL/WH system number and approved manufacturer" },
        { "type": "item", "desc": "Sealant, intumescent material, sleeves, putty pads, and backing materials approved per tested system" },
        { "type": "item", "desc": "Installation team trained/certified by manufacturer (Hilti, 3M, STI, etc.)" },
        { "type": "item", "desc": "Storage per manufacturer recommendation (dry, temp controlled)" },
        { "type": "header", "text": "B. Substrate & Opening Preparation" },
        { "type": "item", "desc": "Substrates clean, free of dust, oil, moisture, or obstructions" },
        { "type": "item", "desc": "Penetrations (MEP, cable trays, ducts) located within tested assembly dimensions" },
        { "type": "item", "desc": "Sleeve/collar/backing/mesh present if required by UL/WH system" },
        { "type": "header", "text": "C. Through Penetrations – Horizontal/Vertical Assemblies" },
        { "type": "item", "desc": "Fire caulk fully fills annular space per listed system" },
        { "type": "item", "desc": "Pipe/cable insulated or sheathed per approved tested detail" },
        { "type": "item", "desc": "Intumescent wrap or collar used for plastic/PVC pipe as specified" },
        { "type": "item", "desc": "Label/tag applied indicating UL system, install date, and contractor" },
        { "type": "header", "text": "D. Joints – Construction & Expansion" },
        { "type": "item", "desc": "Mineral wool/backer rod placed to required depth" },
        { "type": "item", "desc": "Fire-rated caulk applied to achieve required joint movement & rating (e.g., 1- or 2-hour)" },
        { "type": "item", "desc": "System complies with seismic or movement-rated assemblies (e.g., FF-S-0012)" },
        { "type": "header", "text": "E. Curtain Wall & Edge of Slab / Head of Wall" },
        { "type": "item", "desc": "Spandrel insulation installed as per fire-resistive rated assembly" },
        { "type": "item", "desc": "Perimeter fire containment system (e.g., Safing insulation + sealant) continuous and sealed" },
        { "type": "header", "text": "F. Final QA/QC Review" },
        { "type": "item", "desc": "Inspection performed with detailed photo log and UL system verification" },
        { "type": "item", "desc": "All systems labeled or documented in Firestop Register" },
        { "type": "item", "desc": "As-built drawings updated with location and system IDs" },
        { "type": "item", "desc": "Third-party inspection or special inspection completed (if required)" },
    ],
      "Division 07::Metal Wall Panels / Cladding Systems": [
        { "type": "header", "text": "A. Material Verification" },
        { "type": "item", "desc": "Panel type (ACM, IMP, corrugated) per approved shop drawings and submittals" },
        { "type": "item", "desc": "Substrate prep materials, anchors, clips, subgirts, and sealants approved" },
        { "type": "item", "desc": "Materials stored flat, dry, and protected from UV and physical damage" },
        { "type": "header", "text": "B. Framing/Substructure Preparation" },
        { "type": "item", "desc": "Structural supports/subgirts plumb, square, and fastened as per drawings" },
        { "type": "item", "desc": "Back-up wall (sheathing, air barrier, insulation) complete before panel install" },
        { "type": "item", "desc": "Control joints and expansion joints located as per architectural design" },
        { "type": "header", "text": "C. Panel Installation" },
        { "type": "item", "desc": "Panel layout follows approved elevation drawings (alignment, reveal lines)" },
        { "type": "item", "desc": "ACM/IMP panels fastened with proper clips, screws, or concealed systems" },
        { "type": "item", "desc": "Panel edges clean, straight, and protected with edge trims or finished reveals" },
        { "type": "item", "desc": "Panel seams aligned, uniform spacing, and caulked (if exposed)" },
        { "type": "item", "desc": "Protective film removed only after final inspection" },
        { "type": "header", "text": "D. Openings, Corners & Transitions" },
        { "type": "item", "desc": "Windows, doors, and louvers integrated with flashings and cladding system" },
        { "type": "item", "desc": "External and internal corners detailed as per shop drawings" },
        { "type": "item", "desc": "Transitions to other materials (e.g., stucco, masonry) sealed properly" },
        { "type": "item", "desc": "Bottom of panels terminated above grade with proper closure" },
        { "type": "header", "text": "E. Sealants & Final Review" },
        { "type": "item", "desc": "All exposed joints sealed with compatible, UV-stable caulking" },
        { "type": "item", "desc": "No oil-canning, deformation, or color inconsistency visible" },
        { "type": "item", "desc": "QA/QC review completed with punch list items addressed" },
        { "type": "item", "desc": "Manufacturer warranty or closeout documentation submitted" },
    ],
      "Division 07::Roof Accessories / Penetrations": [
        { "type": "header", "text": "A. Material Verification" },
        { "type": "item", "desc": "All roof accessories (curbs, hatches, vents, anchors) match approved shop drawings and specifications" },
        { "type": "item", "desc": "Roof curbs properly sized for equipment and coordinated with mechanical/electrical trades" },
        { "type": "item", "desc": "Flashings, boots, collars, sealants, and fasteners approved by roofing system manufacturer" },
        { "type": "item", "desc": "Materials delivered undamaged and stored in dry, secure location" },
        { "type": "header", "text": "B. Curb & Hatch Installation" },
        { "type": "item", "desc": "Curbs plumb, level, and fastened to roof deck/substrate" },
        { "type": "item", "desc": "Roof hatch frame and lid installed per manufacturer's instruction" },
        { "type": "item", "desc": "Curb and hatch heights comply with fall protection code and slope requirements" },
        { "type": "header", "text": "C. Flashing Integration with Roofing System" },
        { "type": "item", "desc": "Curb base flashed in using same membrane system (torch-on, TPO, etc.)" },
        { "type": "item", "desc": "Vertical flashing extends up curb walls and overlapped by cap flashing" },
        { "type": "item", "desc": "Round penetrations flashed using approved boots or pitch pockets filled and sealed" },
        { "type": "item", "desc": "All seams welded (TPO) or bonded (SBS) and inspected by membrane manufacturer" },
        { "type": "header", "text": "D. Mechanical & Electrical Penetrations" },
        { "type": "item", "desc": "MEP trades coordinated for layout, timing, and type of roof penetrations" },
        { "type": "item", "desc": "All conduits, ducts, and vents sealed watertight at roof entry points" },
        { "type": "item", "desc": "Strapping, bracketing, and anchorage secured without damaging membrane" },
        { "type": "header", "text": "E. Roof Safety & Anchors (if applicable)" },
        { "type": "item", "desc": "Tie-back anchors, safety lines, and davit bases installed per engineered layout" },
        { "type": "item", "desc": "All anchor systems fastened into structure and properly waterproofed" },
        { "type": "item", "desc": "System tagged and certified by third-party as per provincial safety code (OH&S)" },
        { "type": "header", "text": "F. Finish Review" },
        { "type": "item", "desc": "QA/QC visual and water-tightness inspection completed" },
        { "type": "item", "desc": "Roofing consultant/manufacturer sign-off for membrane warranty" },
        { "type": "item", "desc": "As-built drawings updated with roof penetration locations" },
    ],
      "Division 07::Vapor Retarders & Barriers": [
        { "type": "header", "text": "A. Material Verification" },
        { "type": "item", "desc": "Vapor retarder type and perm rating confirmed (e.g., ≤0.1 perm for Class I)" },
        { "type": "item", "desc": "Product listed on approved submittals and compatible with adjacent materials" },
        { "type": "item", "desc": "Sealants, tapes, and primers used are approved and compatible" },
        { "type": "item", "desc": "Materials stored dry and undamaged prior to install" },
        { "type": "header", "text": "B. Substrate Preparation" },
        { "type": "item", "desc": "Substrate dry, clean, and smooth (no protrusions, moisture, or contaminants)" },
        { "type": "item", "desc": "All penetrations pre-coordinated with trades" },
        { "type": "header", "text": "C. Wall Application (Interior/Exterior)" },
        { "type": "item", "desc": "Continuous installation without tears or holes" },
        { "type": "item", "desc": "Seams overlapped (minimum 100 mm / 4”) and sealed with approved tape" },
        { "type": "item", "desc": "Membrane turned up at floor slab and down over top plates / headers" },
        { "type": "item", "desc": "Penetrations sealed with gaskets, boots, or tapes (MEP, structural)" },
        { "type": "item", "desc": "Backed up with rigid board, batt insulation, or sheathing as per design" },
        { "type": "header", "text": "D. Under-Slab Vapor Barrier (if applicable)" },
        { "type": "item", "desc": "Sheet lapped a minimum of 150 mm (6”) and sealed" },
        { "type": "item", "desc": "Penetrations (conduits, footings) sealed individually" },
        { "type": "item", "desc": "No punctures or wrinkles under reinforcement or rebar" },
        { "type": "item", "desc": "Vapor barrier extended under footings or up vertical face (as per detail)" },
        { "type": "header", "text": "E. Roof Application (TPO/SBS Hybrid)" },
        { "type": "item", "desc": "Vapor retarder installed over deck and under insulation as per spec" },
        { "type": "item", "desc": "Torch or self-adhered membrane sealed at all laps and terminations" },
        { "type": "item", "desc": "Mechanical fasteners used only where permitted by manufacturer" },
        { "type": "header", "text": "F. Final Review & Coordination" },
        { "type": "item", "desc": "QA/QC inspection with air barrier continuity check" },
        { "type": "item", "desc": "Any repairs completed with full bond and continuity re-established" },
    ],
      "Division 07::Exterior Sheathing": [
        { "type": "header", "text": "A. Material Verification" },
        { "type": "item", "desc": "Sheathing type and thickness per approved submittals (gypsum/cement/OSB/plywood)" },
        { "type": "item", "desc": "Fasteners, adhesives, joint tape, and corner reinforcement match system spec" },
        { "type": "item", "desc": "Products stored dry, protected from moisture and impact" },
        { "type": "header", "text": "B. Wall Framing Inspection" },
        { "type": "item", "desc": "Wall framing checked for plumb, alignment, and stud spacing" },
        { "type": "item", "desc": "Blocking and structural elements in place prior to sheathing" },
        { "type": "header", "text": "C. Installation of Sheathing Panels" },
        { "type": "item", "desc": "Panels cut cleanly and installed with joints centered over framing" },
        { "type": "item", "desc": "Horizontal joints staggered between courses of panels" },
        { "type": "item", "desc": "Fastener spacing and edge distance per spec (e.g., 8 inch o.c. field / 6 inch o.c. edge)" },
        { "type": "item", "desc": "Fasteners flush to surface, not overdriven or protruding" },
        { "type": "item", "desc": "Sheathing installed with required gap at panel edges (as per product)" },
        { "type": "header", "text": "D. Penetrations, Openings, and Coordination" },
        { "type": "item", "desc": "Window and door openings accurately cut and flashed or prepared for WRB" },
        { "type": "item", "desc": "Coordination with MEP and envelope trades to avoid rework at penetrations" },
        { "type": "header", "text": "E. Sheathing Finish and Protection" },
        { "type": "item", "desc": "Sealant, tape, or joint treatment applied per sheathing manufacturer spec" },
        { "type": "item", "desc": "Sheathing protected from prolonged exposure prior to WRB or cladding installation" },
        { "type": "item", "desc": "Temporary protection (e.g., tarp) installed during rain or overnight if WRB not installed yet" },
        { "type": "header", "text": "F. QA/QC Final Review" },
        { "type": "item", "desc": "QA/QC review complete and documented prior to WRB install" },
        { "type": "item", "desc": "Punch list items resolved prior to enclosing assembly" },
    ],
      "Division 07::Thermal Break Systems": [
        { "type": "header", "text": "A. Material Verification" },
        { "type": "item", "desc": "Thermal break materials (insulating pads, blocks, composite shims, structural insulation) per submittals" },
        { "type": "item", "desc": "System manufacturer and load ratings match structural/architectural specs" },
        { "type": "item", "desc": "Product certification or test data provided (e.g., thermal resistance, compressive strength)" },
        { "type": "header", "text": "B. Substrate & Interface Prep" },
        { "type": "item", "desc": "Substrates (steel, concrete, aluminum) clean and prepared as per manufacturer's instructions" },
        { "type": "item", "desc": "All mating components dimensionally checked for flatness and fit prior to install" },
        { "type": "header", "text": "C. Installation – Curtain Wall / Window Systems" },
        { "type": "item", "desc": "Thermal breaks in aluminum mullions installed continuously without gaps" },
        { "type": "item", "desc": "Insulating strips snapped or bonded into frame with proper compression" },
        { "type": "item", "desc": "Frames and sills sealed to adjacent air/vapor barrier without thermal bridging" },
        { "type": "header", "text": "D. Installation – Steel Support & Connection Plates" },
        { "type": "item", "desc": "Thermal isolator plates or bushings installed between cladding supports and structure" },
        { "type": "item", "desc": "Insulating washers or sleeves used on through-bolts as required" },
        { "type": "item", "desc": "No direct metal-to-metal contact between cladding fasteners and building frame" },
        { "type": "header", "text": "E. Installation – Balconies & Slab Edges (Thermal Inserts)" },
        { "type": "item", "desc": "Thermal isolation elements placed per structural drawings at balcony/slab interfaces" },
        { "type": "item", "desc": "Rebar connections pass through insulation with proper cover and spacing maintained" },
        { "type": "item", "desc": "Joint treatment between slab and facade integrates with WRB/vapor barrier" },
        { "type": "header", "text": "F. Final QA Review & Documentation" },
        { "type": "item", "desc": "All thermal break assemblies verified against shop drawings and manufacturer install guides" },
        { "type": "item", "desc": "QA/QC and building envelope consultant sign-off completed before enclosing facade" },
        { "type": "item", "desc": "Thermal break components labeled or tagged for traceability (if required by spec)" },
    ],
      "Division 07::Insulation": [
        { "type": "header", "text": "A. Material Verification" },
        { "type": "item", "desc": "Insulation type (batt, board, spray foam, rigid, blown-in) per approved submittal and spec" },
        { "type": "item", "desc": "R-value matches architectural and energy code requirements" },
        { "type": "item", "desc": "Products stored dry and protected from damage" },
        { "type": "item", "desc": "Fire-resistance rating (if required) confirmed for application" },
        { "type": "header", "text": "B. Substrate Readiness & Placement" },
        { "type": "item", "desc": "Framing cavities clean, dry, and free of debris prior to installation" },
        { "type": "item", "desc": "Mechanical, plumbing, and electrical installations completed and inspected before insulation" },
        { "type": "item", "desc": "Vapor barrier (if applicable) coordinated and verified" },
        { "type": "header", "text": "C. Installation - Batt/Rigid" },
        { "type": "item", "desc": "Batt insulation fills cavities fully, without compression or gaps" },
        { "type": "item", "desc": "No air gaps, voids, or bridging at corners, edges, or around framing" },
        { "type": "item", "desc": "Rigid board insulation installed flush with substrate; joints taped or staggered as per spec" },
        { "type": "item", "desc": "Around windows/doors fully insulated and fitted" },
        { "type": "header", "text": "D. Spray Foam / Specialty Insulation" },
        { "type": "item", "desc": "Sprayed foam thickness measured and matches spec" },
        { "type": "item", "desc": "Foam not over-sprayed onto mechanical/electrical components" },
        { "type": "item", "desc": "Off-gassing or curing complete before enclosure" },
        { "type": "header", "text": "E. Final Review" },
        { "type": "item", "desc": "Acoustic insulation installed between party walls, floors, and demising walls as per plans" },
        { "type": "item", "desc": "All penetrations sealed and insulation restored after MEP work" },
        { "type": "item", "desc": "QA/QC and consultant sign-off completed prior to drywall or cladding" },
    ],
      "Division 07::Low Slope Roofing": [
        { "type": "header", "text": "A. Material Verification" },
        { "type": "item", "desc": "Roofing membrane type (TPO, SBS, EPDM, etc.) as per approved submittal" },
        { "type": "item", "desc": "Insulation type, R-value, and overlay board per drawing and CAN/ULC-S704 standard" },
        { "type": "item", "desc": "Adhesives, sealants, cleaners, fasteners, and flashings per manufacturer recommendation" },
        { "type": "item", "desc": "All materials protected from UV, rain, and stored dry on pallets/sleepers" },
        { "type": "header", "text": "B. Pre-Installation Coordination" },
        { "type": "item", "desc": "Pre-installation meeting conducted with roofing sub, consultant, and owner" },
        { "type": "item", "desc": "Wind uplift calculations performed using NRC Wind-RCI tool and approved design submitted" },
        { "type": "item", "desc": "All penetrations, vent stacks, drains, parapets prepared before install" },
        { "type": "header", "text": "C. Substrate & Vapor Retarder Prep" },
        { "type": "item", "desc": "Substrate dry, clean, firm, and approved by consultant" },
        { "type": "item", "desc": "Vapor retarder membrane installed continuous with sealed laps and terminations" },
        { "type": "item", "desc": "Nailers installed per detail and fastened with 300 kg/m resistance capacity" },
        { "type": "header", "text": "D. Insulation & Overlay Board" },
        { "type": "item", "desc": "Insulation boards staggered and tight, no gaps; damaged boards replaced" },
        { "type": "item", "desc": "Overlay board installed using full bead adhesive per manufacturer’s spacing and coverage" },
        { "type": "header", "text": "E. Membrane Installation" },
        { "type": "item", "desc": "TPO/EPDM/SBS membrane installed straight with minimum overlap (typically 75–150 mm)" },
        { "type": "item", "desc": "Membrane fastened per uplift specs; no overdriven fasteners" },
        { "type": "item", "desc": "Field seams welded by trained operator using automatic hot-air welder; hand welds only for repairs" },
        { "type": "item", "desc": "Exposed membrane cleaned with TPO Weathered Cleaner if >7 days old before welding" },
        { "type": "header", "text": "F. Flashing & Penetrations" },
        { "type": "item", "desc": "Base and curb flashings installed continuous, reinforced per spec" },
        { "type": "item", "desc": "Drain pans, pipe boots, stack covers installed and welded/sealed correctly" },
        { "type": "item", "desc": "Edge metal, termination bars, and sealants installed and approved" },
        { "type": "header", "text": "G. Final Review & QA" },
        { "type": "item", "desc": "QA/QC and third-party inspection conducted prior to warranty request" },
        { "type": "item", "desc": "Walkway protection boards installed around rooftop units" },
        { "type": "item", "desc": "Roofing warranty issued (10-year minimum full system) covering membrane and workmanship" },
    ],
      "Division 07::Weather Air Barrier": [
        { "type": "header", "text": "A. Material Verification" },
        { "type": "item", "desc": "Air/vapor barrier type approved and as per submittals" },
        { "type": "item", "desc": "Membrane product within expiry date, undamaged, stored per manufacturer recommendations" },
        { "type": "item", "desc": "Flashing tape, primers, sealants approved and compatible" },
        { "type": "header", "text": "B. Substrate Preparation" },
        { "type": "item", "desc": "Substrate clean, dry, and free of sharp edges, moisture, and debris" },
        { "type": "item", "desc": "Framing/sheathing securely fastened and joints tight" },
        { "type": "header", "text": "C. Membrane Application" },
        { "type": "item", "desc": "Barrier applied continuous with no voids, fish mouths, or wrinkles" },
        { "type": "item", "desc": "Shingle lap method followed at overlaps (min. 3” horizontal, 6” vertical)" },
        { "type": "item", "desc": "Seams sealed with compatible tape or adhesive" },
        { "type": "item", "desc": "Corner transitions detailed with membrane wrap" },
        { "type": "item", "desc": "Mechanical penetrations (pipes, vents) fully sealed and gasketed" },
        { "type": "item", "desc": "Electrical, MEP penetrations sealed with sleeves, tape, or flashing" },
        { "type": "header", "text": "D. Openings & Flashing" },
        { "type": "item", "desc": "Rough openings (windows/doors) wrapped in full pan flashing, jamb and head detailing" },
        { "type": "item", "desc": "Flashing extends over sheathing, and not behind it" },
        { "type": "item", "desc": "Transition between wall and roof or floor decks sealed" },
        { "type": "header", "text": "E. Inspection & Coordination" },
        { "type": "item", "desc": "Mock-up reviewed and approved (if required)" },
        { "type": "item", "desc": "Trade sequencing coordinated (MEP, fenestration, insulation)" },
        { "type": "item", "desc": "QA/QC visual inspection and testing (adhesion, pull test if required) completed" },
    ],
      "Division 07::Sealant": [
        { "type": "header", "text": "A. Material Verification" },
        { "type": "item", "desc": "Sealant type (silicone, polyurethane, hybrid) approved as per submittals and joint function" },
        { "type": "item", "desc": "Primer, bond breaker, and backer rod (if used) approved and compatible with substrates" },
        { "type": "item", "desc": "Manufacturer batch numbers recorded and shelf life confirmed" },
        { "type": "header", "text": "B. Surface & Joint Preparation" },
        { "type": "item", "desc": "Surfaces clean, dry, and free of oils, dust, laitance, or loose material" },
        { "type": "item", "desc": "Joint dimensions match drawings/spec (depth:width ratios followed)" },
        { "type": "item", "desc": "Proper use of backer rod or bond breaker tape to prevent three-sided adhesion" },
        { "type": "header", "text": "C. Sealant Application" },
        { "type": "item", "desc": "Ambient temperature and substrate within manufacturer’s recommended range" },
        { "type": "item", "desc": "Sealant applied in continuous bead without voids or skips" },
        { "type": "item", "desc": "Beads tooled neatly for smooth, concave finish and full contact" },
        { "type": "item", "desc": "Adjacent surfaces protected from smears; excess removed before curing" },
        { "type": "header", "text": "D. Special Locations" },
        { "type": "item", "desc": "Window perimeters (exterior/interior) sealed to air/vapor barrier" },
        { "type": "item", "desc": "Control joints and expansion joints sealed per movement rating/spec" },
        { "type": "item", "desc": "Mechanical/electrical penetrations through envelope sealed" },
        { "type": "header", "text": "E. Final Inspection" },
        { "type": "item", "desc": "Visual inspection for continuity, adhesion, and finish" },
        { "type": "item", "desc": "Adhesion test or mock-up pull test done (if required)" },
        { "type": "item", "desc": "Manufacturer warranty or sealant certification submitted (if specified)" },
    ],
      "Division 08::Aluminum Windows & Glazing Systems": [
        { "type": "header", "text": "A. Material Verification" },
        { "type": "item", "desc": "Window type (curtain wall, storefront, punched) matches approved shop drawings & architectural intent" },
        { "type": "item", "desc": "Frames, glass, gaskets, fasteners, anchors, and sealants match submittals" },
        { "type": "item", "desc": "Frames inspected for damage, deformation, or finish issues prior to install" },
        { "type": "header", "text": "B. Pre-Installation Review" },
        { "type": "item", "desc": "Rough openings sized and framed as per tolerance; shims & blocking provided" },
        { "type": "item", "desc": "Air barrier/vapor barrier transitions coordinated at perimeter" },
        { "type": "item", "desc": "Mock-up or first install verified (if required)" },
        { "type": "header", "text": "C. Frame Installation" },
        { "type": "item", "desc": "Frames installed level, plumb, square, shimmed, and anchored as per engineered detail" },
        { "type": "item", "desc": "Thermal breaks (if required) continuous and undamaged" },
        { "type": "item", "desc": "Head, jamb, sill clips and mullions installed tight with no misalignment" },
        { "type": "header", "text": "D. Glazing" },
        { "type": "item", "desc": "Glass type (low-E, tempered, laminated, IGU) matches approved glazing schedule" },
        { "type": "item", "desc": "Glazing blocks placed and pressure plates torqued to spec" },
        { "type": "item", "desc": "Setting blocks and edge clearances provided as per system requirement" },
        { "type": "item", "desc": "No scratches, distortions, or blemishes on glass" },
        { "type": "header", "text": "E. Weatherproofing & Finishes" },
        { "type": "item", "desc": "All perimeter caulking sealed continuously with no voids, cold joints" },
        { "type": "item", "desc": "Transition to WRB/AVB sealed with membrane/tape per detail" },
        { "type": "item", "desc": "Sill pans or drip edges installed as per spec" },
        { "type": "header", "text": "F. Final QA/QC & Testing" },
        { "type": "item", "desc": "Water and air infiltration tested (ASTM E1105 / E783) if required" },
        { "type": "item", "desc": "Punch list completed; operation, locks, and finishes inspected" },
        { "type": "item", "desc": "Warranty and as-built glazing submittals provided" },
    ],
      "Division 08::Hollow Metal / Wood Doors and Architectural Hardware": [
        { "type": "header", "text": "A. Material Verification" },
        { "type": "item", "desc": "Door type (hollow metal, wood, fiberglass) and size matches door schedule & approved submittals" },
        { "type": "item", "desc": "Fire-rated doors, frames, glazing and labels match ULC/WH listing" },
        { "type": "item", "desc": "Hardware type (lever, closer, hinge, panic, stop) matches hardware schedule" },
        { "type": "item", "desc": "Hardware manufacturer and model # match approved templates" },
        { "type": "header", "text": "B. Frame & Rough Opening" },
        { "type": "item", "desc": "Frames plumb, square, and anchored to structure with correct fasteners" },
        { "type": "item", "desc": "Grout or backer in masonry/steel stud frames where specified" },
        { "type": "item", "desc": "All penetrations, vent stacks, drains, parapets prepared before install" },
        { "type": "header", "text": "C. Door Leaf Installation" },
        { "type": "item", "desc": "Door installed with consistent gap (typically 1/8 inch sides/top; 3/4 inch bottom clearance)" },
        { "type": "item", "desc": "Pre-finished doors free from defects, warps, or finish damage" },
        { "type": "item", "desc": "Sound-rated, lead-lined, or specialty doors verified as per location" },
        { "type": "header", "text": "D. Hardware Installation" },
        { "type": "item", "desc": "Hinges installed with correct spacing, tight to frame/leaf, no binding" },
        { "type": "item", "desc": "Closers installed on correct side, torqued per manufacturer, and arm swing tested" },
        { "type": "item", "desc": "Lockset/lever installed, keyed correctly, and functioning without friction" },
        { "type": "item", "desc": "Panic hardware and exit devices compliant with fire/life safety path" },
        { "type": "item", "desc": "Kickplates, stops, silencers, thresholds installed where specified" },
        { "type": "header", "text": "E. Code & Accessibility" },
        { "type": "item", "desc": "Door swing and clearances meet fire exit and barrier-free code (ADA/NBC)" },
        { "type": "item", "desc": "Vision lite height and hardware height as per code" },
        { "type": "item", "desc": "Lever hardware usable with closed fist, no pinching/grasping required" },
        { "type": "header", "text": "F. Final QA/QC Review" },
        { "type": "item", "desc": "All doors swing freely and latch under self-closing" },
        { "type": "item", "desc": "Fire-rated assemblies labeled and documented in closeout" },
        { "type": "item", "desc": "Keying schedule submitted and keys tagged per suite" },
    ],
      "Division 08::Glazed Aluminum Entrances (Manual & Automatic Doors)": [
        { "type": "header", "text": "A. Material Verification" },
        { "type": "item", "desc": "Door system type (swinging, sliding, automatic) matches approved shop drawings and schedules" },
        { "type": "item", "desc": "Frames, operators, safety sensors, hardware, thresholds match submittals" },
        { "type": "item", "desc": "Glazing type and thickness confirmed per code (tempered/laminated safety glass)" },
        { "type": "item", "desc": "Finish and color of system components match architectural specs" },
        { "type": "header", "text": "B. Frame and Opening Prep" },
        { "type": "item", "desc": "Opening framed level, plumb, and square with sufficient embed/support for frame anchoring" },
        { "type": "item", "desc": "Anchor embeds, blocking, wiring rough-ins installed prior to system arrival" },
        { "type": "header", "text": "C. System Assembly & Door Leaf" },
        { "type": "item", "desc": "Frame installed square, all perimeter sealed and shimmed" },
        { "type": "item", "desc": "Door leaves aligned, operated manually before power-up" },
        { "type": "item", "desc": "Panic hardware or locking mechanism functional and secure" },
        { "type": "item", "desc": "Glazing installed without scratches, edge damage, or misalignment" },
        { "type": "header", "text": "D. Operator & Power Activation" },
        { "type": "item", "desc": "Power wiring routed to operator and verified for voltage match" },
        { "type": "item", "desc": "Motion sensors and safety presence sensors installed and tested" },
        { "type": "item", "desc": "Push button (ADA) and activation zones tested with timed delay" },
        { "type": "item", "desc": "Door closes securely and reopens on obstruction during test" },
        { "type": "header", "text": "E. Accessibility, Life Safety & Code" },
        { "type": "item", "desc": "Clear opening width ≥ 850 mm (per NBC/ADA)" },
        { "type": "item", "desc": "Door swing or motion does not encroach on required path of travel" },
        { "type": "item", "desc": "All hardware reachable between 34–48 inch above finished floor" },
        { "type": "header", "text": "F. QA/QC Final Review" },
        { "type": "item", "desc": "System tested for full operation in power and manual mode" },
        { "type": "item", "desc": "Manufacturer commissioning and start-up log completed" },
        { "type": "item", "desc": "Consultant and envelope inspection (if applicable) signed off" },
    ],
      "Division 08::Louvers, Vents & Architectural Grilles": [
        { "type": "header", "text": "A. Material Verification" },
        { "type": "item", "desc": "Louver/grille type and model matches mechanical/equipment schedule" },
        { "type": "item", "desc": "Louvers tested per AMCA/ASHRAE for free area, pressure drop, and water infiltration" },
        { "type": "item", "desc": "Finish (e.g., anodized, powder coat) and color match architectural elevations" },
        { "type": "item", "desc": "Accessories (bird screen, insect screen, blank-offs) received and match submittals" },
        { "type": "header", "text": "B. Rough Opening Prep" },
        { "type": "item", "desc": "Framed or masonry opening level, plumb, square" },
        { "type": "item", "desc": "Flashing, sill pan, and air barrier tie-ins prepped prior to install" },
        { "type": "item", "desc": "Coordination with mechanical and cladding trades complete before install" },
        { "type": "header", "text": "C. Installation of Louvers/Vents" },
        { "type": "item", "desc": "Louver frame fastened with anchors per manufacturer’s recommendation" },
        { "type": "item", "desc": "Sealant applied continuously around perimeter" },
        { "type": "item", "desc": "Bird/insect screens installed on interior side (unless specified otherwise)" },
        { "type": "item", "desc": "Interior duct or exhaust connections secured and aligned" },
        { "type": "header", "text": "D. Louver Banks / Architectural Grilles" },
        { "type": "item", "desc": "Multi-section louvers aligned for uniform reveals, depth, and spacing" },
        { "type": "item", "desc": "Continuous flashings and trim pieces installed between joined sections" },
        { "type": "item", "desc": "Decorative/architectural grilles aligned and secured against wind rattle" },
        { "type": "header", "text": "E. Final Inspection & Performance" },
        { "type": "item", "desc": "Free air opening confirmed per design (ducting or building automation reviewed if required)" },
        { "type": "item", "desc": "Water test or pressure performance tested (if required by consultant/spec)" },
        { "type": "item", "desc": "Manufacturer’s warranty and closeout documentation submitted" },
    ],
      "Division 09::Gypsum Board Systems (Drywall)": [
        { "type": "header", "text": "A. Material Verification" },
        { "type": "item", "desc": "Gypsum type (regular, Type X, mold-resistant, tile backer) matches location and submittals" },
        { "type": "item", "desc": "Stud spacing, type, and gauge confirmed prior to boarding" },
        { "type": "item", "desc": "Fasteners, corner beads, trims, and backing materials match approved schedule/spec)" },
        { "type": "header", "text": "B. Framing Inspection (Prior to Boarding)" },
        { "type": "item", "desc": "Wall framing inspected for plumb, alignment, and proper backing at openings and fixtures" },
        { "type": "item", "desc": "Inspections (electrical, plumbing, firestopping) signed off before boarding" },
        { "type": "item", "desc": "Fire/sound insulation and sealants installed prior to drywall closure" },
        { "type": "header", "text": "C. Board Installation" },
        { "type": "item", "desc": "Boards installed with staggered vertical joints; horizontal joints centered on framing" },
        { "type": "item", "desc": "Screws spaced correctly (typically 12 inch o.c. field / 8 inch o.c. edge unless otherwise specified)" },
        { "type": "item", "desc": "No overdriven screws, excessive gaps, or damaged boards" },
        { "type": "item", "desc": "Acoustic sealant applied at top/bottom plates and control joints (where required)" },
        { "type": "header", "text": "D. Finishing / Taping" },
        { "type": "item", "desc": "All joints taped and finished to specified level (e.g., Level 4 or 5 finish)" },
        { "type": "item", "desc": "Control joints, corner beads, and reveals installed straight and clean" },
        { "type": "item", "desc": "Compound sanding free from ridges, gouges, or scratches" },
        { "type": "header", "text": "E. Specialty Assemblies" },
        { "type": "item", "desc": "Shaft wall, fire-rated walls, chase walls completed to UL/WH assembly details" },
        { "type": "item", "desc": "Moisture-resistant boards used in wet areas per spec" },
        { "type": "item", "desc": "Lead-lined, acoustic, or impact-resistant boards verified where required" },
        { "type": "header", "text": "F. QA/QC & Final Punch" },
        { "type": "item", "desc": "Walls and ceilings visually inspected for level/plumb and uniformity" },
        { "type": "item", "desc": "Closeout documents submitted (UL assembly IDs, mock-up approvals if required)" },
        { "type": "item", "desc": "Surface ready for paint or finish without defects" },
    ],
      "Division 09::Acoustic Suspended Ceilings": [
        { "type": "header", "text": "A. Material Verification" },
        { "type": "item", "desc": "Ceiling type, grid profile, and acoustic tile model match approved submittals" },
        { "type": "item", "desc": "Tile NRC (Noise Reduction Coefficient), CAC (Ceiling Attenuation Class) ratings match spec" },
        { "type": "item", "desc": "Suspension wires, main tees, cross tees, trims, and hold-down clips reviewed and received" },
        { "type": "header", "text": "B. Pre-Installation Checks" },
        { "type": "item", "desc": "Mechanical, electrical, and sprinkler rough-ins completed and coordinated with ceiling layout" },
        { "type": "item", "desc": "Perimeter wall angles installed level, continuous, and at correct height" },
        { "type": "item", "desc": "Existing ceiling and services removed (if applicable); substrate conditions verified" },
        { "type": "header", "text": "C. Grid Suspension Installation" },
        { "type": "item", "desc": "Suspension wires installed to structure and spaced per code (typically 4’ o.c.)" },
        { "type": "item", "desc": "Grid levelled and aligned with laser or string line" },
        { "type": "item", "desc": "Main tees and cross tees clipped securely, square, and tight" },
        { "type": "item", "desc": "Seismic bracing installed where required" },
        { "type": "header", "text": "D. Tile Installation" },
        { "type": "item", "desc": "Tiles cut cleanly, seated flat in grid, and corners square" },
        { "type": "item", "desc": "Tiles installed tight to grid with no sagging or gaps" },
        { "type": "item", "desc": "Tiles around lights, grilles, sprinklers cut and trimmed neatly" },
        { "type": "item", "desc": "Damaged tiles replaced before handover" },
        { "type": "header", "text": "E. Coordination & Final Review" },
        { "type": "item", "desc": "Access panels, light fixtures, and HVAC diffusers properly supported" },
        { "type": "item", "desc": "Final height and alignment confirmed with reflected ceiling plan (RCP)" },
        { "type": "item", "desc": "Punch list reviewed and deficiencies corrected" },
        { "type": "item", "desc": "Closeout documents submitted including warranties and acoustical performance data" },
    ],
      "Division 09::Interior Painting & Coatings": [
        { "type": "header", "text": "A. Material Verification" },
        { "type": "item", "desc": "Paint/coating type (latex, epoxy, enamel, elastomeric) matches approved submittals and room finish schedule" },
        { "type": "item", "desc": "Finish type confirmed (e.g., flat, eggshell, semi-gloss, gloss) per room use" },
        { "type": "item", "desc": "Approved primers, sealers, patching materials on site" },
        { "type": "item", "desc": "MSDS and VOC compliance data submitted for all materials" },
        { "type": "header", "text": "B. Surface Preparation" },
        { "type": "item", "desc": "Substrates dry, dust-free, patched, and sanded smooth" },
        { "type": "item", "desc": "Gypsum surfaces finished to Level 4 or 5 (as specified) prior to paint" },
        { "type": "item", "desc": "Masking and protection of adjacent surfaces completed" },
        { "type": "item", "desc": "Primer applied and allowed proper cure time" },
        { "type": "header", "text": "C. Application of Paint/Coating" },
        { "type": "item", "desc": "First coat applied evenly with proper coverage and no lap marks" },
        { "type": "item", "desc": "Final coat applied with no visible roller marks, streaks, holidays" },
        { "type": "item", "desc": "Coats applied per manufacturer recommendation (dry film thickness, coverage rates)" },
        { "type": "item", "desc": "Approved tools used (roller, brush, airless sprayer) for specified system" },
        { "type": "header", "text": "D. Touch-Up & Final Review" },
        { "type": "item", "desc": "Touch-up performed where required and finish matches adjacent areas" },
        { "type": "item", "desc": "Transition lines clean and crisp (walls to ceiling, casing to wall, etc.)" },
        { "type": "item", "desc": "No drips, overspray, or damage to other trades" },
        { "type": "item", "desc": "Clean-up complete and all protection removed" },
        { "type": "item", "desc": "Final signoff by consultant or owner rep" },
    ],
      "Division 09::Ceramic & Porcelain Tiling": [
        { "type": "header", "text": "A. Material Verification" },
        { "type": "item", "desc": "Tile type (ceramic, porcelain, mosaic, natural stone) matches submittals and finish schedule" },
        { "type": "item", "desc": "Adhesives, grout, waterproofing membranes, and expansion joints approved and on-site" },
        { "type": "item", "desc": "Tile size, color, pattern, and trim/accessory pieces confirmed prior to install" },
        { "type": "item", "desc": "Substrate/backer board type and condition verified (Durock, Schluter, cement board, etc.)" },
        { "type": "header", "text": "B. Frame and Opening Prep" },
        { "type": "item", "desc": "Substrate level, clean, dry, and cured (for concrete)" },
        { "type": "item", "desc": "Sloped to drain (for showers, wet rooms, exterior areas)" },
        { "type": "item", "desc": "Crack isolation membrane installed if required by spec" },
        { "type": "item", "desc": "Waterproofing membrane installed at wet areas, shower walls, pans, etc." },
        { "type": "item", "desc": "Waterproofing properly cured and flood-tested if required" },
        { "type": "header", "text": "C. Tile Installation" },
        { "type": "item", "desc": "Tiles laid per pattern (grid, brick, diagonal) and aligned with control joints" },
        { "type": "item", "desc": "Mortar bed coverage >90% at wet areas, >80% at dry areas" },
        { "type": "item", "desc": "Tile joints uniform in width and spacing" },
        { "type": "item", "desc": "Movement joints installed where required (floor transitions, perimeters)" },
        { "type": "header", "text": "D. Grouting & Finishes" },
        { "type": "item", "desc": "Grout type and color approved and consistent" },
        { "type": "item", "desc": "Grout joints clean, fully filled, and flush with tile surface" },
        { "type": "item", "desc": "Transition trims installed cleanly at changes in flooring or wall finish" },
        { "type": "item", "desc": "No lippage or cracked tiles" },
        { "type": "header", "text": "E. Final Review & Closeout" },
        { "type": "item", "desc": "Surface cleaned and free from haze, residue, or construction dust" },
        { "type": "item", "desc": "All tile edges properly caulked or grouted (no voids or excessive silicone)" },
        { "type": "item", "desc": "Consultant or owner walkthrough completed and signoff received" },
    ],
      "Division 09::Resilient Flooring (LVT, VCT, Sheet Vinyl, Rubber)": [
        { "type": "header", "text": "A. Material Verification" },
        { "type": "item", "desc": "Flooring type (LVT, VCT, sheet vinyl, rubber) and pattern match finish schedule and approved submittals" },
        { "type": "item", "desc": "Adhesive, moisture barrier, and levelling compound match manufacturer’s system" },
        { "type": "item", "desc": "Baseboards, nosings, reducer strips, and accessories confirmed on site" },
        { "type": "item", "desc": "Materials stored flat, clean, and conditioned for 24–48 hrs per manufacturer" },
        { "type": "header", "text": "B. Substrate Preparation" },
        { "type": "item", "desc": "Subfloor dry, flat, smooth, and cleaned of dust or debris" },
        { "type": "item", "desc": "Floor levelled to spec (typically ≤1/8 inch in 10 feet)" },
        { "type": "item", "desc": "Moisture content and RH tested and within limits for flooring system" },
        { "type": "header", "text": "C. Layout & Installation" },
        { "type": "item", "desc": "Layout approved and aligned with architectural drawing or reference point" },
        { "type": "item", "desc": "Directional arrows followed (if LVT or rubber planks)" },
        { "type": "item", "desc": "Adhesive applied uniformly, allowed open time, and flooring rolled as per spec" },
        { "type": "item", "desc": "Expansion joints installed at required locations and door thresholds" },
        { "type": "item", "desc": "No bubbles, curling, or hollow spots in finished surface" },
        { "type": "header", "text": "D. Finish Trims & Accessories" },
        { "type": "item", "desc": "Cove base or straight base installed cleanly and tight to wall" },
        { "type": "item", "desc": "Transition strips secure and smooth at doorways or flooring changes" },
        { "type": "item", "desc": "Stairs: nosings, treads, and risers properly aligned and glued" },
        { "type": "header", "text": "E. Final Inspection & Punch" },
        { "type": "item", "desc": "Surface clean and free from residue, adhesive stains, or scuff marks" },
        { "type": "item", "desc": "Visual inspection completed by contractor and consultant" },
        { "type": "item", "desc": "Closeout documents submitted (warranties, cleaning instructions, adhesives used)" },
    ],
      "Division 09::Wall Coverings (Vinyl, Fabric, Wood Panels, FRP)": [
        { "type": "header", "text": "A. Material Verification" },
        { "type": "item", "desc": "Wall covering type (vinyl, fabric, wood, FRP) and pattern matches finish schedule" },
        { "type": "item", "desc": "Adhesive type and spread rate match approved submittals and manufacturer guidance" },
        { "type": "item", "desc": "Accessory trims (corner guards, base reveals, end caps) reviewed and on site" },
        { "type": "item", "desc": "Rolls or panels conditioned and inspected for dye lot or surface flaws" },
        { "type": "header", "text": "B. Surface Preparation" },
        { "type": "item", "desc": "Substrate clean, smooth, and sealed if required (especially drywall)" },
        { "type": "item", "desc": "Primer or sizing applied to porous or gypsum surfaces per spec" },
        { "type": "item", "desc": "Wall surface flat and free from bumps or defects visible through covering" },
        { "type": "header", "text": "C. Installation – Sheet Vinyl or Fabric" },
        { "type": "item", "desc": "Pattern alignment verified at seams and corners" },
        { "type": "item", "desc": "Seams tight and not overlapped unless manufacturer allows" },
        { "type": "item", "desc": "Corners tight and top edge aligned with control or datum line" },
        { "type": "header", "text": "D. Installation – FRP or Wood Panel Systems" },
        { "type": "item", "desc": "Panels cut cleanly, fit tight to corner trims, and gapped per spec" },
        { "type": "item", "desc": "Adhesive coverage >95% with consistent contact on substrate" },
        { "type": "item", "desc": "Mechanical fasteners installed per detail (if required)" },
        { "type": "header", "text": "E. Finishing & Cleanup" },
        { "type": "item", "desc": "All exposed trims and accessories installed straight and flush" },
        { "type": "item", "desc": "Surface cleaned, no glue bleed, bubbles, or discoloration" },
        { "type": "item", "desc": "Final walkthrough approved by consultant and punchlist cleared" },
    ],
      "Division 09::Polished Concrete": [
        { "type": "header", "text": "A. Material & Slab Verification" },
        { "type": "item", "desc": "Concrete slab meets minimum compressive strength (typically ≥ 3000 psi)" },
        { "type": "item", "desc": "Mix design reviewed for compatibility with polishing system (low air, minimal SCMs)" },
        { "type": "item", "desc": "Slab poured flat with minimal crown/camber (FF/FL targets if specified)" },
        { "type": "item", "desc": "No curing compounds or surface sealers used unless approved for polishing" },
        { "type": "header", "text": "B. Pre-Grind Preparation" },
        { "type": "item", "desc": "Protection from early trades removed; surface cleaned of glue, coatings, or debris" },
        { "type": "item", "desc": "Cracks and divots patched with compatible filler prior to grinding" },
        { "type": "item", "desc": "Areas with embedded items or poor coverage identified and masked (if needed)" },
        { "type": "header", "text": "C. Grinding & Densifying" },
        { "type": "item", "desc": "Initial metal bond grinding completed per manufacturer’s step sequence" },
        { "type": "item", "desc": "Joints and cracks filled and flush post-initial grind" },
        { "type": "item", "desc": "Densifier applied and allowed to penetrate per manufacturer’s dwell time" },
        { "type": "item", "desc": "Intermediate and fine diamond polishing passes completed in sequence" },
        { "type": "header", "text": "D. Finish & Protection" },
        { "type": "item", "desc": "Polished to specified gloss level (typically 400 / 800 / 1500 / 3000 grit)" },
        { "type": "item", "desc": "Guard/sealer (if used) applied evenly with no streaks" },
        { "type": "item", "desc": "Edges and corners polished to match field finish" },
        { "type": "item", "desc": "Traffic protection measures applied after polishing (mats, warnings)" },
        { "type": "header", "text": "E. Final Review" },
        { "type": "item", "desc": "Reflectivity and clarity visually confirmed" },
        { "type": "item", "desc": "No swirl marks, haze, or inconsistent polish across zones" },
        { "type": "item", "desc": "Gloss meter readings (if required) documented" },
        { "type": "item", "desc": "Consultant and owner signoff received" },
    ],
      "Division 09::Epoxy & Resinous Flooring Systems": [
        { "type": "header", "text": "A. Material Verification" },
        { "type": "item", "desc": "Epoxy/resinous floor system type (self-leveling, flake, quartz, urethane) matches approved submittals" },
        { "type": "item", "desc": "Coating thickness and system components (primer, base coat, broadcast media, topcoat) confirmed" },
        { "type": "item", "desc": "Material stored per manufacturer guidelines (temperature, humidity, shelf life)" },
        { "type": "item", "desc": "SDS, VOC data, and finish samples submitted and approved" },
        { "type": "header", "text": "B. Substrate Evaluation & Prep" },
        { "type": "item", "desc": "Substrate dry, clean, free from curing compound, sealers, or laitance" },
        { "type": "item", "desc": "Moisture test (ASTM F2170 or F1869) conducted and passed" },
        { "type": "item", "desc": "Surface prep performed (shot blast, grind, scarify) to meet CSP level per spec (e.g., CSP 3–5)" },
        { "type": "item", "desc": "Repairs to cracks, divots, joints, and edges completed" },
        { "type": "header", "text": "C. Installation Process" },
        { "type": "item", "desc": "Primer coat applied and allowed proper cure" },
        { "type": "item", "desc": "Base coat applied evenly at specified thickness (in mils or mm)" },
        { "type": "item", "desc": "Aggregate/flakes/quartz broadcast uniformly if system requires" },
        { "type": "item", "desc": "Topcoat applied at specified DFT (dry film thickness) and spread rate" },
        { "type": "item", "desc": "Cove base or vertical upturns installed (if applicable)" },
        { "type": "header", "text": "D. Final Inspection" },
        { "type": "item", "desc": "Surface texture, color, sheen, and gloss consistent throughout" },
        { "type": "item", "desc": "No pinholes, bubbles, fisheyes, or delamination" },
        { "type": "item", "desc": "Slip resistance tested and meets project criteria (ASTM D2047 / ANSI A137.1)" },
        { "type": "item", "desc": "Coating cure complete before traffic allowed" },
        { "type": "item", "desc": "Closeout documents submitted (maintenance manual, warranty, installer certification)" },
    ],
      "Division 10::Toilet Compartments and Accessories": [
        { "type": "header", "text": "A. Material Verification" },
        { "type": "item", "desc": "Partition type (metal, plastic, phenolic, HDPE) and layout match submittals and architectural drawings" },
        { "type": "item", "desc": "Accessories (grab bars, dispensers, mirrors, hooks, bins) match finish schedule and spec" },
        { "type": "item", "desc": "Finish, color, mounting height, and orientation (left/right hand) confirmed" },
        { "type": "item", "desc": "Anchors and backing appropriate for substrate (drywall, CMU, tile, etc.)" },
        { "type": "header", "text": "B. Partition Installation" },
        { "type": "item", "desc": "Pilasters plumb, panels square, doors operate smoothly" },
        { "type": "item", "desc": "Gaps consistent and privacy maintained at front and between panels" },
        { "type": "item", "desc": "Mounting system (overhead braced / floor mounted / ceiling hung) matches spec" },
        { "type": "item", "desc": "Hardware tight, tamper-resistant, and complete" },
        { "type": "header", "text": "C. Accessory Installation" },
        { "type": "item", "desc": "Accessories mounted at correct heights and positions per accessibility code (ADA/CSA B651)" },
        { "type": "item", "desc": "Grab bars installed at correct length, height, and anchoring points" },
        { "type": "item", "desc": "Soap, paper towel, and toilet paper dispensers installed as per reflected room layouts" },
        { "type": "item", "desc": "Mirrors installed at correct height, securely anchored" },
        { "type": "item", "desc": "Baby change stations and waste receptacles installed per manufacturer instructions" },
        { "type": "header", "text": "D. Final Walkthrough" },
        { "type": "item", "desc": "All units clean, operational, and securely fastened" },
        { "type": "item", "desc": "No sharp edges, misalignments, missing parts" },
        { "type": "item", "desc": "Consultant and accessibility compliance inspection passed" },
    ],
      "Division 10::Fire Extinguishers and Cabinets": [
        { "type": "header", "text": "A. Material & Submittal Review" },
        { "type": "item", "desc": "Cabinet type (semi-recessed, surface-mounted, recessed) and gauge match submittals and architectural intent" },
        { "type": "item", "desc": "Cabinet finish (metal, stainless steel, painted, aluminum) matches schedule and corridor aesthetics" },
        { "type": "item", "desc": "Fire extinguisher type (typically 10 lb ABC) and UL/ULC rating match fire protection drawings" },
        { "type": "item", "desc": "Location, mounting type, signage, and visibility comply with fire code & consultant drawings" },
        { "type": "header", "text": "B. Wall Conditions & Rough-In" },
        { "type": "item", "desc": "Blocking or wall reinforcement installed for recessed/semi-recessed cabinets" },
        { "type": "item", "desc": "Framing aligned and dimensioned to allow flush cabinet mounting" },
        { "type": "item", "desc": "Fire rating of surrounding wall system maintained (cabinet rated or back box added if required)" },
        { "type": "header", "text": "C. Installation – Cabinet & Extinguisher" },
        { "type": "item", "desc": "Cabinet securely fastened, plumb, and level" },
        { "type": "item", "desc": "Cabinet door swings open fully, operates without interference" },
        { "type": "item", "desc": "Fire extinguisher securely mounted within cabinet using bracket or strap" },
        { "type": "item", "desc": "Signage above cabinet mounted at visible height (typically 2100 mm AFF or as per AHJ)" },
        { "type": "header", "text": "D. Tagging, Commissioning & Final Review" },
        { "type": "item", "desc": "Fire extinguisher tagged and certified by licensed fire protection contractor" },
        { "type": "item", "desc": "Expiry date verified and unit free from dents, damage, or paint overspray" },
        { "type": "item", "desc": "Cabinet glass/panel not cracked or scratched; no stickers blocking visibility" },
        { "type": "item", "desc": "Reviewed by life safety consultant, building official, or fire department" },
    ],
      "Division 10::Lockers": [
        { "type": "header", "text": "A. Material & Submittals" },
        { "type": "item", "desc": "Locker type (metal, phenolic, HDPE, laminate) and configuration matches architectural specs & shop drawings" },
        { "type": "item", "desc": "Color, finish, and accessories (benches, bases, end panels, numbers) match submittals" },
        { "type": "item", "desc": "Locking system (padlock, built-in combo, key) matches project requirement and is operational" },
        { "type": "header", "text": "B. Rough-In & Substrate Check" },
        { "type": "item", "desc": "Wall and floor surface flat, level, and ready for locker mounting" },
        { "type": "item", "desc": "Blocking/backing installed if required for wall-mounted or cantilever units" },
        { "type": "item", "desc": "Power/data provisions confirmed (if electronic lock system is used)" },
        { "type": "header", "text": "C. Locker Installation" },
        { "type": "item", "desc": "Lockers installed level, aligned, and anchored securely to floor/wall" },
        { "type": "item", "desc": "Doors open/close freely with no obstruction, rubbing, or misalignment" },
        { "type": "item", "desc": "Gaps between rows, banks, or partitions consistent and compliant with manufacturer tolerances" },
        { "type": "item", "desc": "Built-in locks functional and keyed alike (if specified); number plates installed in sequence" },
        { "type": "header", "text": "D. Final Review" },
        { "type": "item", "desc": "Units free from dents, paint chips, scratches, or damaged edges" },
        { "type": "item", "desc": "Lockers cleaned inside and out, dust/debris removed" },
        { "type": "item", "desc": "Consultant walkthrough completed and signoff obtained" },
    ],
      "Division 10::Interior Signage": [
        { "type": "header", "text": "A. Material & Submittals" },
        { "type": "item", "desc": "Sign type (room ID, tactile Braille, directional, illuminated) matches approved submittals and signage plan" },
        { "type": "item", "desc": "Font type, size, contrast, background, and symbol content matches drawings and accessibility standards" },
        { "type": "item", "desc": "Finish and mounting system (adhesive, mechanical, wall rail) confirmed per spec" },
        { "type": "item", "desc": "Emergency egress, exit route, fire hose/reel signage installed as part of package" },
        { "type": "header", "text": "B. Mounting Conditions" },
        { "type": "item", "desc": "Substrates clean, dry, and free of texture that may interfere with adhesion" },
        { "type": "item", "desc": "Mechanical mounting (if applicable) has secure backing or wall anchors" },
        { "type": "header", "text": "C. Installation & Positioning" },
        { "type": "item", "desc": "Room signage mounted on latch side of door per ADA/CSA B651 requirements" },
        { "type": "item", "desc": "Sign height consistent — 60” to center of sign from finished floor" },
        { "type": "item", "desc": "Directional signs aligned with corridor routes or elevators" },
        { "type": "item", "desc": "Fire safety and evacuation maps installed in required common areas" },
        { "type": "header", "text": "D. Final Review" },
        { "type": "item", "desc": "All signage clean, level, and damage-free" },
        { "type": "item", "desc": "Braille correctly formatted and readable" },
        { "type": "item", "desc": "Final review by architect/consultant for completeness and compliance" },
    ],
      "Division 11::Residential and Commercial Appliances": [
        { "type": "header", "text": "A. Material & Submittals" },
        { "type": "item", "desc": "Appliance type, model, and finish (stainless, white, black) match approved schedule" },
        { "type": "item", "desc": "Appliance dimensions and electrical/mechanical specs match rough-in layout" },
        { "type": "item", "desc": "Delivery confirmed with no visible damage or missing parts" },
        { "type": "item", "desc": "Manuals, warranty info, and installation hardware provided" },
        { "type": "header", "text": "B. Rough-In Coordination" },
        { "type": "item", "desc": "Electrical outlet location, voltage, amperage, and receptacle type match appliance requirement" },
        { "type": "item", "desc": "Water supply and drain stub-outs installed (for dishwashers, ice makers, laundry)" },
        { "type": "item", "desc": "Gas connection & shutoff accessible and code-compliant (if applicable)" },
        { "type": "item", "desc": "Venting provided for exhaust-type units (e.g., dryer, range hood, microwave combo)" },
        { "type": "header", "text": "C. Appliance Installation" },
        { "type": "item", "desc": "Appliance leveled, secured, and connected to power/water/gas as applicable" },
        { "type": "item", "desc": "Built-in units flush with adjacent cabinetry or counters" },
        { "type": "item", "desc": "Seals and gaskets clean and properly aligned" },
        { "type": "item", "desc": "Trim kits and accessory panels installed per manufacturer instruction" },
        { "type": "header", "text": "D. Testing & Commissioning" },
        { "type": "item", "desc": "Appliance started/tested and performs basic function without error" },
        { "type": "item", "desc": "No noise, vibration, leaks, or error codes during test cycle" },
        { "type": "item", "desc": "Breakers labeled and appliance circuits confirmed" },
        { "type": "item", "desc": "Owner/user orientation provided or confirmed" },
    ],
      "Division 12::Window Treatments": [
        { "type": "header", "text": "A. Material & Submittals Review" },
        { "type": "item", "desc": "Shade/blind type, color, and openness factor matches submittals and finish schedule" },
        { "type": "item", "desc": "Control type (manual chain, clutch, motorized) matches drawings and client requirement" },
        { "type": "item", "desc": "Drapery track material, color, and pleat type confirmed (for curtains)" },
        { "type": "item", "desc": "Safety compliance documents (e.g., chain tensioners, child-safety devices) included" },
        { "type": "header", "text": "B. Rough Opening Coordination" },
        { "type": "item", "desc": "Mounting type (inside jamb, surface, ceiling recessed) coordinated with ceiling/wall finish" },
        { "type": "item", "desc": "Power rough-in location coordinated and voltage confirmed for motorized units" },
        { "type": "item", "desc": "Any light gap mitigation requirements confirmed with architect/interior designer" },
        { "type": "header", "text": "C. Installation Checks" },
        { "type": "item", "desc": "Mounting brackets securely fastened to blocking or substrate" },
        { "type": "item", "desc": "Shades/blinds level, aligned, and operate smoothly" },
        { "type": "item", "desc": "Chain tensioners or wand controls installed as per manufacturer specs" },
        { "type": "item", "desc": "Drapery moves smoothly on track, overlaps correctly, and returns properly" },
        { "type": "header", "text": "D. Motorized Systems (if applicable)" },
        { "type": "item", "desc": "Motor powered and controlled by wall switch, remote, or integrated control system" },
        { "type": "item", "desc": "Programming complete for grouped, preset, or scene control" },
        { "type": "item", "desc": "Wireless/Bluetooth/Zigbee compatibility confirmed (if required)" },
        { "type": "header", "text": "E. Final Review" },
        { "type": "item", "desc": "Shades/drapery free from creases, damage, misalignment" },
        { "type": "item", "desc": "Closeout package submitted: warranties, operation manual, maintenance care" },
        { "type": "item", "desc": "Client/consultant signoff completed" },
    ],
      "Division 13::Pre-Engineered Metal Building (PEMB)": [
        { "type": "header", "text": "A. Submittals & Pre-Delivery Review" },
        { "type": "item", "desc": "Shop drawings and structural design reviewed and approved" },
        { "type": "item", "desc": "Anchor bolt plans issued and coordinated with foundation design" },
        { "type": "item", "desc": "Certified engineered drawings (stamped) submitted and match building permit set" },
        { "type": "item", "desc": "Delivery checklist confirmed: main frames, girts, purlins, panels, accessories, fasteners" },
        { "type": "header", "text": "B. Foundation and Anchor Bolt Prep" },
        { "type": "item", "desc": "Anchor bolts installed per layout, elevations, and embedment requirements" },
        { "type": "item", "desc": "Bolt threads clean, protected, and plumb prior to structural steel arrival" },
        { "type": "item", "desc": "Concrete flatness, level, and hold-down locations verified" },
        { "type": "header", "text": "C. Frame Erection" },
        { "type": "item", "desc": "Structural steel members inspected for damage, twist, corrosion" },
        { "type": "item", "desc": "Frames erected plumb and braced per sequence in erection manual" },
        { "type": "item", "desc": "Bolts torqued and documented per manufacturer's tensioning specs" },
        { "type": "item", "desc": "Temporary bracing in place during all phases of erection until diaphragm secured" },
        { "type": "header", "text": "D. Roof and Wall Panel Installation" },
        { "type": "item", "desc": "Insulation, vapor barrier, and liner panels (if used) installed as per system" },
        { "type": "item", "desc": "Panels installed straight, with correct lap orientation and spacing" },
        { "type": "item", "desc": "Fasteners spaced per drawing and properly seated (not overdriven/underdriven)" },
        { "type": "item", "desc": "Flashing, trim, sealant, and closures installed without gaps or buckling" },
        { "type": "header", "text": "E. Final Inspection & Closeout" },
        { "type": "item", "desc": "Downspouts, gutters, ridge vents, and louvers installed complete" },
        { "type": "item", "desc": "Punch list items (panel scratches, open seams, missing hardware) corrected" },
        { "type": "item", "desc": "Warranty documents, erection certificate, and O&M manuals submitted" },
        { "type": "item", "desc": "Structural engineer and manufacturer signoff received (if required)" },
    ],
      "Division 14::Elevators": [
        { "type": "header", "text": "A. Submittal Review & Coordination" },
        { "type": "item", "desc": "Elevator type (hydraulic, traction, MRL), capacity, speed, stops match drawings and spec" },
        { "type": "item", "desc": "Shop drawings and layout approved by consultant and coordinated with structural and MEP trades" },
        { "type": "item", "desc": "Cab finish schedule (walls, flooring, handrails, ceiling) matches architectural design intent" },
        { "type": "item", "desc": "Power requirement, shaft ventilation, and lighting coordinated" },
        { "type": "header", "text": "B. Shaft & Pit Preparation" },
        { "type": "item", "desc": "Shaft dimensions verified against elevator supplier layout" },
        { "type": "item", "desc": "Pit depth, sump pump, and waterproofing installed per manufacturer and local code" },
        { "type": "item", "desc": "Hoist beam, brackets, and embedded steel placed per elevator supplier drawings" },
        { "type": "item", "desc": "Machine room or overhead clearance provided per shop drawings" },
        { "type": "header", "text": "C. Installation Monitoring" },
        { "type": "item", "desc": "Rails, buffers, hoist cables (if applicable) installed and aligned" },
        { "type": "item", "desc": "Car frame, counterweight, and guide shoes assembled per spec" },
        { "type": "item", "desc": "Cab enclosure installed, finish materials protected until turnover" },
        { "type": "item", "desc": "Doors, operators, and door tracks aligned and function-tested" },
        { "type": "item", "desc": "Fire recall, intercom, emergency lighting, and battery backup installed" },
        { "type": "header", "text": "D. Final Inspection & Certification" },
        { "type": "item", "desc": "Safety tests completed: load test, overspeed, emergency brake" },
        { "type": "item", "desc": "Inspection passed by provincial/state elevator authority (e.g., TSSA, ASME inspector)" },
        { "type": "item", "desc": "Final cleaning, decals, Braille signage, and safety notices installed" },
        { "type": "item", "desc": "Warranty, logbooks, and operation manual submitted" },
        { "type": "item", "desc": "Handover & owner/operator training confirmed" },
    ],
      "Division 21::Fire Sprinkler Systems": [
        { "type": "header", "text": "A. Submittal & Regulatory Compliance" },
        { "type": "item", "desc": "Sprinkler system type (wet, dry, pre-action) matches design scope and NFPA classification" },
        { "type": "item", "desc": "Submittals reviewed and stamped by certified engineer (referencing NFPA 13, 25, local AHJ)" },
        { "type": "item", "desc": "Hazard classification confirmed per occupancy (Light, OH-1, OH-2, Special Hazard, Lab) as per HMS & NFPA 13" },
        { "type": "item", "desc": "Hydraulic calculations include 10 PSI safety margin, flow data current and traceable" },
        { "type": "item", "desc": "Drawings include clear hydraulic reference points, compliant to AHJ and site-specific layout" },
        { "type": "header", "text": "B. Material Delivery & Verification" },
        { "type": "item", "desc": "UL/FM listed sprinkler heads, risers, valves, pressure gauges, tamper switches, and alarms confirmed" },
        { "type": "item", "desc": "System piping verified per spec: Sched 40 black steel, grooved/cut per manufacturer, no torch-cutting" },
        { "type": "item", "desc": "Isolation valves (OS&Y) accessible and clearly tagged with supervision where required" },
        { "type": "header", "text": "C. Installation Checkpoints" },
        { "type": "item", "desc": "Sprinkler head spacing, elevation, and clearances verified per NFPA 13 and ceiling condition" },
        { "type": "item", "desc": "Pipe hangers and seismic bracing installed per NFPA 13, ANSI/AWWA and manufacturer's instructions" },
        { "type": "item", "desc": "Pressure-reducing valves and relief piping installed and adjusted per location requirements" },
        { "type": "item", "desc": "Air vents and flushing valves installed at system high/low points (for wet/dry systems)" },
        { "type": "header", "text": "D. Commissioning & Testing" },
        { "type": "item", "desc": "Hydrostatic test: 200 psi for 2 hours successfully passed and documented" },
        { "type": "item", "desc": "Flow switches, tamper switches, pressure alarms triggered correctly" },
        { "type": "item", "desc": "Main drain test completed; pressure drop within acceptable differential" },
        { "type": "item", "desc": "Trip test completed (for dry or pre-action) with full reset and drain documented" },
        { "type": "item", "desc": "Preaction panels tested for initiating circuits and functionality" },
        { "type": "header", "text": "E. Closeout & Maintenance Setup" },
        { "type": "item", "desc": "System tagged with updated hydraulic demand placards, head lists, and zone maps" },
        { "type": "item", "desc": "Life Safety Records binder provided with inspection logs (initial/annual/monthly per NFC-AE 2019)" },
        { "type": "item", "desc": "Inspection, Testing, and Maintenance forms completed (per CAN/ULC-S536, NFPA 25, Section 21 01 90B)" },
        { "type": "item", "desc": "AHJ and insurance inspections passed, certificates submitted" },
    ],
      "Division 22::Plumbing Rough-In & Final": [
        { "type": "header", "text": "A. Submittals & Pre-Installation Review" },
        { "type": "item", "desc": "Approved submittals for piping, fittings, valves, insulation, and fixtures received and stamped" },
        { "type": "item", "desc": "Plumbing drawings coordinated with structural and architectural (penetrations, slopes, fixture locations)" },
        { "type": "item", "desc": "Code compliance verified: NPC, local AHJ amendments, backflow prevention, insulation R-values" },
        { "type": "header", "text": "B. Rough-In Verification – Water & Drainage" },
        { "type": "item", "desc": "Pipe routing and slope per NPC and design (2% minimum slope for drainage, per code)" },
        { "type": "item", "desc": "Cold and hot water pipes tested to minimum 100 psi for 2 hours, no leakage" },
        { "type": "item", "desc": "DWV tested with air (5 psi for 15 min) or water (10’ head for 15 min)" },
        { "type": "item", "desc": "Vents installed at all required locations with proper offsets and above flood rim" },
        { "type": "item", "desc": "Backflow preventers and isolation valves installed at designated risers or mechanical rooms" },
        { "type": "item", "desc": "Firestopping of penetrations installed and labeled" },
        { "type": "header", "text": "C. Fixture & Equipment Connection" },
        { "type": "item", "desc": "Fixtures installed level, anchored, and piped with approved materials and escutcheons" },
        { "type": "item", "desc": "Mixing valves, temperature limiters, and shutoffs installed per drawing" },
        { "type": "item", "desc": "Drainage connections properly vented and air gaps provided for indirect connections (e.g., dishwasher, ice maker)" },
        { "type": "item", "desc": "Hot water recirculation installed (if applicable) and flow verified" },
        { "type": "header", "text": "D. Final Inspection & Commissioning" },
        { "type": "item", "desc": "All valves, drains, and hose bibbs labeled and tagged" },
        { "type": "item", "desc": "All systems flushed, chlorinated (potable), and certified" },
        { "type": "item", "desc": "Fixture operation tested (fill/drain, flush, leak check) and clean" },
        { "type": "item", "desc": "As-built drawings submitted, O&M manuals turned over" },
        { "type": "item", "desc": "Final inspection passed by AHJ and certificate issued" },
    ],
      "Division 22::Grease Interceptors and Oil Separators": [
        { "type": "header", "text": "A. Submittals & Pre-Installation" },
        { "type": "item", "desc": "Interceptor/separator type, size, and capacity match mechanical schedules and local bylaw requirements" },
        { "type": "item", "desc": "Manufacturer’s submittals stamped and reviewed; flow rate and retention volume confirmed" },
        { "type": "item", "desc": "AHJ (e.g., city plumbing inspector) notified if pre-installation approval required" },
        { "type": "header", "text": "B. Installation Checks" },
        { "type": "item", "desc": "Concrete pad/support base level and sized to hold interceptor weight (if not slab-on-grade)" },
        { "type": "item", "desc": "Pipe inlet/outlet slopes meet design (1–2%) and piping connected with flexible couplings or expansion joints" },
        { "type": "item", "desc": "Cleanout installed on both sides of the tank for maintenance" },
        { "type": "item", "desc": "Venting system connected to interceptor per manufacturer and local plumbing code" },
        { "type": "item", "desc": "External sensors (if specified) for high-level or oil detection connected and tested" },
        { "type": "item", "desc": "Signage or labelling provided above access covers or service ports" },
        { "type": "header", "text": "C. Testing & Commissioning" },
        { "type": "item", "desc": "System filled with water and observed for leaks or settlement before backfilling or concealment" },
        { "type": "item", "desc": "Functional test completed: verify no bypass of interceptor; float/oil skimmer devices tested" },
        { "type": "item", "desc": "Maintenance access clearance verified per local municipal code or design drawings" },
        { "type": "item", "desc": "Initial cleaning scheduled prior to occupancy or system turnover" },
        { "type": "header", "text": "D. Closeout" },
        { "type": "item", "desc": "Operation manual, maintenance logbook, and manufacturer warranty submitted" },
        { "type": "item", "desc": "Owner trained on cleaning schedule, maintenance frequency, and disposal records" },
        { "type": "item", "desc": "Commissioning and inspection forms signed off by AHJ" },
    ],
      "Division 22::Sump Pumps and Storm Water Pump-Out Systems": [
        { "type": "header", "text": "A. Submittals & Setup" },
        { "type": "item", "desc": "Pump type (storm, sanitary, effluent), GPM/head rating, and NEMA enclosure rating match mechanical schedule" },
        { "type": "item", "desc": "Submittals stamped and reviewed, including pump curves, float logic, and control panels" },
        { "type": "item", "desc": "Pit sizing and sump depth coordinated with civil and architectural elevations" },
        { "type": "header", "text": "B. Pit Construction & Equipment Installation" },
        { "type": "item", "desc": "Sump pit installed plumb and level, sealed, and protected against groundwater infiltration" },
        { "type": "item", "desc": "Concrete base installed under basin and slope provided to suction inlet" },
        { "type": "item", "desc": "Pump(s) secured and isolated from vibration; rails and removal guides in place for duplex systems" },
        { "type": "item", "desc": "Discharge piping installed with unions, check valves, and isolation valves" },
        { "type": "item", "desc": "Float switches, ultrasonic sensors, or pressure transducers mounted per manufacturer instructions" },
        { "type": "item", "desc": "Backflow prevention (if discharging to storm main) confirmed" },
        { "type": "header", "text": "C. Electrical & Controls" },
        { "type": "item", "desc": "Control panel installed and labeled; breaker rating and disconnect verified" },
        { "type": "item", "desc": "Float levels set to activate lead/lag pumps and alarm under high-level condition" },
        { "type": "item", "desc": "High water alarm with light and buzzer tested" },
        { "type": "item", "desc": "SCADA/BMS integration confirmed if required" },
        { "type": "header", "text": "D. Testing & Commissioning" },
        { "type": "item", "desc": "Wet test performed: simulate high water levels and verify pump sequence" },
        { "type": "item", "desc": "Flow rate and discharge confirmed (if testable)" },
        { "type": "item", "desc": "Pump startup log recorded, and manufacturer startup forms completed" },
        { "type": "item", "desc": "Final inspection passed by AHJ or mechanical engineer" },
    ],
      "Division 22::Storm Drainage Systems": [
        { "type": "header", "text": "A. Submittals & Design Review" },
        { "type": "item", "desc": "Approved shop drawings for roof/podium drains, trench drains, and storm piping reviewed and stamped" },
        { "type": "item", "desc": "Drain flow capacity, grate type, and finish matched to location and design intent (traffic-rated, heel-proof)" },
        { "type": "item", "desc": "Coordination confirmed with waterproofing membrane, slab slopes, and landscaping layers" },
        { "type": "header", "text": "B. Installation – Above Slab" },
        { "type": "item", "desc": "Roof and podium drains installed at low points with proper slope and flashing collars" },
        { "type": "item", "desc": "Membrane clamps secured and strainers installed" },
        { "type": "item", "desc": "Primary and secondary (overflow) drainage installed if required per code" },
        { "type": "header", "text": "C. Installation – Below Slab & Subsurface" },
        { "type": "item", "desc": "Pipe slopes (minimum 1%) confirmed and consistent with trenching and drawings" },
        { "type": "item", "desc": "Bedding and pipe embedment per CSA B182.1 or local civil spec" },
        { "type": "item", "desc": "Cleanouts, inspection ports, and sump pits located and accessible" },
        { "type": "item", "desc": "Storm leaders and site piping connected with proper couplers and grouting" },
        { "type": "item", "desc": "Trench drain outlets connected with cleanout access" },
        { "type": "header", "text": "D. Testing & Commissioning" },
        { "type": "item", "desc": "Storm system flushed to storm connection or catch basin" },
        { "type": "item", "desc": "CCTV inspection completed (if specified by AHJ or engineer)" },
        { "type": "item", "desc": "No visible leaks, ponding, or debris at test inspection" },
        { "type": "item", "desc": "As-built survey submitted and reviewed" },
    ],
      "Division 23::Air Handling Units (AHUs)": [
        { "type": "header", "text": "A. Submittals & Design Review" },
        { "type": "item", "desc": "AHU type (RTU, ERV/HRV, indoor, custom) matches equipment schedule and control sequences" },
        { "type": "item", "desc": "Shop drawings approved and include unit layout, airflow rating, fan type, coil details, electrical info" },
        { "type": "item", "desc": "Structural coordination complete: roof openings, curbs, housekeeping pads, and access clearances" },
        { "type": "header", "text": "B. Delivery & Pre-Installation" },
        { "type": "item", "desc": "Unit delivered per submittal: correct model, voltage, handing, factory options" },
        { "type": "item", "desc": "Filters, belts, motors, and coils protected and undamaged" },
        { "type": "item", "desc": "Roof curbs level, insulated, weatherproofed, and sized to match unit" },
        { "type": "header", "text": "C. Installation" },
        { "type": "item", "desc": "Unit installed plumb and level; vibration isolators properly seated" },
        { "type": "item", "desc": "Duct connections sealed, insulated, and leak-tested" },
        { "type": "item", "desc": "Condensate piping trapped, sloped, insulated, and drained to approved point" },
        { "type": "item", "desc": "Access panels and filters accessible for maintenance" },
        { "type": "item", "desc": "DDC/BAS wiring landed; sensors and safeties (e.g., freeze stat, smoke detector) installed per drawings" },
        { "type": "header", "text": "D. Testing & Commissioning" },
        { "type": "item", "desc": "Fan rotation, airflow, and vibration verified" },
        { "type": "item", "desc": "Heating/cooling coils piped per spec with proper valves, strainers, unions" },
        { "type": "item", "desc": "Motor amperage and voltage balanced across phases" },
        { "type": "item", "desc": "Controls tested: start/stop, alarms, airflow switches, economizer function" },
        { "type": "item", "desc": "TAB (Testing, Adjusting, Balancing) complete, airflow measured within tolerance" },
        { "type": "header", "text": "E. Closeout" },
        { "type": "item", "desc": "O&M manuals, warranty, start-up form submitted" },
        { "type": "item", "desc": "AHJ/mechanical consultant signoff and functional acceptance" },
    ],
      "Division 23::Exhaust and Ventilation Systems": [
        { "type": "header", "text": "A. Submittals & Design Coordination" },
        { "type": "item", "desc": "Exhaust fan type, airflow, static pressure, voltage, and controls match schedule" },
        { "type": "item", "desc": "Duct material, gauge, insulation, and layout match submittals and SMACNA/NFPA standards" },
        { "type": "item", "desc": "Locations coordinated with architectural and structural elements, especially for garage or kitchen exhaust" },
        { "type": "header", "text": "B. Installation – Fans & Ducts" },
        { "type": "item", "desc": "Fan installed plumb and level, vibration-isolated, with backdraft damper if required" },
        { "type": "item", "desc": "Toilet and general exhaust duct slope to fan/roof per spec; sealed, firestopped" },
        { "type": "item", "desc": "Kitchen exhaust duct welded, sloped, continuous, grease-rated per NFPA 96" },
        { "type": "item", "desc": "Garage exhaust ductwork low-leakage and fire-smoke dampers accessible and tagged" },
        { "type": "item", "desc": "Roof/wall penetration flashed and sealed properly" },
        { "type": "header", "text": "C. Controls & Interlocks" },
        { "type": "item", "desc": "Fans interlocked with lights (toilet), hoods and make-up air (kitchen), or CO sensors (garage)" },
        { "type": "item", "desc": "CO/NO2 sensors installed per design, calibrated and interlocked to VFD/fans" },
        { "type": "item", "desc": "BAS/DDC points connected: fan status, alarms, airflow, override" },
        { "type": "header", "text": "D. Testing & Commissioning" },
        { "type": "item", "desc": "Airflow verified via TAB: each grille, hood, exhaust stack" },
        { "type": "item", "desc": "Kitchen hood pressure test (grease duct) and airflow balance completed" },
        { "type": "item", "desc": "Sound and vibration within acceptable limits" },
        { "type": "item", "desc": "AHJ inspection and fire authority clearance passed for grease hood (if applicable)" },
    ],
      "Division 23::Fan Coil Units (FCUs)": [
        { "type": "header", "text": "A. Submittals & Design Review" },
        { "type": "item", "desc": "Fan coil type (horizontal, vertical, recessed, exposed) and configuration matches mechanical schedule" },
        { "type": "item", "desc": "Coil type (2-pipe/4-pipe, chilled water, hot water, electric) verified with model and performance data" },
        { "type": "item", "desc": "Shop drawings approved: unit dimensions, connection locations, controls, access clearances" },
        { "type": "header", "text": "B. Delivery & Installation" },
        { "type": "item", "desc": "Units delivered intact, factory-sealed, with O&M manuals and data plates" },
        { "type": "item", "desc": "Unit installed plumb, level, and securely supported with isolation mounts or hangers" },
        { "type": "item", "desc": "Coil piping connected with unions, isolation valves, balancing valves, and strainers" },
        { "type": "item", "desc": "Drain pans trapped, sloped, insulated, and connected to sanitary drain" },
        { "type": "item", "desc": "Access panels and filters fully accessible per O&M" },
        { "type": "header", "text": "C. Electrical & Controls" },
        { "type": "item", "desc": "Fan motors wired and confirmed with correct voltage, phasing, overload protection" },
        { "type": "item", "desc": "Thermostat or BAS control wiring connected and labeled" },
        { "type": "item", "desc": "Condensate pump (if applicable) tested and routed properly" },
        { "type": "header", "text": "D. Commissioning & Final Checks" },
        { "type": "item", "desc": "Unit started and airflow verified in all speeds" },
        { "type": "item", "desc": "Coil flows balanced (flow rate GPM verified), delta-T across coil acceptable" },
        { "type": "item", "desc": "Fan noise and vibration checked" },
        { "type": "item", "desc": "Final cleaning and filter installation completed" },
        { "type": "item", "desc": "Warranty forms and closeout documentation submitted" },
    ],
      "Division 23::Air-Cooled and Water-Cooled Chillers": [
        { "type": "header", "text": "A. Submittals & Design Review" },
        { "type": "item", "desc": "Chiller type, model, and capacity match mechanical schedule and load calculations" },
        { "type": "item", "desc": "Shop drawings approved: electrical, piping, dimensions, access, and structural supports" },
        { "type": "item", "desc": "Seismic supports and spring isolators coordinated and detailed (if applicable)" },
        { "type": "header", "text": "B. Delivery & Installation" },
        { "type": "item", "desc": "Equipment delivered with data plate, start-up manuals, pressure tests, and safety labeling" },
        { "type": "item", "desc": "Chiller positioned correctly, level, and anchored per manufacturer recommendations" },
        { "type": "item", "desc": "Chilled water supply/return piping connected with strainers, pressure/temp ports, isolation valves" },
        { "type": "item", "desc": "Condenser water loop (for water-cooled) connected with proper treatment ports and flow balancing devices" },
        { "type": "item", "desc": "Electrical connections: starters, disconnects, overloads, and fusing confirmed with single-line diagram" },
        { "type": "header", "text": "C. Controls & Sensors" },
        { "type": "item", "desc": "Temperature sensors, flow switches, and safeties installed and wired to BAS/DDC" },
        { "type": "item", "desc": "VFD (if applicable) installed and programmed per sequence" },
        { "type": "item", "desc": "Remote monitoring and alarms tested" },
        { "type": "header", "text": "D. Commissioning & Start-Up" },
        { "type": "item", "desc": "Chilled water system flushed, leak-tested, and cleaned before startup" },
        { "type": "item", "desc": "Pre-start checklist completed by manufacturer-certified technician" },
        { "type": "item", "desc": "Refrigerant levels, oil levels, suction/discharge pressures within spec" },
        { "type": "item", "desc": "Chiller started, stabilized, and load test conducted for full capacity" },
        { "type": "item", "desc": "Commissioning forms, trend logs, and final TAB airflow/waterflow verified" },
        { "type": "header", "text": "E. Closeout" },
        { "type": "item", "desc": "Warranty registration, logbook, and O&M manuals submitted" },
        { "type": "item", "desc": "AHJ or engineering signoff completed" },
    ],
      "Division 23::Boilers and Hot Water Heating Systems": [
        { "type": "header", "text": "A. Submittals & Design Review" },
        { "type": "item", "desc": "Boiler type, input/output capacity, and efficiency rating match mechanical schedule" },
        { "type": "item", "desc": "Shop drawings approved: piping, venting, wiring, flue route, expansion tanks, and pump layout" },
        { "type": "item", "desc": "Boiler code compliance verified: CSA B149, ASME Section IV, local gas codes" },
        { "type": "header", "text": "B. Delivery & Installation" },
        { "type": "item", "desc": "Boiler delivered with CSA/ASME rating plates, installation manual, startup forms" },
        { "type": "item", "desc": "Unit installed level, anchored, and isolated from structure" },
        { "type": "item", "desc": "Primary/secondary piping connected with isolation, check, purge, balancing valves" },
        { "type": "item", "desc": "Expansion tank, pressure relief valve, air separator, and drain valve installed as per design" },
        { "type": "item", "desc": "Condensate drain (if condensing) installed with neutralizer and proper slope" },
        { "type": "header", "text": "C. Electrical & Controls" },
        { "type": "item", "desc": "Boiler panel wired with proper disconnect, fusing, and overload protection" },
        { "type": "item", "desc": "BAS/DDC points connected: status, faults, flow, temperature, runtime" },
        { "type": "item", "desc": "Outdoor reset and internal safeties verified: high limit, LWCO, gas valve lockout" },
        { "type": "header", "text": "D. Venting & Gas" },
        { "type": "item", "desc": "Combustion air and flue piping installed per manufacturer and local code" },
        { "type": "item", "desc": "Leak check on all gas fittings performed with certified meter" },
        { "type": "item", "desc": "CO monitor in place and vent termination meets clearance and distance standards" },
        { "type": "header", "text": "E. Testing & Commissioning" },
        { "type": "item", "desc": "Hydronic system flushed, pressure tested, and air purged" },
        { "type": "item", "desc": "Boiler startup and combustion tuning completed by certified technician" },
        { "type": "item", "desc": "Operating temperatures, pressure, and delta-T across loop verified" },
        { "type": "item", "desc": "Manufacturer startup log and warranty registration completed" },
    ],
      "Division 23::Hydronic Piping Systems": [
        { "type": "header", "text": "A. Submittals & Design Review" },
        { "type": "item", "desc": "Approved piping materials, sizing, insulation, and layout as per spec and drawings" },
        { "type": "item", "desc": "Isometric and spool drawings reviewed and coordinated with other trades" },
        { "type": "item", "desc": "Supports, guides, and anchors designed for thermal expansion and contraction" },
        { "type": "header", "text": "B. Installation – Piping & Valves" },
        { "type": "item", "desc": "Pipes installed level/plumb with correct slope (especially for air removal and drains)" },
        { "type": "item", "desc": "Isolation valves, strainers, unions, balancing valves, pressure/temp ports installed per plans" },
        { "type": "item", "desc": "Expansion loops or joints in place for long runs; no pipe stress or unsupported sections" },
        { "type": "item", "desc": "Flexible connectors installed at pumps and equipment" },
        { "type": "item", "desc": "Pipe identification labels and flow direction arrows in place" },
        { "type": "header", "text": "C. Equipment & Components" },
        { "type": "item", "desc": "Air separator, expansion tank, and automatic air vents installed correctly and operational" },
        { "type": "item", "desc": "Glycol feeder installed, filled, and relief protection in place (if applicable)" },
        { "type": "item", "desc": "Hydronic pumps installed with correct orientation, isolators, and accessible" },
        { "type": "header", "text": "D. Testing & Insulation" },
        { "type": "item", "desc": "Pressure test (typically 1.5x working pressure or per spec) witnessed and passed" },
        { "type": "item", "desc": "Flushing and chemical cleaning completed; water sample submitted for analysis" },
        { "type": "item", "desc": "System filled, de-aired, and flow direction confirmed" },
        { "type": "item", "desc": "Pipe insulation installed: correct thickness, vapor barrier sealed, no exposed gaps" },
        { "type": "header", "text": "E. Closeout" },
        { "type": "item", "desc": "As-built drawings submitted with piping routes, valves, and test data" },
        { "type": "item", "desc": "O&M manuals provided for pumps, feeders, valves, tanks, and flushing log" },
        { "type": "item", "desc": "AHJ and mechanical engineer signoff completed" },
    ],
      "Division 23::Cooling Towers": [
        { "type": "header", "text": "A. Submittals & Design Review" },
        { "type": "item", "desc": "Tower type (induced draft, forced draft, open-loop, closed-loop) matches schedule and capacity" },
        { "type": "item", "desc": "Structural supports, access platforms, vibration isolators detailed and reviewed" },
        { "type": "item", "desc": "Piping layout and basin drain details approved and coordinated" },
        { "type": "header", "text": "B. Delivery & Installation" },
        { "type": "item", "desc": "Equipment delivered with factory inspection certificates, start-up forms, and manuals" },
        { "type": "item", "desc": "Tower base installed level with clearance for service and airflow" },
        { "type": "item", "desc": "Condenser water lines connected with flexible couplings, balancing valve, strainers, chemical injection ports" },
        { "type": "item", "desc": "Vibration isolators and seismic restraints (if required) installed properly" },
        { "type": "item", "desc": "Overflow, drain, and blowdown piping installed with proper backflow prevention" },
        { "type": "header", "text": "C. Electrical & Controls" },
        { "type": "item", "desc": "Fan motors and control panels connected, fused, and protected" },
        { "type": "item", "desc": "Water level controller installed and tested (float, ultrasonic, or conductivity)" },
        { "type": "item", "desc": "BAS/DDC integrated with status, fan speeds, basin heater, alarm, and trend points" },
        { "type": "header", "text": "D. Testing & Commissioning" },
        { "type": "item", "desc": "Flow rates balanced and pressure drop verified across tower" },
        { "type": "item", "desc": "Motor rotation and speed control tested; fan vibration within limits" },
        { "type": "item", "desc": "Basin filled and checked for leaks, overflow, and proper drainage" },
        { "type": "item", "desc": "Water treatment system activated and commissioned" },
        { "type": "item", "desc": "Start-up report and warranty registration submitted by manufacturer rep" },
    ],
      "Division 23::Radiant Heating and Cooling Systems": [
        { "type": "header", "text": "A. Submittals & Coordination" },
        { "type": "item", "desc": "Radiant tubing layout, spacing, loop lengths, and zone controls match approved drawings" },
        { "type": "item", "desc": "Coordination confirmed with concrete team, slab contractor, and electrical/sprinkler trades" },
        { "type": "item", "desc": "Tubing submittals reviewed for material, size, oxygen barrier rating, and bending radius" },
        { "type": "header", "text": "B. Installation – Above Slab" },
        { "type": "item", "desc": "Slab insulation installed continuous under piping (rigid or reflective insulation per spec)" },
        { "type": "item", "desc": "Tubing fastened securely with clips, mesh ties, or rail system – no uplift or float potential" },
        { "type": "item", "desc": "Loop lengths verified per schedule; max circuit lengths not exceeded" },
        { "type": "item", "desc": "Protective sleeves at expansion joints and penetrations" },
        { "type": "item", "desc": "Manifolds mounted securely, with accessible headers and labeled loops" },
        { "type": "header", "text": "C. Pressure Test & Concrete Pour" },
        { "type": "item", "desc": "Tubing filled with water/glycol and pressure-tested (typically 100 psi for 2 hrs) before slab pour" },
        { "type": "item", "desc": "Concrete poured while system under pressure and monitored throughout" },
        { "type": "item", "desc": "No damage or kinks during pour; tubing locations marked on slab post-pour" },
        { "type": "header", "text": "D. Controls, Balancing & Final Check" },
        { "type": "item", "desc": "Mixing valves, thermostatic heads, actuators, and control wiring installed as per zone map" },
        { "type": "item", "desc": "Flow meters balanced at manifold; return temps verified for each loop" },
        { "type": "item", "desc": "Controls tested for heating/cooling switching and temperature modulation" },
        { "type": "header", "text": "E. Closeout" },
        { "type": "item", "desc": "As-built drawings include tubing layout, manifold IDs, test results" },
        { "type": "item", "desc": "O&M manual and balancing report submitted, startup complete" },
    ],
      "Division 25::Building Automation System (BAS) Core Integration": [
        { "type": "header", "text": "A. Submittals & System Architecture" },
        { "type": "item", "desc": "Control schematics, network diagrams, sequence of operations reviewed and approved by engineer" },
        { "type": "item", "desc": "BAS panel locations coordinated with electrical rooms/mechanical areas and labeled per drawings" },
        { "type": "item", "desc": "Network protocol confirmed (BACnet/IP, MSTP, Modbus, LonWorks, KNX, etc.) and devices properly mapped" },
        { "type": "header", "text": "B. Panel Installation & Wiring" },
        { "type": "item", "desc": "BAS panels mounted level, accessible, with nameplates, documentation pockets, and lockable doors" },
        { "type": "item", "desc": "All I/O points wired per schematics, tagged, terminated, and free of interference" },
        { "type": "item", "desc": "Shielded cabling, grounding, conduit penetrations sealed, and low-voltage segregation maintained" },
        { "type": "header", "text": "C. Field Device Installation" },
        { "type": "item", "desc": "Sensors (temperature, humidity, CO2, occupancy) installed per schedule and calibrated" },
        { "type": "item", "desc": "Damper actuators, valve actuators, and flow meters installed, tested for stroke and feedback" },
        { "type": "item", "desc": "Fire alarm and life safety interlocks connected and labeled" },
        { "type": "header", "text": "D. Programming, Graphics, and Control Logic" },
        { "type": "item", "desc": "Control programs uploaded, verified per sequence, and override protection enabled" },
        { "type": "item", "desc": "User interface (graphics) reviewed for navigation, points labeling, and trend logs" },
        { "type": "item", "desc": "Alarms configured for priority, email/text alerts, and event triggers" },
        { "type": "header", "text": "E. Commissioning & Handover" },
        { "type": "item", "desc": "As-built drawings include tubing layout, manifold IDs, test results" },
        { "type": "item", "desc": "O&M manual and balancing report submitted, startup complete" },
    ],
      "Division 25::Lighting Control System Integration": [
        { "type": "header", "text": "A. Submittals & Controls Review" },
        { "type": "item", "desc": "Approved control narrative, zoning diagrams, and fixture schedules reviewed" },
        { "type": "item", "desc": "Sensor types and locations (ceiling, wall, dual-tech) coordinated and shown on drawings" },
        { "type": "item", "desc": "Daylight zones defined and photocells located per design and LEED intent (if applicable)" },
        { "type": "header", "text": "B. Device Installation" },
        { "type": "item", "desc": "Sensors and switches installed at correct height, orientation, and range adjusted" },
        { "type": "item", "desc": "All wall stations, keypads, dimmers, and override switches installed cleanly and labeled" },
        { "type": "item", "desc": "Low-voltage wiring terminated, tagged, and run in dedicated conduits" },
        { "type": "item", "desc": "Panelboard relays and lighting controllers mounted in labeled, accessible locations" },
        { "type": "header", "text": "C. Integration & Programming" },
        { "type": "item", "desc": "Lighting control system networked with BAS (if required) and IP address mapped" },
        { "type": "item", "desc": "Dimming and switching logic programmed as per room functions" },
        { "type": "item", "desc": "Daylight harvesting, occupancy timeout, and override settings uploaded and tested" },
        { "type": "header", "text": "D. Testing & Commissioning" },
        { "type": "item", "desc": "Zone-by-zone test for sensor response, dimming control, and relay behavior" },
        { "type": "item", "desc": "Emergency lighting override tested and functional" },
        { "type": "item", "desc": "Lighting schedules (weekday/weekend/holiday) uploaded and validated" },
        { "type": "item", "desc": "Graphics interface (if applicable) reviewed with client" },
        { "type": "header", "text": "E. Closeout" },
        { "type": "item", "desc": "Final commissioning report, zone maps, and user override instructions submitted" },
        { "type": "item", "desc": "Operator training complete and system login credentials handed off" },
    ],  
      "Division 26::Electrical Distribution Equipment": [
        { "type": "header", "text": "A. Submittals & Design Review" },
        { "type": "item", "desc": "Shop drawings approved for switchgear, breakers, panels, and one-line diagram match design intent" },
        { "type": "item", "desc": "Coordination study, arc flash analysis, and short-circuit ratings reviewed and posted on equipment" },
        { "type": "item", "desc": "Equipment space, clearances, and working distances per CEC/CSA C22.1 or NEC as applicable" },
        { "type": "header", "text": "B. Equipment Installation" },
        { "type": "item", "desc": "Switchboards, CDPs, and panelboards installed plumb and level, with seismic anchorage (if required)" },
        { "type": "item", "desc": "Equipment labels, breaker identifications, and panel schedules legible and complete" },
        { "type": "item", "desc": "Feeder cables installed with correct phasing, bend radius, torqueing of lugs per manufacturer's spec" },
        { "type": "item", "desc": "Grounding electrode conductor (GEC), bonding conductors, and ground bus properly installed and tested" },
        { "type": "item", "desc": "Equipment bonding verified: transformer to switchgear, panel to structure, enclosures" },
        { "type": "header", "text": "C. Protection Devices & Testing" },
        { "type": "item", "desc": "Breakers sized and labeled for circuit loads, AIC rating confirmed" },
        { "type": "item", "desc": "Ground fault and arc fault protection verified where specified" },
        { "type": "item", "desc": "Megger insulation resistance test performed on feeders and results recorded" },
        { "type": "item", "desc": "Infrared scan performed on live gear to confirm no hotspots" },
        { "type": "header", "text": "D. Commissioning & Documentation" },
        { "type": "item", "desc": "Load balancing confirmed at panels and feeders" },
        { "type": "item", "desc": "Voltage phase-to-phase and phase-to-neutral verified" },
        { "type": "item", "desc": "As-built one-line diagrams, torque logs, breaker settings submitted" },
        { "type": "item", "desc": "Electrical safety signage and PPE labeling complete" },
    ],
      "Division 26::Emergency Power Systems": [
        { "type": "header", "text": "A. Submittals & Design Review" },
        { "type": "item", "desc": "Generator sizing, voltage, phase, and fuel type match electrical schedule and one-line diagram" },
        { "type": "item", "desc": "ATS ratings, number of poles, and location per shop drawings and CSA C282 (or NEC Article 700/701)" },
        { "type": "item", "desc": "Life safety system loads separated and properly labeled" },
        { "type": "header", "text": "B. Equipment Installation" },
        { "type": "item", "desc": "Generator pad and housing installed per manufacturer spec with seismic anchoring (if required)" },
        { "type": "item", "desc": "Exhaust, intake, and fuel lines routed and tested for leaks" },
        { "type": "item", "desc": "Generator grounding electrode and bonding installed and tested" },
        { "type": "item", "desc": "ATS installed level, wired correctly for both normal and emergency sources" },
        { "type": "item", "desc": "Critical loads wired per fire/life safety codes with no unauthorized loads connected" },
        { "type": "header", "text": "C. Functional Testing & Startup" },
        { "type": "item", "desc": "Generator pre-start inspection completed: oil, coolant, battery, fuel, alarms" },
        { "type": "item", "desc": "Generator started manually and under automatic transfer" },
        { "type": "item", "desc": "ATS functionality verified: time delay, sensing, transfer, re-transfer" },
        { "type": "item", "desc": "Emergency loads picked up and de-energized without issue during test" },
        { "type": "item", "desc": "Load bank test or connected full-load test conducted and recorded (as required)" },
        { "type": "item", "desc": "Run time verification per spec (e.g., 2 hrs full load or as per CSA/NEC)" },
        { "type": "header", "text": "D. Closeout & Documentation" },
        { "type": "item", "desc": "As-built single-line, test logs, fuel certification (for diesel), and CSA/UL label on generator submitted" },
        { "type": "item", "desc": "Local AHJ or fire department signoff completed" },
    ],
      "Division 26::Interior and Exterior Lighting Systems": [
        { "type": "header", "text": "A. Submittals & Design Coordination" },
        { "type": "item", "desc": "Fixture submittals match approved schedules: types, wattage, beam angle, IP rating, finish" },
        { "type": "item", "desc": "Mounting and cutout dimensions coordinated with ceilings/walls (ACT, GWB, millwork, concrete)" },
        { "type": "item", "desc": "Emergency and exit fixtures shown and labeled on plans, including battery backup type" },
        { "type": "header", "text": "B. Installation – Interior Fixtures" },
        { "type": "item", "desc": "Fixture securely mounted (recessed clips, brackets, pendant kits) per manufacturer instructions" },
        { "type": "item", "desc": "J-boxes or mounting rails installed level and rated for load" },
        { "type": "item", "desc": "Fixture wiring connected with proper polarity, bonding, and strain relief" },
        { "type": "item", "desc": "Trims, lenses, and diffusers installed without scratches or gaps" },
        { "type": "item", "desc": "Emergency lighting circuits separately identified and operational" },
        { "type": "header", "text": "C. Installation – Exterior & Site Lighting" },
        { "type": "item", "desc": "Pole base depth, anchor bolts, leveling, and conduit entry verified" },
        { "type": "item", "desc": "Site luminaires mounted to pole with gaskets, anti-vibration washers, and wired per code" },
        { "type": "item", "desc": "Photocell or time-clock control integrated and tested" },
        { "type": "header", "text": "D. Circuiting & Testing" },
        { "type": "item", "desc": "Fixture loads match circuit breaker and wiring gauge" },
        { "type": "item", "desc": "Dimming zones and switching logic confirmed to match control intent" },
        { "type": "item", "desc": "Lighting control panel connections verified and tagged" },
        { "type": "item", "desc": "Final aiming, focusing, and beam spread tested and documented" },
        { "type": "header", "text": "E. Closeout" },
        { "type": "item", "desc": "As-built fixture schedule and circuit references submitted" },
        { "type": "item", "desc": "Manufacturer warranty tags, commissioning forms, and programming documents handed over" },
    ],
      "Division 26::Fire Alarm Systems": [
        { "type": "header", "text": "A. Submittals & Design Review" },
        { "type": "item", "desc": "Fire alarm system design and one-line diagram reviewed and approved" },
        { "type": "item", "desc": "System classification (NFPA 72) and code compliance (local authority) verified" },
        { "type": "item", "desc": "Notification appliances, detection devices, and control panel specifications confirmed" },
        { "type": "header", "text": "B. Equipment Installation" },
        { "type": "item", "desc": "Fire alarm control panel (FACP) installed in accessible, ventilated location with proper seismic anchorage" },
        { "type": "item", "desc": "Wiring installed per code, securely fastened, and properly tagged" },
        { "type": "item", "desc": "Fire alarm devices (detectors, pull stations, horns, strobes) installed in proper locations as per design" },
        { "type": "item", "desc": "Manual pull stations mounted at proper height, with clear labeling and unobstructed access" },
        { "type": "item", "desc": "Smoke and heat detectors located and installed per NFPA and manufacturer specifications" },
        { "type": "header", "text": "C. System Integration & Wiring" },
        { "type": "item", "desc": "Interconnection between fire alarm control panel and HVAC, elevators, lighting systems verified" },
        { "type": "item", "desc": "Emergency power supply (UPS or generator) for fire alarm panel confirmed and tested" },
        { "type": "item", "desc": "Circuiting for notification and detection devices confirmed, polarity checked" },
        { "type": "header", "text": "D. Testing & Commissioning" },
        { "type": "item", "desc": "System tested for all alarm conditions (smoke, heat, manual, supervisory)" },
        { "type": "item", "desc": "Notification devices activated and verified for adequate coverage (audible and visible alarms)" },
        { "type": "item", "desc": "Signal integrity, communication with monitoring station (if applicable) tested" },
        { "type": "item", "desc": "Final alarm test (with fire department coordination, if necessary) completed and signed off" },
        { "type": "header", "text": "E. Closeout & Documentation" },
        { "type": "item", "desc": "As-built drawings, system schematics, and point-to-point test logs submitted" },
        { "type": "item", "desc": "Operator training completed, with system manual and emergency procedures provided" },
    ],
      "Division 26::Wiring Devices": [
        { "type": "header", "text": "A. Submittals & Layout Verification" },
        { "type": "item", "desc": "Approved wiring device schedule reviewed and matched to architectural layout" },
        { "type": "item", "desc": "Device types (decora, tamper-resistant, GFCI, USB, dimmer) coordinated with spec and finishes" },
        { "type": "item", "desc": "Height and spacing checked against accessibility standards and project specs" },
        { "type": "header", "text": "B. Rough-in Inspection" },
        { "type": "item", "desc": "Box sizes adequate for conductor fill and mounting" },
        { "type": "item", "desc": "Conductors terminated properly with no exposed copper" },
        { "type": "item", "desc": "GND conductors bonded to box (if metal) and device grounding terminal" },
        { "type": "item", "desc": "AFCI/GFCI circuits connected to correct line/load terminals and identified properly" },
        { "type": "header", "text": "C. Trim-out Inspection" },
        { "type": "item", "desc": "Devices securely mounted flush to wall finish (GWB, tile, concrete, wood)" },
        { "type": "item", "desc": "Cover plates flush, aligned, undamaged, and color-matched" },
        { "type": "item", "desc": "GFCI receptacles tested for trip and reset functions" },
        { "type": "item", "desc": "Dimmer switches and multi-way switches tested for function" },
        { "type": "item", "desc": "USB outlets powered and tested with load" },
        { "type": "header", "text": "D. Final Testing & Closeout" },
        { "type": "item", "desc": "All receptacles voltage-tested for polarity and grounding" },
        { "type": "item", "desc": "Device labeling complete (breaker ID, circuit ref) where applicable" },
        { "type": "item", "desc": "As-built location drawings and inspection logs submitted" },
    ],
      "Division 27::IDF/MDF & Server Room Infrastructure": [
        { "type": "header", "text": "A. Submittals & Design Review" },
        { "type": "item", "desc": "Room dimensions and ceiling height meet project specs and TIA-569-E guidelines" },
        { "type": "item", "desc": "HVAC installed to maintain 18–27°C with dedicated exhaust or cooling path" },
        { "type": "item", "desc": "Dust, water, plumbing, or unrelated equipment not present in room" },
        { "type": "header", "text": "B. Electrical & Grounding" },
        { "type": "item", "desc": "Dedicated 120V/208V 20A circuits for racks and IT gear installed per design" },
        { "type": "item", "desc": "Telecom Grounding Busbar (TGB) installed and bonded to main building ground per TIA-607-D" },
        { "type": "item", "desc": "Racks and ladder tray bonded to TGB with labeled #6 AWG minimum grounding wire" },
        { "type": "header", "text": "C. Racks, Cable Tray, and Termination Layout" },
        { "type": "item", "desc": "Equipment racks, ladder trays, wall fields, and cabinet layouts match shop drawings" },
        { "type": "item", "desc": "Fiber management systems and radius guides installed to spec" },
        { "type": "item", "desc": "Cable tray clearances maintained above and below for lighting, access, and ceiling grid" },
        { "type": "item", "desc": "Patch panels, termination blocks, and sleeves labeled per TIA-606 standards" },
        { "type": "header", "text": "D. Testing & Commissioning" },
        { "type": "item", "desc": "Fiber and copper cables within racks tested and terminated to rack elevations" },
        { "type": "item", "desc": "Power tested at each rack/cabinet PDU" },
        { "type": "item", "desc": "All equipment racks labeled and bolted securely to floor" },
        { "type": "header", "text": "E. Closeout & Documentation" },
        { "type": "item", "desc": "As-built layout, grounding diagram, elevation views, and labeling maps submitted" },
        { "type": "item", "desc": "Commissioning report, warranty documents, and asset registry submitted" },
    ],
      "Division 27::Structured Cabling System": [
        { "type": "header", "text": "A. Submittals & Design Review" },
        { "type": "item", "desc": "Cable type, rating (CMR/LSZH/Plenum), color, and termination types confirmed to match RFP/specs" },
        { "type": "item", "desc": "Approved shop drawings showing cable routes, IDF/MDF locations, and quantities" },
        { "type": "item", "desc": "Labeling scheme and numbering plan approved and consistent across drawings and racks" },
        { "type": "header", "text": "B. Backbone and Horizontal Cabling" },
        { "type": "item", "desc": "Cable supports (ladder tray, J-hooks, D-rings) installed with max spacing limits per BICSI/NEC" },
        { "type": "item", "desc": "Cables run with no kinks, sharp bends, or unpermitted splices" },
        { "type": "item", "desc": "Horizontal cable length does not exceed 90m from patch panel to outlet" },
        { "type": "item", "desc": "Fiber optic cable installed in innerduct with correct bend radius and pull tension" },
        { "type": "header", "text": "C. Terminations & Rack Setup" },
        { "type": "item", "desc": "Patch panels, jacks, and field terminations are punched down and labeled" },
        { "type": "item", "desc": "Patch cords installed with strain relief; no tight bends at connectors" },
        { "type": "item", "desc": "Rack layout neat with Velcro, lacing bars, cable managers installed" },
        { "type": "item", "desc": "Proper grounding and bonding provided for racks and cable tray" },
        { "type": "header", "text": "D. Testing & Commissioning" },
        { "type": "item", "desc": "Copper cable tested with Fluke/BERT for length, NEXT, return loss, and wiremap" },
        { "type": "item", "desc": "Fiber tested with OTDR for insertion loss and length" },
        { "type": "item", "desc": "Test reports submitted in PDF and original software formats" },
        { "type": "header", "text": "E. Closeout & Documentation" },
        { "type": "item", "desc": "As-built drawings showing final cable routes and IDs provided" },
        { "type": "item", "desc": "O&M documentation including test results, warranties, and cut-sheets submitted" },
    ],
      "Division 28::CCTV System": [
        { "type": "header", "text": "A. Submittals & Planning Review" },
        { "type": "item", "desc": "Camera type (bullet, dome, PTZ), resolution, field of view, and mounting verified with spec and layout" },
        { "type": "item", "desc": "Camera coverage map reviewed with critical area visibility checked (entrances, corridors, parking, elevators)" },
        { "type": "item", "desc": "NVR/DVR sizing, hard drive capacity, video retention period meet spec (typically 30–90 days)" },
        { "type": "header", "text": "B. Camera Installation" },
        { "type": "item", "desc": "Cameras mounted level, aligned, and protected from vandalism/environment" },
        { "type": "item", "desc": "Camera junction boxes, pole brackets, and armatures installed securely" },
        { "type": "item", "desc": "IP address assigned, MAC address logged, and connection to POE switch/NVR confirmed" },
        { "type": "header", "text": "C. Cabling & Power" },
        { "type": "item", "desc": "CAT6 or coaxial cable terminated correctly and tested for continuity and speed" },
        { "type": "item", "desc": "POE switches installed and labeled; power budget per port verified" },
        { "type": "item", "desc": "Surge protection and grounding provided at key panels and field terminations" },
        { "type": "header", "text": "D. NVR/Software Configuration" },
        { "type": "item", "desc": "NVR mounted in secure location, with UPS backup and HVAC cooling" },
        { "type": "item", "desc": "Time, resolution, camera naming, frame rate, and retention settings configured" },
        { "type": "item", "desc": "Remote viewing stations and login permissions tested and documented" },
        { "type": "header", "text": "E. Functional Testing & Handover" },
        { "type": "item", "desc": "Live view, motion detection, night vision, and PTZ controls (if applicable) tested" },
        { "type": "item", "desc": "Recorded playback tested for quality, date/time stamp, and exported formats" },
        { "type": "item", "desc": "As-built camera map, user manual, and commissioning documents submitted" },
    ],
      "Division 28::Access Control System": [
        { "type": "header", "text": "A. Submittals & Design Review" },
        { "type": "item", "desc": "Access control riser diagram and door schedule approved and matches hardware and layout" },
        { "type": "item", "desc": "Reader types (prox, keypad, biometric), controller specs, and power requirements reviewed" },
        { "type": "item", "desc": "Locking hardware compatibility (fail-safe/fail-secure, strike vs. maglock) verified per code" },
        { "type": "header", "text": "B. Door Hardware Installation" },
        { "type": "item", "desc": "Electric strike, maglock, or motorized latch installed and aligned with door frame" },
        { "type": "item", "desc": "Request-to-exit (REX) sensor or button installed per location and height standards" },
        { "type": "item", "desc": "Door position switch (DPS) wired and positioned correctly" },
        { "type": "header", "text": "C. Access Control Panels & Power" },
        { "type": "item", "desc": "Control panel installed in secure location with UPS or battery backup" },
        { "type": "item", "desc": "Cabling to readers, locks, DPS, and REX routed in conduit or raceway with labeling" },
        { "type": "item", "desc": "All field devices terminated properly in control panel; fuses or breakers included" },
        { "type": "header", "text": "D. Programming & Testing" },
        { "type": "item", "desc": "Readers tested for authorized/unauthorized card access, door release" },
        { "type": "item", "desc": "Lock relays tested for correct logic with DPS and REX inputs" },
        { "type": "item", "desc": "Door held-open and forced-entry alarms tested and logged" },
        { "type": "item", "desc": "Time zones, user access groups, and holidays configured" },
        { "type": "header", "text": "E. Closeout & Documentation" },
        { "type": "item", "desc": "As-built riser diagram, door detail drawings, and panel layout submitted" },
        { "type": "item", "desc": "Commissioning log, event logs, and oparator training completed" },
    ],
      "Division 31::Excavation & Backfill": [
        { "type": "header", "text": "A. Pre-Excavation Preparation" },
        { "type": "item", "desc": "Stamped IFC drawings, geotechnical report, and excavation plan reviewed" },
        { "type": "item", "desc": "Underground utility locates (One Call) completed and visible on site" },
        { "type": "item", "desc": "Traffic, erosion control, and safety barriers installed" },
        { "type": "header", "text": "B. Excavation Work" },
        { "type": "item", "desc": "Excavation performed to lines, grades, slopes, and benches per IFC drawings" },
        { "type": "item", "desc": "Dewatering systems active if groundwater or rainfall present" },
        { "type": "item", "desc": "Temporary shoring/slope protection installed if required by geotechnical engineer" },
        { "type": "item", "desc": "Excavated material stockpiled, protected, or hauled off site as per reuse criteria" },
        { "type": "header", "text": "C. Bedding and Pipe Zone" },
        { "type": "item", "desc": "Trench bottom leveled and free of rock or debris" },
        { "type": "item", "desc": "Sand or gravel bedding compacted under and around pipe (as specified)" },
        { "type": "item", "desc": "Proper pipe zone material placed and compacted in lifts to minimum cover depth" },
        { "type": "item", "desc": "Bedding and pipe zone material approved by consultant or geo report" },
        { "type": "item", "desc": "Gradation or sieve analysis results submitted and confirmed compliant" },
        { "type": "item", "desc": "Crushed gravel, sand, or granular type confirmed per ASTM or CSA specs (e.g., ¾” minus, Type I, Type II)" },
        { "type": "header", "text": "D. Backfilling and Compaction" },
        { "type": "item", "desc": "Select backfill placed in uniform lifts (max 150–300 mm) and moisture adjusted" },
        { "type": "item", "desc": "Compaction equipment appropriate for trench size and lift depth" },
        { "type": "item", "desc": "Field density tests performed at required intervals and meet minimum % Proctor" },
        { "type": "item", "desc": "No frozen or organic material used in backfill" },
        { "type": "item", "desc": "Import material approvals documented and traceable (trucking tickets, source ID)" },
        { "type": "item", "desc": "Visual inspection for clay clumps, oversized rocks, or moisture content" },
        { "type": "item", "desc": "Lift depths, moisture content, and compaction effort (pass counts) logged per lift" },
        { "type": "header", "text": "E. Closeout & Records" },
        { "type": "item", "desc": "Compaction test reports submitted by third-party testing agency" },
        { "type": "item", "desc": "Excavation log/as-built grades submitted if requested" },
    ],
      "Division 31::Grading & Site Prep": [
        { "type": "header", "text": "A. Pre-Mobilization & Submittals" },
        { "type": "item", "desc": "IFC drawings, topographic survey, and geotechnical report reviewed" },
        { "type": "item", "desc": "Site boundaries, setbacks, and elevation benchmarks confirmed and staked" },
        { "type": "item", "desc": "Erosion and sediment control measures in place (silt fence, straw wattles, ditch checks)" },
        { "type": "header", "text": "B. Clearing and Stripping" },
        { "type": "item", "desc": "Trees, brush, and debris removed per environmental and permit requirements" },
        { "type": "item", "desc": "Topsoil stripped to approved depth and stockpiled separately with protection" },
        { "type": "item", "desc": "Disposal of debris, root mat, and unsuitable material documented" },
        { "type": "header", "text": "C. Rough Grading" },
        { "type": "item", "desc": "Site rough graded to design contours within allowable tolerance (typically ±50 mm)" },
        { "type": "item", "desc": "Subgrade compacted to 95% Standard Proctor (or per spec) and tested" },
        { "type": "item", "desc": "Moisture content adjusted during compaction as per geo report" },
        { "type": "item", "desc": "No overcut/undercut beyond tolerance unless approved by consultant" },
        { "type": "header", "text": "D. Subgrade Review and Drainage Prep" },
        { "type": "item", "desc": "Subgrade prepared for pavement, concrete, or building pad with consistent slope" },
        { "type": "item", "desc": "Drainage swales or subdrains placed prior to slab base if applicable" },
        { "type": "item", "desc": "Subgrade reviewed by geotechnical engineer prior to base layer or structural fill" },
        { "type": "header", "text": "E. Closeout" },
        { "type": "item", "desc": "As-built grading plan submitted (or surveyed) to confirm design elevations" },
        { "type": "item", "desc": "Erosion control maintained through final acceptance" },
    ],
      "Division 31::Shoring & Trench Safety": [
        { "type": "header", "text": "A. Submittals & Approvals" },
        { "type": "item", "desc": "Excavation support drawings reviewed and stamped by professional engineer" },
        { "type": "item", "desc": "Geotechnical recommendations on soil conditions and allowable excavation methods confirmed" },
        { "type": "item", "desc": "Engineered shoring system or benching/sloping method selected based on soil type" },
        { "type": "header", "text": "B. Installation of Support Systems" },
        { "type": "item", "desc": "Trench box/sheet pile installed prior to personnel entry" },
        { "type": "item", "desc": "Shoring systems installed per stamped plan and aligned with excavation profile" },
        { "type": "item", "desc": "Bracing, wales, or hydraulic components installed securely and inspected for defects" },
        { "type": "item", "desc": "Spoil piles placed minimum 1 m (3 ft) from trench edge" },
        { "type": "header", "text": "C. Monitoring & Daily Inspection" },
        { "type": "item", "desc": "Daily pre-entry trench inspections completed and documented by competent person" },
        { "type": "item", "desc": "Inspections conducted after rain, vibration, or any soil movement" },
        { "type": "item", "desc": "Warning signage and restricted zone markings clearly in place" },
        { "type": "item", "desc": "Ladders or safe access provided for all trench depths >1.2 m (4 ft)" },
        { "type": "header", "text": "D. Backfill & Removal" },
        { "type": "item", "desc": "Backfill completed in lifts, with progressive removal of shoring equipment" },
        { "type": "item", "desc": "No trench collapse, soil cave-ins, or structural issues during removal" },
        { "type": "item", "desc": "Final inspection completed and documented prior to full demobilization" },
    ],
      "Division 31::Soil Stabilization": [
        { "type": "header", "text": "A. Submittals & Mix Design Review" },
        { "type": "item", "desc": "Geotechnical engineer’s soil report identifies poor soils and prescribes stabilization" },
        { "type": "item", "desc": "Proposed stabilization method (lime, cement, geogrid, chemical) approved and mix design submitted" },
        { "type": "item", "desc": "Equipment plan (pulverizer, reclaimer, tiller) and work sequence reviewed" },
        { "type": "header", "text": "B. Site Prep and Material Delivery" },
        { "type": "item", "desc": "Area stripped and graded per plan; loose organic, frozen, or debris material removed" },
        { "type": "item", "desc": "Lime/cement stored in silos or dry conditions and verified by weight ticket or daily report" },
        { "type": "item", "desc": "Weather conditions suitable (no standing water, temperature >5°C for lime/cement work)" },
        { "type": "header", "text": "C. Mixing and Blending" },
        { "type": "item", "desc": "Material uniformly spread at required rate (kg/m² or % by dry weight)" },
        { "type": "item", "desc": "Full-depth mixing using reclaimer or rotary mixer performed per lift thickness" },
        { "type": "item", "desc": "Moisture adjusted before and after mixing per geotechnical spec" },
        { "type": "header", "text": "D. Compaction and Testing" },
        { "type": "item", "desc": "Compaction completed within specified time window after mixing" },
        { "type": "item", "desc": "Field density and moisture tests recorded and meet % compaction as per modified Proctor" },
        { "type": "item", "desc": "Stabilized soil proof-rolled and visually inspected for deflection/pumping" },
        { "type": "header", "text": "E. Geosynthetics (if applicable)" },
        { "type": "item", "desc": "Geotextile/geogrid installed over graded subgrade with overlap and anchorage" },
        { "type": "item", "desc": "Fill placed over reinforcement in specified lift thickness without damage" },
        { "type": "header", "text": "F. Records & Closeout" },
        { "type": "item", "desc": "Mix ticket log, QC reports, and final compaction summary submitted" },
        { "type": "item", "desc": "As-built stabilization extent and treatment depths verified and recorded" },
    ],
      "Division 31::Dewatering": [
        { "type": "header", "text": "A. Dewatering Plan & Setup" },
        { "type": "item", "desc": "Geotechnical report reviewed for water table elevation, infiltration rate, and soil permeability" },
        { "type": "item", "desc": "Dewatering method (sump pump, wellpoint, deep well, or cutoff trench) selected and reviewed by engineer" },
        { "type": "item", "desc": "Dewatering layout, discharge path, and erosion/sediment control measures approved" },
        { "type": "header", "text": "B. Installation of Equipment" },
        { "type": "item", "desc": "Pumps installed on level pad or suspended to prevent vibration/tilt" },
        { "type": "item", "desc": "Discharge hoses, header pipes, and electrical connections inspected" },
        { "type": "item", "desc": "Power supply (generator or panel) tested and labeled" },
        { "type": "item", "desc": "Check valves and standby pump(s) installed if system is continuous-duty" },
        { "type": "header", "text": "C. Operation and Monitoring" },
        { "type": "item", "desc": "Pump flow, head pressure, and drawdown rate monitored and logged daily" },
        { "type": "item", "desc": "Sump pit maintained free of debris and sediment" },
        { "type": "item", "desc": "Turbidity, pH, and flow volume monitored (if required by permit)" },
        { "type": "item", "desc": "Ground settlement or trench instability monitored near dewatering area" },
        { "type": "header", "text": "D. Discharge and Environmental Protection" },
        { "type": "item", "desc": "Discharge location protected with sediment bags, filter socks, or vegetated buffer" },
        { "type": "item", "desc": "Discharge path does not cause erosion, flooding, or backflow to excavation" },
        { "type": "item", "desc": "Records maintained for municipal or environmental reporting (as applicable)" },
        { "type": "header", "text": "E. Shutdown and Closeout" },
        { "type": "item", "desc": "Pumps removed only after water table is confirmed stabilized and area dry" },
        { "type": "item", "desc": "Sump pit and discharge path backfilled and restored as per site plan" },
    ],
      "Division 31::Rock Excavation": [
        { "type": "header", "text": "A. Planning & Permits" },
        { "type": "item", "desc": "Geotechnical report confirms rock type, depth, and excavation recommendations" },
        { "type": "item", "desc": "Blasting permits or excavation method approvals obtained from local authorities" },
        { "type": "item", "desc": "Pre-blast condition survey of adjacent structures completed and documented" },
        { "type": "header", "text": "B. Site Safety & Blasting Plan" },
        { "type": "item", "desc": "Blasting plan reviewed and stamped by certified blaster or geotechnical engineer" },
        { "type": "item", "desc": "Blasting mats, warning systems, and exclusion zones in place" },
        { "type": "item", "desc": "Seismic monitoring devices installed at nearest sensitive structure/location" },
        { "type": "header", "text": "C. Mechanical Rock Excavation (if applicable)" },
        { "type": "item", "desc": "Hydraulic hammer, ripper, or breaker operating at correct pressure/angle" },
        { "type": "item", "desc": "Vibration and noise levels monitored as per equipment specs/local regulations" },
        { "type": "header", "text": "D. Blast Execution & Monitoring" },
        { "type": "item", "desc": "Blasting conducted only during permitted hours with audible/visual alerts" },
        { "type": "item", "desc": "Seismograph logs (PPV/duration) recorded and reviewed after each blast" },
        { "type": "item", "desc": "Flyrock, overbreak, and ground heave inspected post-blast" },
        { "type": "header", "text": "E. Post-Blast Inspection & Rock Removal" },
        { "type": "item", "desc": "Scaling, trimming, or additional mechanical removal completed as required" },
        { "type": "item", "desc": "Rock disposal and haul logs maintained and verified by inspector" },
        { "type": "item", "desc": "Excavation to final line, grade, and slope within specified tolerance" },
    ],
      "Division 32::Asphalt Paving": [
        { "type": "header", "text": "A. Submittals & Mix Design Review" },
        { "type": "item", "desc": "Approved paving drawings and pavement design (thickness, lifts, materials) reviewed" },
        { "type": "item", "desc": "Asphalt mix design (job-mix formula, JMF) approved by consultant or city" },
        { "type": "item", "desc": "Weather conditions checked: ambient >5°C, surface dry, and no rain forecasted" },
        { "type": "header", "text": "B. Subgrade and Base Preparation" },
        { "type": "item", "desc": "Subgrade compacted and tested for density and moisture content" },
        { "type": "item", "desc": "Granular base (GBC or equivalent) placed in lifts and compacted to 100% standard Proctor" },
        { "type": "item", "desc": "Proof rolling completed and approved by consultant prior to asphalt placement" },
        { "type": "header", "text": "C. Asphalt Placement" },
        { "type": "item", "desc": "Paver preheated and screed adjusted for thickness and slope" },
        { "type": "item", "desc": "Tack coat applied evenly to cold joint or milled surface" },
        { "type": "item", "desc": "Asphalt temperature upon delivery recorded (typically >120°C for hot-mix)" },
        { "type": "item", "desc": "Paving completed in accordance with lift thickness (e.g., 50 mm base, 40 mm surface)" },
        { "type": "header", "text": "D. Compaction and Testing" },
        { "type": "item", "desc": "Steel drum and pneumatic rollers used within temperature window" },
        { "type": "item", "desc": "Joint compaction and overlaps inspected (cold joints reheated if needed)" },
        { "type": "item", "desc": "Core or nuclear density tests taken and meet compaction spec (typically >92% of max density)" },
        { "type": "header", "text": "E. Surface and Closeout" },
        { "type": "item", "desc": "Final grade and cross slope confirmed with straight edge and/or level" },
        { "type": "item", "desc": "Surface finish smooth, with no tearing, segregation, or roller marks" },
        { "type": "item", "desc": "Traffic allowed only after full cooling or as specified in project documents" },
    ],
      "Division 32::Curbs & Sidewalks": [
        { "type": "header", "text": "A. Submittals & Review" },
        { "type": "item", "desc": "IFC drawings, sections, and layout plan reviewed and staked" },
        { "type": "item", "desc": "Concrete mix design (strength, slump, air content) approved by consultant or municipality" },
        { "type": "item", "desc": "Accessibility features (slopes, detectable warning pads) detailed and approved" },
        { "type": "header", "text": "B. Subgrade and Formwork" },
        { "type": "item", "desc": "Subgrade compacted and proof rolled with no soft spots" },
        { "type": "item", "desc": "Forms installed true to line/grade with proper slope for drainage" },
        { "type": "item", "desc": "Expansion joints, dowels, and keyways placed where required" },
        { "type": "header", "text": "C. Reinforcement & Embedments" },
        { "type": "item", "desc": "Rebar or mesh installed with correct spacing and chair support" },
        { "type": "item", "desc": "Sleeves/conduits for utilities or light poles installed before pour" },
        { "type": "header", "text": "D. Concrete Placement and Finish" },
        { "type": "item", "desc": "Concrete placed within time and temperature window (CSA A23.1 compliance)" },
        { "type": "item", "desc": "Slump, air, and temperature tests performed at start of pour" },
        { "type": "item", "desc": "Surface finished per spec (broom, smooth, etc.) with control joints cut or tooled" },
        { "type": "item", "desc": "Curb face and radii troweled smoothly with no honeycombing" },
        { "type": "header", "text": "E. Curing & Post-Pour" },
        { "type": "item", "desc": "Curing compound applied or wet burlap/plastic used within 30 mins of finish" },
        { "type": "item", "desc": "Barriers or flags in place to prevent damage from foot or vehicle traffic" },
        { "type": "item", "desc": "Final inspection completed for slope, elevation, cracks, and finish" },
    ],
      "Division 32::Fencing & Gates": [
        { "type": "header", "text": "A. Submittals & Layout" },
        { "type": "item", "desc": "Approved fence layout and material specifications reviewed" },
        { "type": "item", "desc": "Property lines, easements, and clearances verified and staked" },
        { "type": "item", "desc": "Line, terminal, corner, and gate post locations marked and spacing confirmed" },
        { "type": "header", "text": "B. Post Installation" },
        { "type": "item", "desc": "Post hole depth and diameter meet spec and frost depth requirements" },
        { "type": "item", "desc": "Concrete footing depth and alignment confirmed; top sloped for drainage" },
        { "type": "item", "desc": "Posts installed plumb, square, and at consistent height" },
        { "type": "header", "text": "C. Fence Panels and Rails" },
        { "type": "item", "desc": "Fence fabric or panels tensioned and fastened securely to rails/posts" },
        { "type": "item", "desc": "Horizontal rails and supports aligned and installed without sag" },
        { "type": "item", "desc": "Fence height and gap from ground meet specifications" },
        { "type": "header", "text": "D. Gates and Hardware" },
        { "type": "item", "desc": "Gate frames aligned and swing direction checked" },
        { "type": "item", "desc": "Hinges, stops, and latches installed and function properly" },
        { "type": "item", "desc": "Locking or security hardware tested and documented" },
        { "type": "header", "text": "E. Final Inspection & Cleanup" },
        { "type": "item", "desc": "Entire fence line inspected for straightness, continuity, and damage" },
        { "type": "item", "desc": "Excavated soil removed or graded; postholes flush with finish grade" },
        { "type": "item", "desc": "All excess material and debris removed from site" },
    ],
      "Division 32::Site Furnishings": [
        { "type": "header", "text": "A. Submittals & Layout Verification" },
        { "type": "item", "desc": "Shop drawings and cutsheets reviewed for each furnishing item (bench, bike rack, bollard, receptacle, etc.)" },
        { "type": "item", "desc": "Furnishing layout coordinated with civil/landscape drawings and staked" },
        { "type": "item", "desc": "Conflicts with sidewalks, trees, hydrants, utilities, and clearances resolved before install" },
        { "type": "header", "text": "B. Foundation and Surface Prep" },
        { "type": "item", "desc": "Concrete pad or base slab complete and verified flat and level" },
        { "type": "item", "desc": "Anchor bolts, sleeve inserts, or embedded plates located and coordinated" },
        { "type": "header", "text": "C. Installation of Furnishings" },
        { "type": "item", "desc": "Bench alignment consistent with drawings and parallel to curb/sidewalk" },
        { "type": "item", "desc": "All anchor bolts torqued and hidden hardware capped (if applicable)" },
        { "type": "item", "desc": "Bollards installed at correct spacing, depth, and setback (e.g., min 1m clearance)" },
        { "type": "item", "desc": "Waste/recycle receptacles mounted plumb, accessible, and with liners installed" },
        { "type": "item", "desc": "Bike racks anchored securely and accessible with no conflict with pedestrian paths" },
        { "type": "header", "text": "D. Final Inspection & Acceptance" },
        { "type": "item", "desc": "All site furnishings cleaned, tags removed, and inspected for damage" },
        { "type": "item", "desc": "All furnishings meet accessibility standards for height, spacing, and placement" },
        { "type": "item", "desc": "Final layout confirmed by consultant or landscape architect" },
    ],
      "Division 32::Landscaping & Planting": [
        { "type": "header", "text": "A. Submittals & Site Prep" },
        { "type": "item", "desc": "Landscape drawings, plant schedule, and planting notes reviewed and approved" },
        { "type": "item", "desc": "Topsoil report (sieve analysis, pH, organic content) reviewed and approved" },
        { "type": "item", "desc": "Plant and sod material submittals (nursery source, species, size) reviewed" },
        { "type": "item", "desc": "Grading complete, debris removed, and irrigation sleeves installed" },
        { "type": "header", "text": "B. Soil, Mulch & Preparation" },
        { "type": "item", "desc": "Topsoil spread to required depth (typically 150–300 mm) and raked smooth" },
        { "type": "item", "desc": "Mulch installed to specified thickness (e.g., 75 mm) around trees and beds" },
        { "type": "item", "desc": "No mulch against tree trunks or plant stems" },
        { "type": "header", "text": "C. Planting & Sod Installation" },
        { "type": "item", "desc": "Trees planted at correct depth with trunk flare exposed" },
        { "type": "item", "desc": "Shrubs and perennials spaced per planting plan" },
        { "type": "item", "desc": "Sod laid tight with staggered joints and watered immediately" },
        { "type": "item", "desc": "Tree staking done securely and does not damage bark" },
        { "type": "header", "text": "D. Final Acceptance & Warranty Monitoring" },
        { "type": "item", "desc": "Final inspection of plant health, placement, and finish grade" },
        { "type": "item", "desc": "Irrigation system pressure-tested and zones verified prior to handover" },
        { "type": "item", "desc": "Landscape maintenance plan and warranty period (typically 1–2 years) confirmed" },
    ],
      
             // --- IMPORTANT: Add ALL other default checklist items here ---
             // --- Make sure every key from checklistData has an entry in defaultItems ---
        };

        // --- PDF Library ---
        const { jsPDF } = window.jspdf;

        // --- STATE ---
        let currentChecklistKey = null;
        let sortableInstance = null;
        let notificationTimeout = null;
        let activeSidebarItem = null;
        let capturedImages = [];
        let logoDataUrl = null;

        // --- DOM ELEMENTS ---
        const sidebar = document.getElementById('sidebar');
        const sidebarContent = document.getElementById('sidebarContent');
        const mainContent = document.getElementById('mainContent');
        const placeholderContent = document.getElementById('placeholderContent');
        const checklistNameEl = document.getElementById('selectedChecklistName');
        const checklistBody = document.getElementById('checklist');
        const notificationEl = document.getElementById('notification');
        const overlay = document.getElementById('overlay');
        const openSidebarBtn = document.getElementById('openSidebarBtn');
        const closeSidebarBtn = document.getElementById('closeSidebarBtn');
        const fileInputElement = document.getElementById('fileInput');
        const photoInputElement = document.getElementById('photoInput');
        const photoGrid = document.getElementById('photoGrid');
        const sidebarSearchInput = document.getElementById('sidebarSearch');
        const logoInput = document.getElementById('logoInput');
        const logoFilename = document.getElementById('logoFilename');
        const lastSavedTimestampEl = document.getElementById('lastSavedTimestamp'); // NEW
        const checklistProgressEl = document.getElementById('checklistProgress'); // NEW
        const itemSearchInputEl = document.getElementById('itemSearchInput'); // NEW


        logoInput.addEventListener('change', e => {
          const file = e.target.files[0];
          if (!file) {
            logoFilename.textContent = 'No logo selected';
            logoDataUrl = null;
            return;
          }
          logoFilename.textContent = file.name;
          const reader = new FileReader();
          reader.onload = evt => {
            logoDataUrl = evt.target.result;
          };
          reader.readAsDataURL(file);
        });


        // --- UI FUNCTIONS ---
        function populateSidebar(filter = '') {
            sidebarContent.innerHTML = '';
            const searchTerm = filter.toLowerCase().trim();

            Object.entries(checklistData).forEach(([division, list]) => {
                const filteredList = list.filter(name => name.toLowerCase().includes(searchTerm));
                if (division.toLowerCase().includes(searchTerm) || filteredList.length > 0) {
                    const header = document.createElement('div');
                    header.textContent = division;
                    header.className = 'p-3 font-semibold text-gray-700 border-t border-gray-200 text-sm uppercase tracking-wider';
                    sidebarContent.appendChild(header);

                    filteredList.forEach(name => {
                        const item = document.createElement('div');
                        item.textContent = name;
                        const itemKey = `${division}::${name}`;
                        item.dataset.key = itemKey;
                        item.className = 'item px-4 py-2 text-sm text-gray-600 hover:text-blue-600 hover:bg-gray-100 cursor-pointer rounded-md mx-2 my-1 transition-colors duration-150';
                        if (itemKey === currentChecklistKey) {
                             item.classList.add('active');
                             activeSidebarItem = item;
                        }
                        item.addEventListener('click', () => selectChecklist(division, name, item));
                        sidebarContent.appendChild(item);
                    });
                }
            });
             if (sidebarContent.children.length === 0 && searchTerm) {
                 const noResults = document.createElement('div');
                 noResults.textContent = 'No checklists found.';
                 noResults.className = 'p-4 text-center text-gray-500 text-sm';
                 sidebarContent.appendChild(noResults);
             }
        }

        function filterSidebar() {
            const searchTerm = sidebarSearchInput.value;
            populateSidebar(searchTerm);
        }

        function toggleSidebar(open) {
            if (open) {
                sidebar.classList.add('open');
                overlay.classList.add('active');
            } else {
                sidebar.classList.remove('open');
                overlay.classList.remove('active');
            }
        }

        function showNotification(message, type = 'info', duration = 3000) {
             clearTimeout(notificationTimeout);
             notificationEl.textContent = message;
             // Using the classes from your provided HTML structure for notifications
             notificationEl.className = 'fixed top-4 right-4 p-4 rounded-md shadow-lg z-50 transition-all duration-300 opacity-0 -translate-y-5'; // Reset classes
             switch (type) {
                 case 'success': notificationEl.classList.add('success', 'bg-green-100', 'border-green-300', 'text-green-800', 'border'); break;
                 case 'error': notificationEl.classList.add('error', 'bg-red-100', 'border-red-300', 'text-red-800', 'border'); break;
                 case 'warning': notificationEl.classList.add('warning', 'bg-yellow-100', 'border-yellow-300', 'text-yellow-800', 'border'); break;
                 case 'info': default: notificationEl.classList.add('info', 'bg-blue-100', 'border-blue-300', 'text-blue-800', 'border'); break;
             }
             // Trigger reflow for transition
             void notificationEl.offsetWidth;
             notificationEl.classList.add('show');
             notificationEl.classList.remove('opacity-0', '-translate-y-5');


             notificationTimeout = setTimeout(() => {
                 notificationEl.classList.remove('show');
                 notificationEl.classList.add('opacity-0', '-translate-y-5');
                 // Clean up classes after transition
                 setTimeout(() => {
                    notificationEl.className = 'fixed top-4 right-4 p-4 rounded-md shadow-lg z-50 transition-all duration-300 opacity-0 -translate-y-5';
                 }, 300);
             }, duration);
        }

        function updateNumbers() {
            let count = 0;
            checklistBody.querySelectorAll('tr').forEach(row => {
                const numberCell = row.cells[1];
                if (!numberCell) return;
                if (row.classList.contains('header-row')) {
                    numberCell.textContent = '';
                } else {
                    // Only number visible rows if filtering is active, otherwise number all
                    if (row.style.display !== 'none') {
                         numberCell.textContent = ++count;
                    } else if (!itemSearchInputEl.value.trim()) { // If no filter, number all
                         numberCell.textContent = ++count;
                    } else {
                         // Keep original number hidden or assign based on full list
                         // For simplicity, if hidden by filter, clear number or leave as is from previous update
                         // To keep original numbers, they'd need to be stored or recalculated from source data
                    }
                }
            });
            updateChecklistProgress(); // NEW: Update progress when numbers change
        }


        function initSortable() {
            if (sortableInstance) {
              sortableInstance.destroy();
            }
            sortableInstance = Sortable.create(checklistBody, {
              handle: '.drag-handle',
              draggable: 'tr',
              animation: 150,
              ghostClass: 'opacity-50',
              fallbackOnBody: true,
              forceFallback: true,
              onEnd: () => {
                updateNumbers();
                // Potentially save checklist or mark as dirty after reorder
              }
            });
        }

        function updatePhotoDate(index, newDate) {
            if (capturedImages[index]) {
                capturedImages[index].date = newDate; // newDate will be in 'YYYY-MM-DD' format from the input
            }
        }

        // In renderPhotos() function:
        function renderPhotos() {
            photoGrid.innerHTML = '';
            capturedImages.forEach((photo, index) => {
                const photoItemDiv = document.createElement('div');
                photoItemDiv.className = 'photo-item bg-gray-50';
                photoItemDiv.dataset.index = index;

                const imgPreview = document.createElement('img');
                imgPreview.src = photo.dataUrl;
                imgPreview.alt = `Photo ${index + 1}`;
                imgPreview.className = 'photo-preview mb-2';

                const descLabel = document.createElement('label');
                descLabel.textContent = 'Description:';
                descLabel.className = 'text-sm font-medium text-gray-700';
                const descInput = document.createElement('textarea');
                descInput.value = photo.description;
                descInput.rows = 2;
                descInput.className = 'input-field text-sm';
                descInput.placeholder = 'Enter photo description...';
                descInput.oninput = (e) => updatePhotoDescription(index, e.target.value);

                // --- MODIFIED DATE HANDLING ---
                const dateLabel = document.createElement('label');
                dateLabel.textContent = 'Date Reported:';
                dateLabel.className = 'text-sm font-medium text-gray-700';
                
                const dateInput = document.createElement('input');
                dateInput.type = 'date';
                dateInput.className = 'input-field text-sm'; // Use same styling as other inputs
                // For new photos, handlePhotoUpload will set a default.
                dateInput.value = photo.date; // Assuming photo.date is 'YYYY-MM-DD'
                dateInput.onchange = (e) => updatePhotoDate(index, e.target.value); // Call new update function

                // --- END MODIFIED DATE HANDLING ---

                const deleteBtn = document.createElement('button');
                deleteBtn.innerHTML = '<i class="fas fa-trash mr-1"></i> Delete';
                deleteBtn.className = 'btn btn-danger btn-icon text-xs self-end mt-2';
                deleteBtn.onclick = () => deletePhoto(index);

                photoItemDiv.appendChild(imgPreview);
                photoItemDiv.appendChild(descLabel);
                photoItemDiv.appendChild(descInput);
                photoItemDiv.appendChild(dateLabel);
                photoItemDiv.appendChild(dateInput);    
                photoItemDiv.appendChild(deleteBtn);
                photoGrid.appendChild(photoItemDiv);
            });
        }

        // --- CHECKLIST ACTIONS ---
        function selectChecklist(division, name, clickedElement) {
             if (currentChecklistKey) {
                 saveChecklist(false);
             }
            currentChecklistKey = `${division}::${name}`;

            if (activeSidebarItem) {
                activeSidebarItem.classList.remove('active');
            }
            clickedElement.classList.add('active');
            activeSidebarItem = clickedElement;
            // NEW: Scroll active item into view
            if (typeof clickedElement.scrollIntoViewIfNeeded === 'function') {
                clickedElement.scrollIntoViewIfNeeded({ behavior: 'smooth', block: 'nearest' });
            } else {
                 clickedElement.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
            }


            checklistNameEl.textContent = name;
            mainContent.classList.remove('hidden');
            placeholderContent.classList.add('hidden');
            itemSearchInputEl.value = ''; // Clear item search on new checklist
            loadChecklist();
            toggleSidebar(false);
            window.scrollTo({ top: 0, behavior: 'smooth' });
            lastSavedTimestampEl.textContent = ''; // Clear last saved time
        }

        function addHeader() {
             if (!currentChecklistKey) { showNotification("Please select a checklist first.", "warning"); return; }
            const row = checklistBody.insertRow();
            row.className = 'header-row';
            row.innerHTML = `
                <td class="drag-handle"><i class="fas fa-grip-vertical"></i></td>
                <td></td>
                <td contenteditable="true" colspan="4" class="font-semibold italic">New Section Title...</td>
                <td></td>
                <td class="text-center"><button onclick="deleteRow(this)" class="btn btn-icon text-red-600 hover:text-red-800" title="Delete Header"><i class="fas fa-trash"></i></button></td>
            `;
            // initSortable(); // Sortable is initialized once on load
            updateNumbers();
        }

        function addItem() {
             if (!currentChecklistKey) { showNotification("Please select a checklist first.", "warning"); return; }
            const row = checklistBody.insertRow();
            row.innerHTML = `
                <td class="drag-handle"><i class="fas fa-grip-vertical"></i></td>
                <td></td>
                <td contenteditable="true">New item description...</td>
                <td class="text-center"><input type="checkbox" onchange="updateChecklistProgress()"></td>
                <td class="text-center"><input type="checkbox" onchange="updateChecklistProgress()"></td>
                <td class="text-center"><input type="checkbox" onchange="updateChecklistProgress()"></td>
                <td contenteditable="true"></td>
                <td class="text-center"><button onclick="deleteRow(this)" class="btn btn-icon text-red-600 hover:text-red-800" title="Delete Item"><i class="fas fa-trash"></i></button></td>
            `;
            // initSortable(); // Sortable is initialized once on load
            updateNumbers();
        }

        function deleteRow(btn) {
            const row = btn.closest('tr');
            if (row) { row.remove(); updateNumbers(); }
        }

        // --- PHOTO ACTIONS ---
        function triggerPhotoUpload() {
            if (!currentChecklistKey) {
                showNotification("Please select a checklist first.", "warning"); return;
            }
            photoInputElement.click();
        }

        // In handlePhotoUpload() function:
        function handlePhotoUpload(event) {
            const file = event.target.files[0];
            if (!file) return;

            const reader = new FileReader();
            reader.onload = function(e) {
                const dataUrl = e.target.result;
                // Get today's date in YYYY-MM-DD format
                const today = new Date();
                const yyyy = today.getFullYear();
                const mm = String(today.getMonth() + 1).padStart(2, '0'); // Months are 0-indexed
                const dd = String(today.getDate()).padStart(2, '0');
                const formattedToday = `${yyyy}-${mm}-${dd}`;

                const newPhoto = {
                    id: Date.now(),
                    dataUrl: dataUrl,
                    description: '',
                    // date: new Date().toLocaleDateString() // Original, might not be YYYY-MM-DD
                    date: formattedToday // NEW: Set to today in YYYY-MM-DD, or "" if you prefer it blank
                };
                capturedImages.push(newPhoto);
                renderPhotos();
                showNotification("Photo added.", "success", 1500);
            };
            reader.onerror = function() {
                console.error("Error reading photo file");
                showNotification("Error reading the photo file.", "error");
            };
            reader.readAsDataURL(file);
            photoInputElement.value = '';
        }

        function updatePhotoDescription(index, description) {
            if (capturedImages[index]) capturedImages[index].description = description;
        }

        function deletePhoto(index) {
            if (confirm("Are you sure you want to delete this photo?")) {
                capturedImages.splice(index, 1);
                renderPhotos();
                showNotification("Photo deleted.", "info", 1500);
            }
        }

        // --- DATA HELPER ---
        function getCurrentChecklistData() {
            let itemCounter = 0; // For originalIndex
            const itemsData = Array.from(checklistBody.querySelectorAll('tr')).map(row => {
                if (row.classList.contains('header-row')) {
                    return { type: 'header', text: row.cells[2]?.textContent.trim() || '' };
                } else {
                    itemCounter++;
                    const descCell = row.cells[2];
                    const yesCell = row.cells[3]?.querySelector('input');
                    const noCell = row.cells[4]?.querySelector('input');
                    const naCell = row.cells[5]?.querySelector('input');
                    const commentCell = row.cells[6];
                    return {
                        type: 'item',
                        originalIndex: itemCounter, // NEW: Store original index
                        desc: descCell ? descCell.textContent.trim() : '',
                        yes: yesCell ? yesCell.checked : false,
                        no: noCell ? noCell.checked : false,
                        na: naCell ? naCell.checked : false,
                        comment: commentCell ? commentCell.textContent.trim() : ''
                    };
                }
            });

            const metaData = {
                projectName: document.getElementById('projectName').value,
                projectNumber: document.getElementById('projectNumber').value,
                companyName: document.getElementById('companyName').value,
                inspectionDate: document.getElementById('inspectionDate').value,
                inspectionScope: document.getElementById('inspectionScope').value,
                sigIntName: document.getElementById('sigIntName').value, sigIntPos: document.getElementById('sigIntPos').value,
                sigIntDate: document.getElementById('sigIntDate').value, sigIntSig: document.getElementById('sigIntSig').value,
                sigExtName: document.getElementById('sigExtName').value, sigExtPos: document.getElementById('sigExtPos').value,
                sigExtDate: document.getElementById('sigExtDate').value, sigExtSig: document.getElementById('sigExtSig').value,
                sigQaName: document.getElementById('sigQaName').value, sigQaPos: document.getElementById('sigQaPos').value,
                sigQaDate: document.getElementById('sigQaDate').value, sigQaSig: document.getElementById('sigQaSig').value,
            };
            return { meta: metaData, items: itemsData, photos: capturedImages };
        }

        function loadChecklistData(data) {
            if (!data || typeof data !== 'object') {
                 console.error("Invalid data structure for loadChecklistData:", data);
                 const defaultData = defaultItems[currentChecklistKey] || [];
                 loadChecklistData({ meta: {}, items: defaultData, photos: [] });
                 return;
            }
            const meta = data.meta || {};
            const items = data.items || [];
            capturedImages = data.photos || [];

            document.getElementById('projectName').value = meta.projectName || '';
            document.getElementById('projectNumber').value = meta.projectNumber || '';
            document.getElementById('companyName').value = meta.companyName || '';
            document.getElementById('inspectionDate').value = meta.inspectionDate || '';
            document.getElementById('inspectionScope').value = meta.inspectionScope || '';
            document.getElementById('sigIntName').value = meta.sigIntName || ''; document.getElementById('sigIntPos').value = meta.sigIntPos || '';
            document.getElementById('sigIntDate').value = meta.sigIntDate || ''; document.getElementById('sigIntSig').value = meta.sigIntSig || '';
            document.getElementById('sigExtName').value = meta.sigExtName || ''; document.getElementById('sigExtPos').value = meta.sigExtPos || '';
            document.getElementById('sigExtDate').value = meta.sigExtDate || ''; document.getElementById('sigExtSig').value = meta.sigExtSig || '';
            document.getElementById('sigQaName').value = meta.sigQaName || ''; document.getElementById('sigQaPos').value = meta.sigQaPos || '';
            document.getElementById('sigQaDate').value = meta.sigQaDate || ''; document.getElementById('sigQaSig').value = meta.sigQaSig || '';

            checklistBody.innerHTML = '';
            items.forEach(entry => {
                const row = checklistBody.insertRow();
                if (entry.type === 'header') {
                    row.className = 'header-row';
                    row.innerHTML = `
                        <td class="drag-handle"><i class="fas fa-grip-vertical"></i></td> <td></td>
                        <td contenteditable="true" colspan="4" class="font-semibold italic">${entry.text || 'Section Title'}</td> <td></td>
                        <td class="text-center"><button onclick="deleteRow(this)" class="btn btn-icon text-red-600 hover:text-red-800" title="Delete Header"><i class="fas fa-trash"></i></button></td>
                    `;
                } else {
                    row.innerHTML = `
                        <td class="drag-handle"><i class="fas fa-grip-vertical"></i></td> <td></td>
                        <td contenteditable="true">${entry.desc || 'Item Description'}</td>
                        <td class="text-center"><input type="checkbox"${entry.yes ? ' checked' : ''} onchange="updateChecklistProgress()"></td>
                        <td class="text-center"><input type="checkbox"${entry.no ? ' checked' : ''} onchange="updateChecklistProgress()"></td>
                        <td class="text-center"><input type="checkbox"${entry.na ? ' checked' : ''} onchange="updateChecklistProgress()"></td>
                        <td contenteditable="true">${entry.comment || ''}</td>
                        <td class="text-center"><button onclick="deleteRow(this)" class="btn btn-icon text-red-600 hover:text-red-800" title="Delete Item"><i class="fas fa-trash"></i></button></td>
                    `;
                }
            });
            renderPhotos();
            initSortable(); // Re-init sortable after loading new items
            updateNumbers(); // Also calls updateChecklistProgress
            filterChecklistTable(); // Apply current filter if any
        }

        // --- DATA PERSISTENCE ---
        function saveChecklist(showNotif = true) {
            if (!currentChecklistKey) {
                 if (showNotif) showNotification("Please select a checklist first.", "warning");
                 return;
            }
            const dataToSave = getCurrentChecklistData();
            localStorage.setItem(currentChecklistKey, JSON.stringify(dataToSave));
            if (showNotif) showNotification('Checklist saved to browser storage!', 'success');
            lastSavedTimestampEl.textContent = `Saved: ${new Date().toLocaleTimeString()}`; // NEW
        }

        function loadChecklist() {
            if (!currentChecklistKey) return;
            const savedData = JSON.parse(localStorage.getItem(currentChecklistKey) || 'null');
            if (savedData && savedData.meta && savedData.items) {
                loadChecklistData(savedData);
                showNotification(`Loaded: ${checklistNameEl.textContent} from browser`, 'info', 2000);
                lastSavedTimestampEl.textContent = `Loaded from storage`; // NEW
            } else {
                 const defaultDataForCurrentKey = defaultItems[currentChecklistKey] || [];
                 loadChecklistData({ meta: {}, items: defaultDataForCurrentKey, photos: [] });
                 showNotification(`Loaded default: ${checklistNameEl.textContent}`, 'info', 2000);
                 lastSavedTimestampEl.textContent = 'Default loaded'; // NEW
            }
        }

        function resetChecklist() {
            if (!currentChecklistKey) return;
            if (confirm(`Reset "${checklistNameEl.textContent}" to default? This clears saved data & photos for this checklist.`)) {
                localStorage.removeItem(currentChecklistKey);
                const defaultDataForCurrentKey = defaultItems[currentChecklistKey] || [];
                loadChecklistData({ meta: {}, items: defaultDataForCurrentKey, photos: [] });
                showNotification('Checklist reset to default.', 'warning');
                lastSavedTimestampEl.textContent = 'Reset to default'; // NEW
            }
        }

        function triggerUpload() {
             if (!currentChecklistKey) {
                 showNotification("Select a checklist first.", "warning"); return;
             }
            fileInputElement.click();
        }

        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (!file) return;
            if (!file.name.endsWith('.json')) {
                 showNotification("Invalid file type. Upload '.json' only.", "error");
                 fileInputElement.value = ''; return;
            }
            const reader = new FileReader();
            reader.onload = function(e) {
                try {
                    const data = JSON.parse(e.target.result);
                    if (typeof data === 'object' && data !== null && data.meta && Array.isArray(data.items)) {
                         if (data.checklistKey && data.checklistKey !== currentChecklistKey) {
                             if (!confirm(`Uploaded file is for "${data.checklistKey.split('::')[1]}". Load for "${checklistNameEl.textContent}"?`)) {
                                 fileInputElement.value = ''; return;
                             }
                         }
                         loadChecklistData(data);
                         showNotification(`Loaded from ${file.name}!`, 'success');
                         lastSavedTimestampEl.textContent = `Loaded from file`; // NEW
                    } else { showNotification("Invalid JSON structure.", "error"); }
                } catch (error) { showNotification("Error parsing file.", "error"); }
                finally { fileInputElement.value = ''; }
            };
            reader.onerror = () => { showNotification("Error reading file.", "error"); fileInputElement.value = ''; };
            reader.readAsText(file);
        }

        function downloadChecklist() {
            if (!currentChecklistKey) { showNotification("Select a checklist first.", "warning"); return; }
            const dataToDownload = getCurrentChecklistData();
            dataToDownload.checklistKey = currentChecklistKey;
            if (dataToDownload.photos && dataToDownload.photos.length > 5) {
                showNotification("Warning: JSON includes photos, file may be large.", "warning", 5000);
            }
            const dataStr = JSON.stringify(dataToDownload, null, 2);
            const blob = new Blob([dataStr], { type: 'application/json' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            const name = checklistNameEl.textContent.replace(/[^a-z0-9]/gi, '_').toLowerCase();
            a.download = `checklist_${name}_${new Date().toISOString().slice(0, 10)}.json`;
            document.body.appendChild(a); a.click(); document.body.removeChild(a);
            URL.revokeObjectURL(url);
            showNotification("Checklist JSON download initiated.", "success");
        }

        // --- NEW: Checklist Item Filtering ---
        function filterChecklistTable() {
            const searchTerm = itemSearchInputEl.value.toLowerCase().trim();
            const rows = checklistBody.querySelectorAll('tr');
            let visibleItemCount = 0;

            rows.forEach(row => {
                if (row.classList.contains('header-row')) {
                    row.style.display = ''; // Always show headers
                    return;
                }
                const descriptionCell = row.cells[2];
                if (descriptionCell) {
                    const descriptionText = descriptionCell.textContent.toLowerCase();
                    if (descriptionText.includes(searchTerm)) {
                        row.style.display = '';
                        visibleItemCount++;
                    } else {
                        row.style.display = 'none';
                    }
                }
            });
            // updateNumbers should handle numbering of visible/all items based on its logic
            let count = 0;
            checklistBody.querySelectorAll('tr').forEach(r => {
                const numberCell = r.cells[1];
                if (!numberCell) return;
                if (r.classList.contains('header-row')) {
                    numberCell.textContent = '';
                } else {
                    if (r.style.display !== 'none') { // Only number visible items
                        numberCell.textContent = ++count;
                    }
                }
            });
            if (searchTerm) {
                 showNotification(`${count} item(s) found.`, 'info', 1500);
            }
        }


        // --- NEW: Checklist Progress ---
        function updateChecklistProgress() {
            if (!currentChecklistKey) {
                checklistProgressEl.textContent = '';
                return;
            }
            const rows = checklistBody.querySelectorAll('tr:not(.header-row)');
            let totalItems = 0;
            let yesCount = 0;
            let noCount = 0;
            let naCount = 0;
            let addressedCount = 0;

            rows.forEach(row => {
                totalItems++;
                const yesCb = row.cells[3]?.querySelector('input[type="checkbox"]');
                const noCb = row.cells[4]?.querySelector('input[type="checkbox"]');
                const naCb = row.cells[5]?.querySelector('input[type="checkbox"]');

                let itemAddressed = false;
                if (yesCb && yesCb.checked) { yesCount++; itemAddressed = true; }
                if (noCb && noCb.checked) { noCount++; itemAddressed = true; }
                if (naCb && naCb.checked) { naCount++; itemAddressed = true; }
                if (itemAddressed) { addressedCount++; }
            });

            if (totalItems === 0) {
                checklistProgressEl.textContent = 'No items in checklist.';
                return;
            }

            const percentage = totalItems > 0 ? Math.round((addressedCount / totalItems) * 100) : 0;
            checklistProgressEl.innerHTML = `
                ${addressedCount} / ${totalItems} items addressed (<strong>${percentage}%</strong> complete).
                <span class="ml-2">Yes: ${yesCount}</span>,
                <span class="ml-1">No: ${noCount}</span>,
                <span class="ml-1">N/A: ${naCount}</span>
            `;
        }


        // --- PDF EXPORT (Enhanced) ---

        function exportToPDF() {
            if (!currentChecklistKey) {
                showNotification("Please select a checklist first.", "warning"); return;
            }

            const checklistFullData = getCurrentChecklistData();
            const { meta, items: dataItems, photos } = checklistFullData;
            const checklistTitle = checklistNameEl.textContent.trim();

            const doc = new jsPDF({ unit: 'pt', format: 'a4' });
            const pageWidth = doc.internal.pageSize.getWidth();
            const pageHeight = doc.internal.pageSize.getHeight();
            const pageMargin = 40;

            const logoHeight = 35;
            const logoTopPaperOffset = 15;
            const topDecorativeLineY = pageMargin;
            const headerReservedAreaHeight = 75;
            let cursorY = headerReservedAreaHeight;

            const drawHeaderFooter = () => { /* ... same as previous correct version ... */
                if (logoDataUrl) {
                    const logoW = 70;
                    doc.addImage(logoDataUrl, 'PNG', pageMargin, logoTopPaperOffset , logoW, logoHeight);
                }
                doc.setLineWidth(0.5);
                doc.line(pageMargin, topDecorativeLineY, pageWidth - pageMargin, topDecorativeLineY);
                doc.setFont("helvetica", "normal").setFontSize(8);
                doc.text(checklistTitle, pageMargin, pageHeight - (pageMargin / 2) + 5, { align: "left" });
            };

            const getContentStartYForManualDrawing = () => { /* ... same as previous correct version ... */
                 return headerReservedAreaHeight;
            };

            const drawSectionTitle = (titleText, currentGlobalY) => { /* ... same as previous correct version ... */
                const titleVisualHeight = 20;
                const spaceAfterTitle = 20;
                const totalTitleBlockHeight = titleVisualHeight + spaceAfterTitle;
                let yPosForTitleText = currentGlobalY;

                if (yPosForTitleText < getContentStartYForManualDrawing()) {
                    yPosForTitleText = getContentStartYForManualDrawing();
                }

                if (yPosForTitleText + totalTitleBlockHeight > pageHeight - (pageMargin + 20)) {
                     doc.addPage();
                     drawHeaderFooter();
                     yPosForTitleText = getContentStartYForManualDrawing();
                }
                doc.setFont("helvetica", "bold").setFontSize(14);
                doc.text(titleText, pageMargin, yPosForTitleText + titleVisualHeight - 5);
                return yPosForTitleText + totalTitleBlockHeight;
            };

            // --- START PDF CONTENT ---
            drawHeaderFooter();

            let mainTitleTextY = getContentStartYForManualDrawing();
            doc.setFont("helvetica", "bold").setFontSize(18);
            const titleLines = doc.splitTextToSize(checklistTitle, pageWidth - (pageMargin * 2));
            doc.text(titleLines, pageWidth / 2, mainTitleTextY + 18, { align: "center" });
            cursorY = mainTitleTextY + (titleLines.length * 18) + 10;
            doc.setLineWidth(1);
            doc.line(pageMargin, cursorY, pageWidth - pageMargin, cursorY);
            cursorY += 35;

            // 2. Project Details
            const projectDetailsDataArray = [ // Renamed for clarity, ensure this is the only declaration
                ["Project Name", meta.projectName || "—"],
                ["Project Number", meta.projectNumber || "—"],
                ["Company Name", meta.companyName || "—"],
                ["Inspection Date", meta.inspectionDate || "—"],
            ];
            if (meta.inspectionScope) {
                 projectDetailsDataArray.push([{content: "Scope of Inspection", styles: {fontStyle: 'bold'}}, meta.inspectionScope || "—"]);
            }
            doc.autoTable({
                startY: cursorY, head: [], body: projectDetailsDataArray, theme: 'plain', // Use the array
                styles: { fontSize: 10, cellPadding: 5 },
                columnStyles: { 0: { cellWidth: 120, fontStyle: 'bold' }, 1: { cellWidth: pageWidth - (pageMargin * 2) - 120 }},
                margin: { left: pageMargin, right: pageMargin, top: headerReservedAreaHeight },
                didDrawPage: (data) => {
                    drawHeaderFooter();
                }
            });
            cursorY = doc.lastAutoTable.finalY + 35;

            // 3. Checklist Items
            cursorY = drawSectionTitle("Checklist Items", cursorY);
            // CORRECTED:
            const itemTableHeadArray = [['#', 'Description', 'Y', 'N', 'N/A', 'Comment']];
            const itemTableBodyArray = dataItems.map(item => {
                if (item.type === 'header') {
                    return [{ content: item.text, colSpan: 6, styles: { fillColor: [220, 220, 220], textColor: [0,0,0], fontStyle: 'bolditalic' } }];
                }
                const checkMark = (checked, color) => ({ content: checked ? '✔' : '', styles: { halign: 'center', textColor: color, fontSize: 16, fontStyle: 'bold' } });
                return [
                    item.originalIndex.toString(), item.desc,
                    checkMark(item.yes, [0, 128, 0]), checkMark(item.no, [255, 0, 0]),
                    checkMark(item.na, [255, 165, 0]), item.comment
                ];
            });
            doc.autoTable({
                startY: cursorY,
                head: itemTableHeadArray, body: itemTableBodyArray, theme: 'grid',
                styles: { fontSize: 9, cellPadding: 3, overflow: 'linebreak', valign: 'middle' },
                headStyles: { fillColor: [70, 70, 70], textColor: 255, fontStyle: 'bold', halign: 'center' },
                alternateRowStyles: { fillColor: [245, 245, 245] },
                columnStyles: {
                    0: { cellWidth: 25, halign: 'center' }, 1: { cellWidth: (pageWidth - (pageMargin*2) - 25 - 30*3) * 0.55 },
                    2: { cellWidth: 30, halign: 'center' }, 3: { cellWidth: 30, halign: 'center' },
                    4: { cellWidth: 30, halign: 'center' }, 5: { cellWidth: (pageWidth - (pageMargin*2) - 25 - 30*3) * 0.45 }
                },
                margin: { left: pageMargin, right: pageMargin, top: headerReservedAreaHeight },
                didDrawPage: (data) => {
                    drawHeaderFooter();
                }
            });
            cursorY = doc.lastAutoTable.finalY + 35;

            // 4. Photo Attachments
            if (photos.length > 0) {
                cursorY = drawSectionTitle("Photo Attachments", cursorY);
                /* ... same photo logic ... */
                const photoCols = 2;
                const photoOuterGap = 10;
                const photoItemPadding = 8;
                const photoBoxWidth = (pageWidth - (pageMargin * 2) - (photoOuterGap * (photoCols -1))) / photoCols;
                const photoImgHeight = photoBoxWidth * 0.66;
                const textLineHeight = 10;

                for (let i = 0; i < photos.length; i += photoCols) {
                    let currentRowPhotos = photos.slice(i, i + photoCols);
                    let maxHeightInRow = 0;
                    let photoItemRenderDetails = [];

                    for (let j = 0; j < currentRowPhotos.length; j++) {
                        const photo = currentRowPhotos[j];
                        const photoTitle = `Photo ${i + j + 1}:`;
                        const photoDesc = photo.description || '(No description)';
                        const photoDate = `Date Reported: ${photo.date}`;

                        const titleLines = doc.splitTextToSize(photoTitle, photoBoxWidth - 2 * photoItemPadding);
                        const descLines = doc.splitTextToSize(photoDesc, photoBoxWidth - 2 * photoItemPadding);
                        const dateLines = doc.splitTextToSize(photoDate, photoBoxWidth - 2 * photoItemPadding);

                        let currentItemHeight = photoItemPadding + photoImgHeight + 5 +
                                                (titleLines.length * textLineHeight) + 2 +
                                                (descLines.length * textLineHeight) + 5 +
                                                (dateLines.length * textLineHeight) + photoItemPadding;
                        maxHeightInRow = Math.max(maxHeightInRow, currentItemHeight);
                        photoItemRenderDetails.push({ photo, titleLines, descLines, dateLines });
                    }

                    let checkY = cursorY;
                    if (checkY < getContentStartYForManualDrawing()) checkY = getContentStartYForManualDrawing();

                    if (checkY + maxHeightInRow > pageHeight - (pageMargin + 20)) {
                        doc.addPage();
                        drawHeaderFooter();
                        cursorY = getContentStartYForManualDrawing();
                    }

                    for (let j = 0; j < photoItemRenderDetails.length; j++) {
                        const col = j;
                        const itemDetail = photoItemRenderDetails[j];
                        const photoX = pageMargin + col * (photoBoxWidth + photoOuterGap);
                        const photoRenderY = cursorY;

                        doc.setDrawColor(200, 200, 200);
                        doc.rect(photoX, photoRenderY, photoBoxWidth, maxHeightInRow);
                        doc.addImage(itemDetail.photo.dataUrl, 'JPEG', photoX + photoItemPadding, photoRenderY + photoItemPadding, photoBoxWidth - 2 * photoItemPadding, photoImgHeight);
                        let textY = photoRenderY + photoItemPadding + photoImgHeight + 8;
                        doc.setFont("helvetica", "bold").setFontSize(8);
                        doc.text(itemDetail.titleLines, photoX + photoItemPadding, textY);
                        textY += itemDetail.titleLines.length * textLineHeight + 2;
                        doc.setFont("helvetica", "normal").setFontSize(8);
                        doc.text(itemDetail.descLines, photoX + photoItemPadding, textY, { maxWidth: photoBoxWidth - 2 * photoItemPadding });
                        textY += itemDetail.descLines.length * textLineHeight + 5;
                        doc.setFont("helvetica", "italic").setFontSize(8);
                        doc.text(itemDetail.dateLines, photoX + photoItemPadding, textY);
                    }
                    cursorY += maxHeightInRow + photoOuterGap;
                }
                if (photos.length > 0) {
                     cursorY += (35 - photoOuterGap);
                }
            }

            // 5. Deficiencies / Items Marked 'No'
            const deficiencies = dataItems.filter(item => item.type === 'item' && item.no === true);
            if (deficiencies.length > 0) {
                cursorY = drawSectionTitle("Deficiencies / Items Marked 'No'", cursorY);
                // CORRECTED:
                const deficiencyTableBodyArray = deficiencies.map(item => [
                    item.originalIndex.toString(), item.desc, item.comment
                ]);
                doc.autoTable({
                    startY: cursorY,
                    head: [['#', 'Description', 'Comment']], body: deficiencyTableBodyArray, theme: 'grid',
                    styles: { fontSize: 9, cellPadding: 3, overflow: 'linebreak' },
                    headStyles: { fillColor: [220, 53, 69], textColor: 255, fontStyle: 'bold', halign: 'center' },
                    columnStyles: {
                        0: { cellWidth: 30, halign: 'center' },
                        1: { cellWidth: (pageWidth - (pageMargin*2) - 30) * 0.5 },
                        2: { cellWidth: (pageWidth - (pageMargin*2) - 30) * 0.5 }
                    },
                    margin: { left: pageMargin, right: pageMargin, top: headerReservedAreaHeight },
                    didDrawPage: (data) => {
                        drawHeaderFooter();
                    }
                });
                cursorY = doc.lastAutoTable.finalY + 35;
            }

            // 6. Sign-off
            cursorY = drawSectionTitle("Sign-off", cursorY);
            // CORRECTED:
            const signOffHeadersArray = ["Internal Control / QC", "External Control / 3rd Party", "Quality Assurance"];
            const signOffDataRowsArray = [
                { label: "Name", values: [meta.sigIntName, meta.sigExtName, meta.sigQaName] },
                { label: "Position", values: [meta.sigIntPos, meta.sigExtPos, meta.sigQaPos] },
                { label: "Date", values: [meta.sigIntDate, meta.sigExtDate, meta.sigQaDate] },
                { label: "Signature", values: ["", "", ""] }
            ];
            let signOffTableBodyArray = signOffDataRowsArray.map(row => { // `let` is fine here as it's reassigned below
                return row.values.map(val => `${row.label}: ${val || ""}`);
            });
            signOffTableBodyArray[signOffTableBodyArray.length - 1] = signOffDataRowsArray.find(r => r.label === "Signature").values.map(() => "Signature:");

            doc.autoTable({
                startY: cursorY,
                head: [signOffHeadersArray], body: signOffTableBodyArray, theme: 'grid',
                styles: { fontSize: 9, cellPadding: {top: 5, right: 5, bottom: 5, left: 5}, valign: 'top' },
                headStyles: { fontStyle: 'bold', halign: 'center', fillColor: [230,230,230], textColor: 0, minCellHeight: 25 },
                bodyStyles: { minCellHeight: 25 },
                columnStyles: {
                    0: { cellWidth: (pageWidth - pageMargin * 2) / 3 },
                    1: { cellWidth: (pageWidth - pageMargin * 2) / 3 },
                    2: { cellWidth: (pageWidth - pageMargin * 2) / 3 }
                },
                alternateRowStyles: { fillColor: [248, 249, 250] },
                margin: { left: pageMargin, right: pageMargin, top: headerReservedAreaHeight },
                didDrawPage: (data) => {
                    drawHeaderFooter();
                }
            });

            // Finalize Page X of Y
            const totalPagesStr = doc.internal.getNumberOfPages().toString();
            for (let i = 1; i <= doc.internal.getNumberOfPages(); i++) {
                doc.setPage(i);
                doc.setFont("helvetica", "normal").setFontSize(8);
                doc.text(doc.internal.getCurrentPageInfo().pageNumber.toString() + ' of ' + totalPagesStr, pageWidth - pageMargin, pageHeight - (pageMargin/2) + 5, {align: 'right'});
            }

            const filename = `QAQC_${checklistTitle.replace(/\s+/g, '_')}_${new Date().toISOString().slice(0, 10)}.pdf`;
            doc.save(filename);
            showNotification("PDF export complete!", "success");
        }


        // --- EVENT LISTENERS ---
        document.addEventListener('DOMContentLoaded', () => {
            populateSidebar();
            openSidebarBtn?.addEventListener('click', () => toggleSidebar(true));
            closeSidebarBtn?.addEventListener('click', () => toggleSidebar(false));
            overlay?.addEventListener('click', () => toggleSidebar(false));
            checklistBody.addEventListener('input', (e) => { // Use input for contenteditable and change for checkboxes
                if (e.target.type === 'checkbox' || e.target.isContentEditable) {
                    updateChecklistProgress();
                }
            });
            // initSortable(); // Moved to loadChecklistData to ensure it's run after items are loaded
        });

    </script>
</body>
</html>
